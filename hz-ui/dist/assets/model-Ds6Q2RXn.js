import{cE as h,g as j,r as o,v as n,cz as w}from"./index-BSX4TNZE.js";const R=h("modelConfigs",()=>{const{proxy:u}=j(),a=o([]),v=n(()=>a.value.reduce((e,t)=>(e[t.name]=t,e),{})),p=n(()=>a.value.reduce((e,t)=>(e[t.id]=t,e),{})),g=n(()=>a.value.map(e=>({label:e.verbose_name,value:e.id}))),f=e=>{a.value=e},i=async(e=!1)=>{if(!e&&a.value.length>0)return;let t=await u.$api.getCiModel();a.value=t.data.results},l=o([]),y=n(()=>l.value.reduce((e,t)=>(e[t.id]=t,e),{})),m=n(()=>l.value.filter(e=>e.type==="enum").reduce((e,t)=>{try{let s=JSON.parse(t.rule),d=[];Object.keys(s).forEach(c=>{d.push({value:c,label:s[c]})}),e[t.id]=d}catch(s){console.warn("Failed to parse rule for item:",t.id,s)}return e},{})),b=e=>{l.value=e},O=async(e=!1)=>{if(!e&&l.value.length>0)return;let t=await u.$api.getValidationRules({page_size:2e3,page:1});l.value=t.data.results},r=o({}),M=async e=>{let t=await w.getCiModelTreeNode({model:e});r.value[e]=t.data[0]};return{allModels:a,modelObjectByName:v,modelObjectById:p,modelOptions:g,getModel:i,updateAllModels:f,allModelCiDataObj:r,getAllModelTreeInstances:async(e=!1)=>{!e&&Object.keys(r.value).length>0||(a.value.length==0&&await i(),a.value.forEach(async t=>{await M(t.id)}))},validationRules:l,validationRulesObjectById:y,validationRulesEnumOptionsObject:m,getValidationRules:O,updateValidationRules:b}},{persist:!0});export{R as m};
