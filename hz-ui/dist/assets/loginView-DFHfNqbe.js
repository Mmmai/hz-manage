import{d as k,g as R,r as a,a as f,c as S,b as o,w as t,e as s,o as F,u as B,f as E,h as N,i as m,j as U,k as $,t as q,_ as I}from"./index-DD1IBG_Z.js";import{u as K}from"./config-Cz7wJiRA.js";const T={class:"login-container"},j={style:{color:"red"}},D=k({__name:"loginView",setup(G){const{proxy:l}=R(),i=B(),g=K(),w=E();N();const y=a(),v=a(""),V=a(""),b=f({password:[{required:!0,message:"请输入密码",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}]}),p=a("");a("");const r=f({username:"",password:""}),c=()=>{l.$refs.ruleFormRef.validate(async _=>{if(_){let e=await l.$api.login(r);if(console.log(e),e.data.code!=200)p.value=e.data.error;else{i.commit("updateCurrentUsername",r.username),i.commit("addToken",e.data),w.push({name:"main"});let n=await l.$api.getSysConfig({params:"gm"});g.setGmCry(n.data)}}})};return(_,e)=>{const n=s("el-input"),u=s("el-form-item"),x=s("el-button"),C=s("el-form"),h=s("el-card");return F(),S("div",T,[o(h,{class:"box-card"},{header:t(()=>[...e[2]||(e[2]=[m("div",{class:"card-header"},[m("span",null,"欢迎登录")],-1)])]),default:t(()=>[o(C,{model:r,style:{"max-width":"460px"},ref_key:"ruleFormRef",ref:y,rules:b,"label-position":"right","label-width":"80px",onKeyup:U(c,["enter","native"])},{default:t(()=>[o(u,{label:"用户名",prop:"username",error:v.value},{default:t(()=>[o(n,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=d=>r.username=d)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,{label:"密码",prop:"password",error:V.value},{default:t(()=>[o(n,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,null,{default:t(()=>[o(x,{type:"primary",onClick:c,style:{width:"100%"}},{default:t(()=>[...e[3]||(e[3]=[$("登录",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"]),m("span",j,q(p.value),1)]),_:1})])}}}),z=I(D,[["__scopeId","data-v-cf2eaa8a"]]);export{z as default};
