import{d as L,s as T,v as x,x as $,y as j,r as q,z,A as E,c as _,f as r,w as e,h as u,o as n,b as d,F as p,i as h,B as s,k as y,C as v,t as k,q as W,D as G,m as H,K as J,j as O,_ as P}from"./index-Cm0tF2Sj.js";import{u as Q}from"./keepAlive-CpUGtZ7m.js";import{R as X,u as Y}from"./index-noWSH00j.js";const Z={class:"asset-config-layout"},ee=L({__name:"cmdbForUops",setup(ne){const w=Q(),{keepAliveName:N}=T(w);X("#749bc7"),Y();const A=$(),B=O(),m=j(),R=x(()=>{const t=A.name;return t?typeof t=="string"&&t.startsWith("cmdb_only_")?t.replace("cmdb_only_",""):t.toString():""}),b=x(()=>m.state.menuInfo||[]),g=x(()=>{const t=b.value.find(o=>o.name==="cmdb");return t&&t.children?t.children:b.value.filter(o=>o.name==="cidata"||o.name==="cimodelManage"||o.parentid_id==="cmdb"||o.parentid_id==="cimodelManage")});console.log("菜单",g.value);const M=(t,o)=>{for(const c of t){if(c.name===o)return c;if(c.children&&c.children.length>0){const i=M(c.children,o);if(i)return i}}return null},D=async t=>{const o=M(b.value,t);o&&B.push({name:`cmdb_only_${o.name}`})};return q(""),z(async()=>{if(!m.state.menuInfo||m.state.menuInfo.length===0)try{await m.dispatch("getRoleMenu",{role:m.state.role})}catch(t){console.error("获取菜单失败:",t)}}),E(()=>{}),(t,o)=>{const c=u("el-icon"),i=u("el-menu-item"),S=u("el-sub-menu"),F=u("el-menu"),I=u("el-scrollbar"),V=u("el-aside"),K=u("router-view"),U=u("el-main"),C=u("el-container");return n(),_("div",Z,[r(C,{class:"full-height"},{default:e(()=>[r(V,{width:"200px",class:"aside"},{default:e(()=>[o[0]||(o[0]=d("div",{class:"logo"},[d("h3",null,"资产配置")],-1)),r(I,null,{default:e(()=>[r(F,{"default-active":R.value,class:"el-menu-vertical",onSelect:D},{default:e(()=>[(n(!0),_(p,null,h(g.value,a=>(n(),_(p,{key:a.name},[a.children&&a.children.length>0?(n(),s(S,{key:0,index:a.name},{title:e(()=>[a.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:a.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(a.label),1)]),default:e(()=>[(n(!0),_(p,null,h(a.children,l=>(n(),_(p,{key:l.name},[l.children&&l.children.length>0?(n(),s(S,{key:0,index:l.name},{title:e(()=>[l.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:l.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(l.label),1)]),default:e(()=>[(n(!0),_(p,null,h(l.children,f=>(n(),s(i,{key:f.name,index:f.name},{default:e(()=>[f.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:f.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(f.label),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(n(),s(i,{key:1,index:l.name},{default:e(()=>[l.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:l.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(l.label),1)]),_:2},1032,["index"]))],64))),128))]),_:2},1032,["index"])):(n(),s(i,{key:1,index:a.name},{title:e(()=>[W(k(a.label),1)]),default:e(()=>[a.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:a.icon},null,8,["icon"])]),_:2},1024)):y("",!0)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active"])]),_:1})]),_:1}),r(U,{class:"main-content"},{default:e(()=>[r(K,null,{default:e(({Component:a,route:l})=>[(n(),s(J,{include:H(N)},[(n(),s(G(a),{key:l.path}))],1032,["include"]))]),_:1})]),_:1})]),_:1})])}}}),le=P(ee,[["__scopeId","data-v-60818487"]]);export{le as default};
