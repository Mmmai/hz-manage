import{d as D,c as m,r as o,aN as L,e as s,o as d,f,g as n,w as l,F as N,b1 as O,O as U,Y as V,j as b,t as I,k as P}from"./index-8aBZIOBx.js";const E={class:"card"},$=D({__name:"logFlowMissionView",setup(T){const{proxy:w}=P(),h=m([{label:"用户",prop:"username",width:"90"},{label:"日志流程",prop:"flow_name"},{label:"分析ID",prop:"task_id"},{label:"数据源",prop:"dataSource_name",width:"120"},{label:"创建时间",prop:"create_time",width:"220",sortable:!0},{label:"状态",prop:"status",width:"100",fixed:"right"}]),v=t=>t=="Success"?"success":t==="Failed"?"error":"info",x={Success:"成功",Failed:"失败",Unknown:"未知"},p=o([]),r=async()=>{let t=await w.$api.getLogFlowMission({page:i.value,page_size:u.value});p.value=t.data.results,c.value=t.data.count};m({});const i=o(1),u=o(10),y=o("default"),z=o(!1),c=o(0),C=()=>{r()},S=()=>{r()};return L(async()=>{await r()}),(t,a)=>{const k=s("el-tag"),_=s("el-table-column"),F=s("el-link"),j=s("el-table"),M=s("el-pagination");return d(),f("div",E,[n(j,{data:p.value,"default-sort":{prop:"create_time",order:"descending"}},{default:l(()=>[(d(!0),f(N,null,O(h,(e,B)=>(d(),U(_,{key:B,prop:e.prop,label:e.label,width:e.width,sortable:e.sortable,fixed:e.fixed},V({_:2},[e.prop==="status"?{name:"default",fn:l(g=>[n(k,{round:"",type:v(g.row.status)},{default:l(()=>[b(I(x[g.row.status]),1)]),_:2},1032,["type"])]),key:"0"}:void 0]),1032,["prop","label","width","sortable","fixed"]))),128)),n(_,{label:"操作",fixed:"right",width:"80"},{default:l(e=>[n(F,{href:"/#/log/logFlowMission/"+e.row.mission_id+"?mission_id="+e.row.mission_id+"&verbose_name="+e.row.flow_name,type:"primary"},{default:l(()=>a[2]||(a[2]=[b("查看结果")])),_:2},1032,["href"])]),_:1})]),_:1},8,["data"]),n(M,{"current-page":i.value,"onUpdate:currentPage":a[0]||(a[0]=e=>i.value=e),"page-size":u.value,"onUpdate:pageSize":a[1]||(a[1]=e=>u.value=e),"page-sizes":[10,20,50,100,200],size:y.value,disabled:z.value,layout:"total, sizes, prev, pager, next, jumper",total:c.value,onSizeChange:C,onCurrentChange:S,style:{"margin-top":"5px","justify-content":"flex-end"}},null,8,["current-page","page-size","size","disabled","total"])])}}});export{$ as default};
