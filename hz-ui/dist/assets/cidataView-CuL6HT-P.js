import{d as sl,aN as Ke,g as ml,bB as nl,r as i,a as fl,h as c,B as u,o as t,w as l,f as a,b as $,q as p,c as r,k as O,t as x,m as k,ch as $e,ce as Va,b_ as S,v as R,bP as jl,F as oe,i as pe,c0 as $a,ci as gt,aP as he,_ as Rl,u as Ma,E as ol,y as Oa,bX as xl,j as yt,x as Da,z as Ua,bc as vl,bV as z,cj as bt,ck as wt,c8 as kt,cg as Xl,cl as ht,cm as Ct,ca as xt,bM as Tl,aa as Vt,aQ as Fe,cn as Ca,co as $t,cd as Mt,cp as xa,c4 as ea,l as Ot,cq as Dt,cr as Ut,cs as It}from"./index-BSX4TNZE.js";import{l as Ft}from"./vue-draggable-plus-CxDq7V_C.js";import{c as Pt}from"./ciDataAudit-BFeUd0FI.js";import{e as Zl,d as ql}from"./gmCrypto-Be7PV8B3.js";import{u as Nt}from"./ci-BxSXcdsR.js";import"./vue3-json-viewer-CUIQsf7-.js";const St={class:"flexJstart gap-1"},qt={key:0,class:"flexJstart gap-1"},Tt={key:3,class:"flexJstart gap-1"},jt=sl({__name:"ciDataUpload",props:Ke(["ciModelId","currentNodeId"],{isShowUpload:{},isShowUploadModifiers:{}}),emits:Ke(["getCiData"],["update:isShowUpload"]),setup(ee,{emit:fe}){const{proxy:Y}=ml(),U=ee,E=fe,M=nl(ee,"isShowUpload"),q=i([]),Z=i(null),re=["xlsx"],ie=i(10),v=i({}),me=i({}),te=fl({"Content-Type":"multipart/form-data"}),le=i({}),ne=async()=>{Object.keys(me.value).length>0?Object.entries(me.value).forEach(async([T,w])=>{let g=await Y.$api.importCiDataStatus(w);v.value[T]=g.data,(g.data.status==="completed"||g.data.status==="failed")&&delete me.value[T]}):(clearInterval(se),se=null,E("getCiData",{model:U.ciModelId,model_instance_group:U.currentNodeId}))};let se=null;const H=async T=>{let w=new FormData;w.append("file",T.file),w.append("model",U.ciModelId);let g=await Y.$api.importCiData(w,te,2*60*1e3);g.status==200?(me.value[T.file.uid]=g.data,le.value[T.file.uid]=!0,se===null&&(se=setInterval(ne,2e3))):(le.value[T.file.uid]=!1,S({message:`导入异常: ${JSON.stringify(g.data)}`,type:"error",showClose:!0}))},ve=()=>{},Ce=T=>{let w=T.name;if(T.type!=""||T.type!=null||T.type!=null){const g=T.name.replace(/.+\./,"").toLowerCase();return T.size/1024/1024<100?re.includes(g)?q.value.find(ue=>ue.name==w&&ue.lastModified==T.lastModified)?(S({type:"error",message:"该文件已上传！",showClose:!0}),!1):!0:(S({message:`不能上传${g}类型的文件`,type:"error",showClose:!0}),!1):(S.error("上传文件大小不能超过 100MB!"),!1)}},P=async T=>{await Y.$api.downloadErrorRecords({error_file_key:T})},Q=async()=>{await Y.$api.downloadImportTemplate({model:U.ciModelId})};return(T,w)=>{const g=c("upload-filled"),y=c("el-icon"),G=c("el-col"),ue=c("el-button"),be=c("el-row"),Me=c("Loading"),xe=c("CircleCheck"),B=c("el-link"),ae=c("el-upload"),X=c("el-dialog");return t(),u(X,{modelValue:M.value,"onUpdate:modelValue":w[1]||(w[1]=J=>M.value=J),title:"导入",width:"800"},{default:l(()=>[a(ae,{class:"upload-demo",drag:"",action:"",ref_key:"refUpload",ref:Z,headers:te,"http-request":H,"file-list":q.value,"before-upload":Ce,limit:ie.value,onOnChange:ve,"show-file-list":""},{tip:l(()=>[a(be,{justify:"space-between",align:"middle"},{default:l(()=>[a(G,{span:18},{default:l(()=>[...w[2]||(w[2]=[$("div",null,"只支持从此系统下载的模板导入，请按右侧按钮下载模板!",-1)])]),_:1}),a(G,{span:3},{default:l(()=>[a(ue,{link:"",type:"primary",onClick:w[0]||(w[0]=J=>Q())},{default:l(()=>[...w[3]||(w[3]=[p("点击下载模板",-1)])]),_:1})]),_:1})]),_:1})]),file:l(({file:J,index:Ye})=>{var Se,He,I,qe,j,ul,dl,Ge,We;return[$("div",St,[$("span",null,x(J.name),1),le.value[J.uid]==!0?(t(),r("div",qt,[((Se=v.value[J.uid])==null?void 0:Se.status)!=="completed"?(t(),u(y,{key:0,class:"is-loading"},{default:l(()=>[a(Me)]),_:1})):((He=v.value[J.uid])==null?void 0:He.failed)>>>0?(t(),u(y,{key:1},{default:l(()=>[a(k($e),{color:"var(--el-color-warning)"})]),_:1})):(t(),u(y,{key:2},{default:l(()=>[a(xe,{color:"var(--el-color-success)"})]),_:1})),v.value[J.uid]?(t(),r("div",Tt,[$("span",null,x(`进度: ${(I=v.value[J.uid])==null?void 0:I.progress}%`),1),$("span",null,x(`结果: 总条数: ${(qe=v.value[J.uid])==null?void 0:qe.total},创建: ${(j=v.value[J.uid])==null?void 0:j.created},更新: ${(ul=v.value[J.uid])==null?void 0:ul.updated},跳过: ${(dl=v.value[J.uid])==null?void 0:dl.skipped},失败: ${(Ge=v.value[J.uid])==null?void 0:Ge.failed}.`),1),((We=v.value[J.uid])==null?void 0:We.failed)>>>0?(t(),u(B,{key:0,type:"danger",onClick:Vl=>{var Ze;return P((Ze=v.value[J.uid])==null?void 0:Ze.error_file_key)}},{default:l(()=>[...w[4]||(w[4]=[p("查看导入失败数据",-1)])]),_:1},8,["onClick"])):O("",!0)])):O("",!0)])):le.value[J.uid]==!1?(t(),u(y,{key:1},{default:l(()=>[a(k(Va),{color:"var(--el-color-error)"})]),_:1})):O("",!0)])]}),default:l(()=>[a(y,{class:"el-icon--upload"},{default:l(()=>[a(g)]),_:1}),w[5]||(w[5]=$("div",{class:"el-upload__text"},[p("拖拽文件到此或者 "),$("em",null,"点击上传文件")],-1))]),_:1},8,["headers","file-list","limit"])]),_:1},8,["modelValue"])}}}),Rt={style:{display:"flex","justify-content":"space-around",gap:"20px",height:"100%"}},Et={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},At={style:{width:"100%",overflow:"auto"}},Lt={class:"listItem"},zt={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},Yt={class:"listItem"},Bt={style:{flex:"auto"}},Jt=sl({__name:"ciDataTableCol",props:Ke(["ciModelId","allModelFieldInfo","allModelField"],{isShowTableCol:{},isShowTableColModifiers:{},hasConfigField:{},hasConfigFieldModifiers:{}}),emits:Ke(["reloadTable"],["update:isShowTableCol","update:hasConfigField"]),setup(ee,{expose:fe,emit:Y}){const U=ee,E=nl(ee,"isShowTableCol"),M=nl(ee,"hasConfigField"),{proxy:q}=ml(),Z=i(""),re=i(""),ie=R(()=>Z.value===""?T.value:T.value.filter(w=>w.verbose_name.includes(Z.value)));function v(){E.value=!1}const me=w=>{M.value.push(w)},te=w=>{let g=M.value.indexOf(w);M.value.splice(g,1)},le=w=>{console.log("start",w)},ne=w=>{console.log("onEnd",w),console.log(M.value)},se=()=>{console.log("update")},H=i({}),ve=async()=>{let w=await q.$api.getCiModelCol({model:U.ciModelId});H.value=w.data;let g=[];w.data.fields_preferred.forEach(y=>{g.push(U.allModelFieldInfo[y])}),M.value=g},Ce=R(()=>M.value.map(w=>w.id)),P=Y;jl(()=>M.value,w=>{console.log("更新表格"),P("reloadTable")},{deep:!0});const Q=async()=>{let w=await q.$api.updateCiModelCol({id:H.value.id,fields_preferred:Ce.value});w.status=="200"?(S({type:"success",message:"更新成功"}),he(()=>{re.value.clear(),E.value=!1})):S({showClose:!0,message:"更新失败:"+JSON.stringify(w.data),type:"error"})},T=R(()=>U.allModelField.filter(w=>!M.value.includes(w)));return fe({getHasConfigField:ve}),(w,g)=>{const y=c("el-text"),G=c("el-divider"),ue=c("el-input"),be=c("el-icon"),Me=c("el-button"),xe=c("el-drawer");return t(),u(xe,{modelValue:E.value,"onUpdate:modelValue":g[2]||(g[2]=B=>E.value=B),direction:"rtl",size:"40%"},{header:l(()=>[a(y,{tag:"b"},{default:l(()=>[...g[3]||(g[3]=[p("表格列显示配置",-1)])]),_:1})]),default:l(()=>[$("div",Rt,[$("div",Et,[a(y,{tag:"b"},{default:l(()=>[...g[4]||(g[4]=[p("模型字段",-1)])]),_:1}),a(G),a(ue,{modelValue:Z.value,"onUpdate:modelValue":g[0]||(g[0]=B=>Z.value=B),style:{width:"100%","margin-bottom":"10px"},placeholder:"筛选字段名称",clearable:"",ref_key:"filterInputRef",ref:re},null,8,["modelValue"]),$("div",At,[(t(!0),r(oe,null,pe(ie.value,(B,ae)=>(t(),r("div",{key:ae},[$("div",Lt,[$("span",null,x(B.verbose_name),1),a(be,null,{default:l(()=>[a(k($a),{onClick:X=>me(B)},null,8,["onClick"])]),_:2},1024)])]))),128))])]),$("div",zt,[a(y,{tag:"b"},{default:l(()=>[...g[5]||(g[5]=[p("已显示字段",-1)])]),_:1}),a(G),a(k(Ft),{"force-fallback":!0,"scroll-sensitivity":200,ref:"el",modelValue:M.value,"onUpdate:modelValue":g[1]||(g[1]=B=>M.value=B),onStart:le,onUpdate:se,onEnd:ne,style:{width:"100%",overflow:"auto"}},{default:l(()=>[(t(!0),r(oe,null,pe(M.value,(B,ae)=>(t(),r("div",{key:ae},[$("div",Yt,[$("span",null,x(B.verbose_name),1),a(be,null,{default:l(()=>[a(k(gt),{onClick:X=>te(B)},null,8,["onClick"])]),_:2},1024)])]))),128))]),_:1},8,["modelValue"])])])]),footer:l(()=>[$("div",Bt,[a(Me,{onClick:v},{default:l(()=>[...g[6]||(g[6]=[p("取消",-1)])]),_:1}),a(Me,{type:"primary",onClick:Q},{default:l(()=>[...g[7]||(g[7]=[p("保存",-1)])]),_:1})])]),_:1},8,["modelValue"])}}}),Kt=Rl(Jt,[["__scopeId","data-v-3859704e"]]),Ht={class:"dialog-footer"},Gt=sl({__name:"ciDataShowPass",props:{showAllPassDia:{},showAllPassDiaModifiers:{}},emits:["update:showAllPassDia"],setup(ee){const fe=Ma(),Y=nl(ee,"showAllPassDia"),U=R(()=>fe.gmCry),E=i(),M=fl({secret:null,time:3});i(""),i(!1);const q=async ie=>{ie.validate(async v=>{v&&(M.secret===U.value.key?(ol({title:"操作成功",message:"解密成功,"+M.time+"分钟后过期！",type:"success",duration:2e3}),fe.updateShowAllPass(!0),Y.value=!1,fe.setShowAllPassTime(M.time*60*1e3),Z(E.value)):ol({title:"操作失败",message:"密钥错误",type:"warning",duration:2e3}))})},Z=ie=>{ie&&ie.resetFields()},re=()=>{Y.value=!1,Z(E.value)};return(ie,v)=>{const me=c("el-input"),te=c("el-form-item"),le=c("el-input-number"),ne=c("el-form"),se=c("el-button"),H=c("el-dialog");return t(),u(H,{modelValue:Y.value,"onUpdate:modelValue":v[3]||(v[3]=ve=>Y.value=ve),title:"查看密码",width:"400"},{footer:l(()=>[$("div",Ht,[a(se,{onClick:re},{default:l(()=>[...v[5]||(v[5]=[p("取消",-1)])]),_:1}),a(se,{type:"primary",onClick:v[2]||(v[2]=ve=>q(E.value))},{default:l(()=>[...v[6]||(v[6]=[p(" 查看 ",-1)])]),_:1})])]),default:l(()=>[a(ne,{ref_key:"allPassFormRef",ref:E,inline:!0,model:M,"require-asterisk-position":"right","label-position":"left"},{default:l(()=>[a(te,{label:"密钥",prop:"secret",rules:[{required:!0,message:"输入密钥",trigger:"blur"}]},{default:l(()=>[a(me,{type:"password",modelValue:M.secret,"onUpdate:modelValue":v[0]||(v[0]=ve=>M.secret=ve),"show-password":"",placeholder:"输入密钥查看密码",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),a(te,{label:"有效时间",prop:"time"},{default:l(()=>[a(le,{modelValue:M.time,"onUpdate:modelValue":v[1]||(v[1]=ve=>M.time=ve),min:1,step:1,max:30},{suffix:l(()=>[...v[4]||(v[4]=[$("span",null,"分钟",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Wt={style:{display:"flex","justify-content":"center"}},Qt=sl({__name:"ciDataqCode",props:Ke(["qCodeContext"],{showqCodeDia:{},showqCodeDiaModifiers:{}}),emits:["update:showqCodeDia"],setup(ee){const{proxy:fe}=ml();Oa();const Y=nl(ee,"showqCodeDia"),U=ee;return(E,M)=>{const q=c("a-qrcode"),Z=c("el-dialog");return t(),u(Z,{modelValue:Y.value,"onUpdate:modelValue":M[0]||(M[0]=re=>Y.value=re),title:"实例二维码",width:"600"},{default:l(()=>[$("div",Wt,[a(q,{value:JSON.stringify(U.qCodeContext),size:500},null,8,["value"])])]),_:1},8,["modelValue"])}}}),Xt={style:{display:"flex","justify-content":"space-around",gap:"20px",height:"100%"}},Zt={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},eo={style:{width:"100%",overflow:"auto"}},lo={class:"listItem"},ao={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},to={style:{"margin-right":"5px"}},oo={style:{float:"left"}},no={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},so={key:0},uo={key:1},ro={key:0},io={key:1},co={key:2},po={key:3},vo={style:{flex:"auto"}},fo=sl({__name:"ciDataFilter",props:Ke(["ciModelId","currentNodeId","allModelField","allModelFieldByNameObj","enumOptionObj","validationRulesObj","modelRefOptions"],{showFilter:{},showFilterModifiers:{}}),emits:Ke(["getCiData","updateFilterParam"],["update:showFilter"]),setup(ee,{expose:fe,emit:Y}){const U=ee,E=nl(ee,"showFilter"),M=i(""),q=i(""),Z=R(()=>M.value===""?le.value:le.value.filter(g=>g.verbose_name.includes(M.value))),{proxy:re}=ml();function ie(){E.value=!1}const v=g=>{Ce.value.push(g)},me=g=>{let y=H.filterParams.indexOf(g);Ce.value.splice(y,1)},te=(g,y)=>{g==="instance_name"?H.instance_name="":Ce.value.splice(y,1),he(()=>{ne("updateFilterParam",P.value)})},le=R(()=>U.allModelField.filter(g=>!Ce.value.includes(g)));i({});const ne=Y,se=i(""),H=fl({filterParams:[],instance_name:""}),ve=i([{value:"=",label:"等于",description:"等于"},{value:"not:",label:"不等于",description:"不等于"},{value:"like:",label:"模糊匹配",description:"模糊匹配"},{value:"not:like:",label:"反向模糊",description:"反向模糊匹配"},{value:"in:",label:"在列表",description:"以,分隔"},{value:"not:in:",label:"不在列表",description:"以,分隔"},{value:"regex:",label:"正则",description:"正则表达式"},{value:"null",label:"空",description:"正则表达式"},{value:"not:null",label:"非空",description:"正则表达式"}]),Ce=i([]),P=R(()=>{let g=new Object;return H.filterParams.forEach(y=>{if(y.match==="null"||y.match==="not:null"){g[y.name]=y.match;return}if(y.value!==""){let G=null;y.value!==null?G=y.value:G="null",y.match==="="?g[y.name]=G:g[y.name]=y.match+G}}),H.instance_name!==""&&(g.instance_name=H.instance_name),g}),Q=()=>{console.log(P.value),ne("updateFilterParam",P.value),console.log(P.value),he(()=>{ne("getCiData",{model:U.ciModelId,model_instance_group:U.currentNodeId})}),E.value=!1},T=R(()=>{var g;return(g=H.filterParams)==null?void 0:g.map(y=>y.name)});jl(()=>Ce.value,g=>{var G;let y=new Array;(G=Ce.value)==null||G.forEach((ue,be)=>{var Me;if(((Me=T.value)==null?void 0:Me.indexOf(ue.name))>>>-1)y.push({name:ue.name,value:"",match:"=",label:ue.verbose_name});else{let xe=H.filterParams.findIndex(B=>B.name===ue.name);y.push(H.filterParams[xe])}}),H.filterParams=y},{deep:!0});const w=g=>{g&&(g.resetFields(),ne("updateFilterParam",P.value),he(()=>{ne("getCiData",{model:U.ciModelId,model_instance_group:U.currentNodeId})}))};return fe({removeFilterParam:te}),(g,y)=>{const G=c("el-text"),ue=c("el-divider"),be=c("el-input"),Me=c("el-icon"),xe=c("el-form-item"),B=c("el-button"),ae=c("el-option"),X=c("el-select"),J=c("el-switch"),Ye=c("el-space"),Se=c("el-form"),He=c("el-drawer");return t(),u(He,{modelValue:E.value,"onUpdate:modelValue":y[4]||(y[4]=I=>E.value=I),direction:"rtl",size:"50%","before-close":ie},{header:l(()=>[a(G,{tag:"b"},{default:l(()=>[...y[5]||(y[5]=[p("筛选",-1)])]),_:1})]),default:l(()=>[$("div",Xt,[$("div",Zt,[a(G,{tag:"b"},{default:l(()=>[...y[6]||(y[6]=[p("模型字段",-1)])]),_:1}),a(ue),a(be,{modelValue:M.value,"onUpdate:modelValue":y[0]||(y[0]=I=>M.value=I),style:{width:"100%","margin-bottom":"10px"},placeholder:"筛选字段名称",clearable:"",ref_key:"filterInputRef",ref:q},null,8,["modelValue"]),$("div",eo,[(t(!0),r(oe,null,pe(Z.value,(I,qe)=>(t(),r("div",{key:qe},[$("div",lo,[$("span",null,x(I.verbose_name),1),a(Me,null,{default:l(()=>[a(k($a),{onClick:j=>v(I)},null,8,["onClick"])]),_:2},1024)])]))),128))])]),$("div",ao,[a(G,{tag:"b"},{default:l(()=>[...y[7]||(y[7]=[p("过滤器",-1)])]),_:1}),a(ue),a(Se,{ref_key:"filterFormRef",ref:se,model:H,"label-width":"auto",style:{width:"100%"},"label-position":"top"},{default:l(()=>[a(Ye,{wrap:""},{default:l(()=>[a(xe,{label:"唯一标识",prop:"instance_name"},{default:l(()=>[a(be,{modelValue:H.instance_name,"onUpdate:modelValue":y[1]||(y[1]=I=>H.instance_name=I),type:"textarea",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),(t(!0),r(oe,null,pe(H.filterParams,(I,qe)=>(t(),u(xe,{key:I.index,prop:"filterParams."+qe+".value"},{label:l(()=>[$("span",to,x(I.label),1),a(B,{icon:k(Va),size:"small",circle:"",onClick:xl(j=>me(I),["prevent"])},null,8,["icon","onClick"])]),default:l(()=>[a(Ye,null,{default:l(()=>[a(X,{modelValue:I.match,"onUpdate:modelValue":j=>I.match=j,placeholder:"匹配方式",style:{"max-width":"100px",width:"120px"}},{default:l(()=>[(t(!0),r(oe,null,pe(ve.value,j=>(t(),u(ae,{key:j.value,label:j.label,value:j.value},{default:l(()=>[$("span",oo,x(j.label),1),$("span",no,x(j.description),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"]),I.match==="null"||I.match==="not:null"?(t(),r("div",so)):(t(),r("div",uo,[["enum"].indexOf(U.allModelFieldByNameObj[I.name].type)>>>-1?["model_ref"].indexOf(U.allModelFieldByNameObj[I.name].type)>>>-1?["boolean"].indexOf(U.allModelFieldByNameObj[I.name].type)>>>-1?(t(),r("div",po,[a(be,{modelValue:I.value,"onUpdate:modelValue":j=>I.value=j,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",co,[a(J,{modelValue:I.value,"onUpdate:modelValue":j=>I.value=j,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",io,[a(X,{modelValue:I.value,"onUpdate:modelValue":j=>I.value=j,placeholder:"请选择",style:{width:"180px"}},{default:l(()=>[(t(!0),r(oe,null,pe(U.modelRefOptions[I.name],j=>(t(),u(ae,{key:j.value,label:j.label,value:j.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):(t(),r("div",ro,[a(X,{modelValue:I.value,"onUpdate:modelValue":j=>I.value=j,placeholder:"请选择",style:{width:"180px"}},{default:l(()=>[(t(!0),r(oe,null,pe(U.enumOptionObj[U.allModelFieldByNameObj[I.name].validation_rule],j=>(t(),u(ae,{key:j.value,label:j.label,value:j.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]))]))]),_:2},1024)]),_:2},1032,["prop"]))),128))]),_:1})]),_:1},8,["model"])])])]),footer:l(()=>[$("div",vo,[a(B,{onClick:y[2]||(y[2]=I=>w(se.value))},{default:l(()=>[...y[8]||(y[8]=[p("重置",-1)])]),_:1}),a(B,{onClick:y[3]||(y[3]=I=>Q()),type:"primary"},{default:l(()=>[...y[9]||(y[9]=[p("搜索",-1)])]),_:1})])]),_:1},8,["modelValue"])}}}),mo=Rl(fo,[["__scopeId","data-v-8bcd5a33"]]),_o={key:0,class:"card table-main",style:{width:"100%",flex:"1"}},go={class:"table-header"},yo={class:"header-button-lf"},bo={class:"header-button-ri"},wo={class:"flexJstart gap-1",style:{overflow:"auto"}},ko={key:0},ho={key:1},Co={class:"text_class"},xo={key:0,class:"text_class"},Vo={key:1},$o={style:{display:"flex","justify-content":"space-between",width:"100%"}},Mo={style:{display:"flex","justify-content":"space-between"}},Oo={key:1,class:"requiredClass"},Do={key:0},Uo={key:0},Io={key:1},Fo={key:0},Po={key:1},No={key:0},So={key:1},qo={key:0},To={key:1},jo={key:0},Ro={key:0},Eo={key:0},Ao={key:1},Lo={key:0},zo={key:1},Yo={key:0},Bo={key:1},Jo={key:0},Ko={key:1},Ho={key:0},Go={key:1},Wo={key:0},Qo={key:1},Xo={style:{flex:"auto"},class:"footerButtonClass"},Zo={key:0},en={key:1},ln={key:0},an={key:1},tn={key:0},on={key:0},nn={key:1},sn={key:2},un={key:3},dn={key:4},rn={key:5},cn={key:6},pn={key:7},vn={key:8},fn={key:9},mn={key:10},_n={class:"dialog-footer"},gn={class:"dialog-footer"},yn=sl({__name:"ciDataShow",props:Ke(["ciModelId","treeData","currentNodeId"],{showTree:{},showTreeModifiers:{}}),emits:Ke(["getTree","show-info"],["update:showTree"]),setup(ee,{expose:fe,emit:Y}){const{proxy:U}=ml(),E=Ma(),M=yt(),q=Da(),Z=Oa(),re=Y,ie=i(""),v=ee,me=nl(ee,"showTree"),te=i([0]),le=i(!1),ne=()=>{le.value=!0},se=i(!0),H=()=>{se.value=!1,he(()=>{se.value=!0})},ve=i(""),Ce=()=>{le.value=!1},P=i(!1),Q=R(()=>E.gmCry),T=R(()=>E.showAllPass),w=R(()=>E.showAllPassTime),g=async()=>{P.value=!0},y=()=>{E.updateShowAllPass(!1),ol({title:"操作成功",message:"密码到期已自动屏蔽",type:"success",duration:2e3})},G=s=>{E.setShowAllPassTime(s.totalMilliseconds)},ue=()=>{P.value=!1,E.updateShowAllPass(!1),E.setShowAllPassTime(0),ol({title:"success",message:"密码已屏蔽",type:"success",duration:2e3})},be=i(!1),Me=()=>{X.value=!1,Je(xe.value[0]),ae.value=""},xe=i(),B=fl({secret:null}),ae=i(""),X=i(!1),J=async(s,e)=>{s[0].validate(async d=>{d&&(B.secret===Q.value.key?(ae.value=ql(Q.value.key,Q.value.mode,e),X.value=!0):(ol({title:"Warning",message:"密钥错误",type:"warning",duration:2e3}),X.value=!1,ae.value=""))})},Ye=i(1),Se=i(10),He=i("default"),I=i(!1),qe=()=>{Oe({model:v.ciModelId,model_instance_group:v.currentNodeId})},j=()=>{Oe({model:v.ciModelId,model_instance_group:v.currentNodeId})},ul=R(()=>Il.value.map(s=>s.name)),dl=R(()=>wl.value.map(s=>s.name)),Ge=i(!1),We=R(()=>_e.value?{all:!0,group:v.currentNodeId,params:il.value}:{group:v.currentNodeId,params:il.value}),Vl=async()=>{let s=new Object;_e.value?s={update_user:Z.state.username,...We.value}:s={update_user:Z.state.username,instances:ce.value},console.log(s),Dl.value=!0;let e=await U.$api.bulkDeleteCiModelInstance(s,60*1e3);console.log(e),e.status=="200"?(S({type:"success",message:"删除成功"}),yl.value.clearSelection(),await Oe({model:v.ciModelId,model_instance_group:v.currentNodeId}),setTimeout(()=>{re("getTree")},2e3)):S({type:"error",message:`删除失败:${JSON.stringify(e.data)}`}),Dl.value=!1},Ze=async s=>{s?await U.$api.exportCiData({model:v.ciModelId,fields:dl.value,instances:ce.value}):await U.$api.exportCiData({model:v.ciModelId,fields:ul.value,instances:ce.value})},El=async()=>{console.log(We.value);let s=await U.$api.exportCiData({all:!0,model:v.ciModelId,group:v.currentNodeId,params:il.value});console.log(s)},h={multiple:!0,value:"id"},_=i(!1),N=i([]),Be=R(()=>v.treeData[0].children[0].id),Qe=R(()=>v.treeData[0].id),$l=async()=>{var b;let s=[];(b=N.value)==null||b.forEach(C=>{s.push(C[C.length-1])});let e=new Object;_e.value?e={all:!0,groups:s,instances:[]}:e={instances:ce.value,groups:s};let d=await U.$api.setCiDataToTree(e);d.status=="201"?(S({type:"success",message:"更新成功"}),Oe({model:v.ciModelId,model_instance_group:v.currentNodeId}),aa(),re("getTree")):S({showClose:!0,message:"更新失败:"+JSON.stringify(d.data),type:"error"}),N.value=[],_.value=!1},rl=i(""),el=i(!1),A=i({}),Xe=(s,e)=>{s?V.updateParams[e]="null":V.updateParams[e]=null},_l=()=>{el.value=!0};i(!1);const Al=s=>{var e;if(s!==void 0&&((e=je.value[s])==null?void 0:e.field_type)==="string")return s==""||s==null?void 0:[{pattern:new RegExp(je.value[s].rule),message:"不符合正则表达式",trigger:"blur"}]};R(()=>{var e,d;let s={};return(d=(e=Te.value)==null?void 0:e.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{var F;C.type==="string"&&C.validation_rule!==""&&C.validation_rule!==null&&(s["updateParams."+C.name]=[{pattern:new RegExp((F=je.value[C.validation_rule])==null?void 0:F.rule),message:"不符合正则表达式",trigger:"blur"}])})}),s});const V=fl({updateParams:{}}),de=i([]),Ml=()=>{const s=Object.keys(V.updateParams).length,e=`__temp_param_${s}`;de.value[s]=e,V.updateParams[e]=""},Ue=(s,e)=>{console.log(e),e==="using_template"?V.updateParams[e]=!0:V.updateParams[e]=void 0,delete V.updateParams[de.value[s]],de.value[s]=e},Ol=(s,e)=>{de.value.splice(s,1),delete A.value[e],delete V.updateParams[e]},Pe=R(()=>{let s=new Object;for(let[e,d]of Object.entries(V.updateParams))d==="null"?s[e]=null:s[e]=d,we.value.password.indexOf(e)!==-1&&(s[e]=Zl(Q.value.key,Q.value.mode,d));return s});i(!1);const Ia=()=>{rl.value.validate(async s=>{if(s){let e=null;console.log("111",JSON.stringify(Pe.value.using_template)),"using_template"in Pe.value&&(e=Pe.value.using_template,delete Pe.value.using_template,console.log("111",JSON.stringify(Pe.value)));let d=new Object;_e.value?d={fields:Pe.value,model:v.ciModelId,...We.value,using_template:Pe.value}:d={instances:ce.value,fields:Pe.value},e!==null&&(d.using_template=e);const b=xa.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});let C=await U.$api.multipleUpdateCiModelInstance(d);C.status=="200"?(S({type:"success",message:"更新成功"}),Oe({model:v.ciModelId,model_instance_group:v.currentNodeId}),V.updateParams={},A.value={},de.value=[],el.value=!1):S({showClose:!0,message:"更新失败:"+JSON.stringify(C.data),type:"error"}),he(()=>b.close())}else S({showClose:!0,message:"请输入正确内容.",type:"error"})})},Fa=R(()=>{var e,d;let s=[{value:"using_template",label:"自动命名",disabled:!1}];return(d=(e=Te.value)==null?void 0:e.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{let F=!1;C.name in V.updateParams&&(F=!0),s.push({value:C.name,label:C.verbose_name,disable:F})})}),s}),la=()=>{el.value=!1,V.updateParams={},A.value={},de.value=[]},Dl=i(!0),gl=s=>{Dl.value=s},Ul=i(!0),W=i(!1),Ll=i(!1),Pa=()=>{Ll.value=!0},Na=async s=>{gl(!0);let e=await U.$api.updateCiModelInstance({update_user:Z.state.username,...s});e.status=="200"?(S({type:"success",message:"更新成功"}),De.value=!1,Je(ll.value),await Oe({model:v.ciModelId,model_instance_group:v.currentNodeId})):S({showClose:!0,message:"更新失败:"+JSON.stringify(e.data),type:"error"})},Sa=s=>!_e.value,yl=i(null),qa=s=>s.id,ce=i([]),Ta=s=>{ce.value=s.map(e=>e.id)},_e=i(!1),ja=s=>{s?ce.value.length===0&&yl.value.toggleAllSelection():(ce.value=[],yl.value.clearSelection()),console.log(ce.value)},aa=()=>{ce.value=[],yl.value.clearSelection()},Il=i([]),Te=i({}),Ra=R(()=>{var e,d;let s={};return(d=(e=Te.value)==null?void 0:e.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{s[C.id]=C})}),s}),ge=R(()=>{var e,d;let s={};return(d=(e=Te.value)==null?void 0:e.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{s[C.name]=C})}),s}),ta=i(""),Ea=()=>{ta.value.getHasConfigField()},oa=()=>{Ul.value=!1,he(()=>{Ul.value=!0})},Aa=s=>s.map(d=>d.id===Be.value).length>>0,je=i({});i({});const La=async(s=null)=>{(await U.$api.getValidationRules({...s,page:1,page_size:1e4})).data.results.forEach(d=>{je.value[d.id]=d})},zl=R(()=>{var e,d;let s={};return(d=(e=Te.value)==null?void 0:e.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{if(C.type==="enum"){if(C.validation_rule===null)return;let F=JSON.parse(je==null?void 0:je.value[C==null?void 0:C.validation_rule].rule),Ee=[];Object.keys(F).forEach(al=>{Ee.push({value:al,label:F[al]})}),s[C.validation_rule]=Ee}})}),s}),na=R(()=>{let s={};return Te.value.field_groups.forEach(e=>{e.fields.forEach(d=>{if(d.type==="enum"){let b=JSON.parse(je.value[d.validation_rule].rule),C={};Object.keys(b).forEach(F=>{C[F]=b[F]}),s[d.name]=C}})}),s}),bl=i({}),za=async(s,e)=>{let d=await U.$api.getModelRefCi({model:e.id,page:1,page_size:5e3}),b=[];d.data.results.forEach(C=>{b.push({value:C.id,label:C.instance_name})}),bl.value[e.name]=b},Ya=R(()=>{let s=new Object;for(let[e,d]of Object.entries(bl.value)){let b=new Object;d==null||d.forEach(C=>{b[C.value]=C}),s[e]=b}return s}),Ba=s=>{if(!(s==""||s==null))return[{pattern:new RegExp(je.value[s].rule),message:"不符合正则表达式",trigger:"blur"}]},Ja=()=>{for(const[s,e]of Object.entries(m))["instance_name","using_template"].indexOf(s)===-1&&delete m[s];Te.value.field_groups.forEach(s=>{s.fields.forEach(e=>{m[e.name]=e.default})}),m.instance_name=null},wl=i([]),Ka=async()=>{var d;let s=await U.$api.getCiModel({},v.ciModelId);Te.value=s.data;let e=[];(d=Te.value.field_groups)==null||d.forEach(b=>{b.fields.forEach(C=>{e.push(C)})}),wl.value=e},we=R(()=>{let s={enum:[],boolean:[],model_ref:[],password:[]};return wl.value.forEach(e=>{e.type==="enum"?s.enum.push(e.name):e.type==="boolean"?s.boolean.push(e.name):e.type==="model_ref"?s.model_ref.push(e.name):e.type==="password"&&s.password.push(e.name)}),s});jl(()=>we.value.model_ref,s=>{we.value.model_ref.forEach(e=>{za(!0,{id:ge.value[e].ref_model,name:e})})},{deep:!0});const sa=i([]),Yl=i(0),il=i({}),ua=s=>{il.value=s},da=R(()=>{let s=new Array;for(let[e,d]of Object.entries(il.value))console.log(),e==="instance_name"?s.push({name:"唯一标识:"+d,field:e}):we.value.model_ref.indexOf(e)!==-1?s.push({name:ge.value[e].verbose_name+":"+Ya.value[e][d].label,field:e}):we.value.enum.indexOf(e)!==-1?(console.log(na.value),s.push({name:ge.value[e].verbose_name+":"+na.value[e][d],field:e})):s.push({name:ge.value[e].verbose_name+":"+d,field:e});return s}),Ha=async(s,e)=>{await ve.value.removeFilterParam(s,e),he(()=>{Oe({model:v.ciModelId,model_instance_group:v.currentNodeId})})},Oe=async s=>{var b;gl(!0);let e=new Array,d=await U.$api.getCiModelInstance({...s,page:Ye.value,page_size:Se.value,...il.value});Yl.value=d.data.count,(b=d.data.results)==null||b.forEach(C=>{e.push({id:C.id,instance_group:C.instance_group,instance_name:C.instance_name,...C.fields})}),sa.value=e,he(()=>{_e.value=!1,gl(!1)})};Ua(async()=>{Ul.value=!0,await La(),gl(!1)});const De=i(!1),Ga=()=>{console.log("addCiData",JSON.stringify(m)),W.value=!0,De.value=!0,Re.value=!0},Ie=i({}),Bl=i({}),ra=s=>{M.push({path:q.path+"/"+s.id})},ia=i(!1),Wa=s=>{De.value=!0,ia.value=!0,Re.value=!0,W.value=!0,Ie.value=s,he(()=>{Object.keys(s).forEach(e=>{e==="id"||e==="instance_group"||(we.value.model_ref.indexOf(e)!==-1?s[e]!==null?m[e]=s[e].id:m[e]=s[e]:we.value.enum.indexOf(e)!==-1?m[e]=s[e].value:we.value.password.indexOf(e)!==-1?T.value?m[e]=ql(Q.value.key,Q.value.mode,s[e]):m[e]=null:m[e]=s[e])})}),ol({title:"Warning",message:"复制实例，请修改后再提交",type:"warning",duration:2e3})},Qa=s=>!(Re.value||ia.value||s),ll=i(),m=fl({instance_name:null,using_template:!0}),ca=R(()=>{let s=Object.assign({},m);delete s.instance_name,delete s.using_template;for(let[e,d]of Object.entries(s))d===null||d===""||we.value.password.indexOf(e)!==-1&&(s[e]=Zl(Q.value.key,Q.value.mode,d));return s}),pa=R(()=>{let s=Object.assign({},cl.value);delete s.instance_name;for(let[e,d]of Object.entries(cl.value))d===null||d===""||we.value.password.indexOf(e)!==-1&&(s[e]=Zl(Q.value.key,Q.value.mode,d));return s}),Re=i(!0),cl=i({}),va=async(s,e=null)=>{s&&await s.validate(async(d,b)=>{if(d){const C=xa.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});if(Re.value){console.log(ca.value);let F=await U.$api.addCiModelInstance({model:v.ciModelId,create_user:Z.state.username,update_user:Z.state.username,fields:ca.value,instance_name:m.instance_name,using_template:m.using_template,instance_group:[v.currentNodeId]});setTimeout(()=>{C.close()},200),F.status=="201"?(S({type:"success",message:"添加成功"}),De.value=!1,Je(s),await Oe({model:v.ciModelId,model_instance_group:v.currentNodeId}),re("getTree")):S({showClose:!0,message:"添加失败:"+JSON.stringify(F.data),type:"error"})}else{if(console.log(JSON.stringify(Bl.value)),console.log(JSON.stringify(m)),JSON.stringify(Bl.value)===JSON.stringify(m)){W.value=!1,De.value=!1,Je(s),S({showClose:!0,message:"无更新,关闭窗口",type:"info"}),setTimeout(()=>{C.close()},200);return}else{const al=Object.entries(Bl.value),Kl=Object.entries(m),Hl=al.concat(Kl).map(Ae=>JSON.stringify(Ae)),K=Array.from(new Set(Hl)).map(Ae=>JSON.parse(Ae));K.splice(0,al.length);const Pl=Object.fromEntries(K);let tl={};if(Object.keys(Pl).forEach(Ae=>{tl[Ae]=Pl[Ae]}),cl.value=tl,Object.keys(cl.value).length===0){W.value=!1,De.value=!1,Je(s),S({showClose:!0,message:"无更新,关闭窗口",type:"info"});return}}let F={id:Ie.value.id,model:v.ciModelId,update_user:Z.state.username};Object.keys(cl.value).indexOf("instance_name")===-1||(F.instance_name=cl.value.instance_name),F.fields=pa.value,console.log(we.value),console.log(F),console.log();let Ee=await U.$api.updateCiModelInstance(F);Ee.status=="200"?(S({type:"success",message:"更新成功"}),De.value=!1,W.value=!1,Je(s),await Oe({model:v.ciModelId,model_instance_group:v.currentNodeId})):S({showClose:!0,message:"更新失败:"+JSON.stringify(Ee.data),type:"error"}),setTimeout(()=>{C.close()},200)}}else console.log("error submit!",b),ol({title:"表单校验",message:"表单填写异常",type:"error"})})},Xa=s=>{if(W.value==!1&&Re.value==!1){De.value=!1;return}ea.confirm("是否确认关闭?").then(()=>{s(),Je(ll.value),De.value=!1,W.value=!1}).catch(()=>{})},Za=s=>{Je(s),De.value=!1,W.value=!1},fa=(s=null)=>{ea.confirm("是否确认删除?","实例删除",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning",draggable:!0}).then(async()=>{(await U.$api.deleteCiModelInstance(Ie.value.id)).status==204?(S({type:"success",message:"删除成功"}),await Oe({model:v.ciModelId,model_instance_group:v.currentNodeId}),Je(ll.value),De.value=!1,W.value=!1,re("getTree")):S({type:"error",message:"删除失败"})}).catch(()=>{S({type:"info",message:"取消删除"})})},Je=s=>{s&&(s.resetFields(),Ie.value={})},Fl=i("modelField"),et=(s,e)=>{console.log(Fl.value),s.props.name=="changelog"&&ie.value.getData()};fe({getHasConfigField:Ea,getCiData:Oe,initCiDataForm:Ja,getModelField:Ka,setLoading:gl,closeFilter:Ce,clearMultipleSelect:aa,updateFilterParam:ua,reloadCiDataFilter:H});const Jl=i(!1),ma=i(""),lt=s=>{Jl.value=!0,ma.value=s},at=({row:s,column:e,rowIndex:d,columnIndex:b})=>{if(d===0&&b===0&&_e.value)return"selectAllBtnDis"};return(s,e)=>{var ba,wa,ka;const d=c("el-button"),b=c("el-tooltip"),C=c("arrow-down"),F=c("el-icon"),Ee=c("el-dropdown-item"),al=c("el-dropdown-menu"),Kl=c("el-dropdown"),Hl=c("vue-countdown"),K=c("el-text"),Pl=c("el-tag"),tl=c("el-table-column"),Ae=c("el-link"),tt=c("TopRight"),Ne=c("el-switch"),ot=c("el-table"),nt=c("el-checkbox"),st=c("el-pagination"),_a=c("el-descriptions-item"),ut=c("el-descriptions"),Ve=c("el-space"),Le=c("el-input"),ye=c("el-form-item"),kl=c("el-col"),Gl=c("el-row"),dt=c("InfoFilled"),Wl=c("el-input-number"),Ql=c("el-form"),rt=c("el-popover"),Nl=c("el-date-picker"),hl=c("el-option"),Cl=c("el-select"),it=c("el-collapse-item"),ct=c("el-collapse"),Sl=c("el-tab-pane"),pt=c("el-tabs"),vt=c("el-drawer"),ga=c("el-dialog"),ft=c("el-cascader"),ke=vl("permission"),mt=vl("loading"),_t=vl("copy"),ya=vl("throttle");return t(),r(oe,null,[Ul.value?(t(),r("div",_o,[$("div",go,[$("div",yo,[me.value?(t(),u(b,{key:0,class:"box-item",effect:"dark",content:"隐藏实例树",placement:"top"},{default:l(()=>[a(d,{icon:k(bt),onClick:e[0]||(e[0]=n=>me.value=!1),size:"default"},null,8,["icon"])]),_:1})):(t(),u(b,{key:1,class:"box-item",effect:"dark",content:"显示实例树",placement:"top"},{default:l(()=>[a(d,{icon:k(wt),onClick:e[1]||(e[1]=n=>me.value=!0),size:"default"},null,8,["icon"])]),_:1})),z((t(),u(d,{type:"primary",onClick:Ga},{default:l(()=>[...e[35]||(e[35]=[p("添加",-1)])]),_:1})),[[ke,`${(ba=k(q).name)==null?void 0:ba.replace("_info","")}:add`]]),(ce.value.length>>>0||_e.value)&&Qe.value!==ee.currentNodeId?z((t(),u(d,{key:3,disabled:!((ce.value.length>>>0||_e.value)&&Qe.value!==ee.currentNodeId),content:"勾选实例且非<所有>分组才支持转移~",onClick:e[3]||(e[3]=n=>_.value=!0)},{default:l(()=>[...e[37]||(e[37]=[p("转移",-1)])]),_:1},8,["disabled"])),[[ke,`${(wa=k(q).name)==null?void 0:wa.replace("_info","")}:edit`]]):(t(),u(b,{key:2,class:"box-item",effect:"dark",content:"勾选实例且非<所有>分组才支持转移~",placement:"top"},{default:l(()=>{var n;return[z((t(),u(d,{disabled:!((ce.value.length>>>0||_e.value)&&Qe.value!==ee.currentNodeId),onClick:e[2]||(e[2]=L=>_.value=!0)},{default:l(()=>[...e[36]||(e[36]=[p("转移",-1)])]),_:1},8,["disabled"])),[[ke,`${(n=k(q).name)==null?void 0:n.replace("_info","")}:edit`]])]}),_:1})),z((t(),u(d,{disabled:!(ce.value.length>>>0||_e.value),onClick:_l},{default:l(()=>[...e[38]||(e[38]=[p("批量更新",-1)])]),_:1},8,["disabled"])),[[ke,`${(ka=k(q).name)==null?void 0:ka.replace("_info","")}:edit`]]),a(Kl,{style:{"margin-left":"12px"}},{dropdown:l(()=>[a(al,null,{default:l(()=>{var n,L;return[z((t(),r("div",null,[a(Ee,{disabled:!(ce.value.length>>>0||_e.value),onClick:e[4]||(e[4]=o=>Vl()),divided:""},{default:l(()=>[...e[40]||(e[40]=[p("批量删除",-1)])]),_:1},8,["disabled"])])),[[ke,`${(n=k(q).name)==null?void 0:n.replace("_info","")}:delete`]]),z((t(),r("div",null,[a(Ee,{disabled:!(ce.value.length>>>0),onClick:e[5]||(e[5]=o=>Ze(!1))},{default:l(()=>[...e[41]||(e[41]=[p("导出勾选(显示字段)",-1)])]),_:1},8,["disabled"]),a(Ee,{disabled:!(ce.value.length>>>0),onClick:e[6]||(e[6]=o=>Ze(!0))},{default:l(()=>[...e[42]||(e[42]=[p("导出勾选(所有字段)",-1)])]),_:1},8,["disabled"]),a(Ee,{onClick:e[7]||(e[7]=o=>El())},{default:l(()=>[...e[43]||(e[43]=[p("导出所有",-1)])]),_:1})])),[[ke,`${(L=k(q).name)==null?void 0:L.replace("_info","")}:export`]])]}),_:1})]),default:l(()=>[a(d,{type:"primary"},{default:l(()=>[e[39]||(e[39]=p(" 更多操作",-1)),a(F,{class:"el-icon--right"},{default:l(()=>[a(C)]),_:1})]),_:1})]),_:1})]),$("div",bo,[a(b,{class:"box-item",effect:"dark",content:"刷新表格",placement:"top"},{default:l(()=>[a(d,{icon:k(kt),circle:"",onClick:oa},null,8,["icon"])]),_:1}),T.value?O("",!0):(t(),u(b,{key:0,class:"box-item",effect:"dark",content:"显示密码",placement:"top"},{default:l(()=>{var n;return[z(a(d,{icon:k(Xl),circle:"",onClick:g},null,8,["icon"]),[[ke,`${(n=k(q).name)==null?void 0:n.replace("_info","")}:showPassword`]])]}),_:1})),T.value?(t(),u(b,{key:1,class:"box-item",effect:"dark",content:"隐藏密码",placement:"top"},{content:l(()=>[...e[44]||(e[44]=[$("span",null,[p("倒计时结束后自动隐藏密码"),$("br"),p("手动点击可立马隐藏")],-1)])]),default:l(()=>[a(d,{circle:"",onClick:ue},{default:l(()=>[a(Hl,{time:w.value,onEnd:y,onProgress:G},{default:l(({totalSeconds:n})=>[p(x(n),1)]),_:1},8,["time"])]),_:1})]),_:1})):O("",!0),a(b,{class:"box-item",effect:"dark",content:"配置表格显示列",placement:"top"},{default:l(()=>[a(d,{icon:k(ht),circle:"",onClick:Pa},null,8,["icon"])]),_:1}),a(b,{class:"box-item",effect:"dark",content:"实例导入",placement:"top"},{default:l(()=>{var n;return[z(a(d,{icon:k(Ct),circle:"",onClick:e[8]||(e[8]=L=>Ge.value=!0)},null,8,["icon"]),[[ke,`${(n=k(q).name)==null?void 0:n.replace("_info","")}:import`]])]}),_:1}),a(b,{class:"box-item",effect:"dark",content:"打开过滤器",placement:"top"},{default:l(()=>[a(d,{icon:k(xt),circle:"",onClick:ne},null,8,["icon"])]),_:1})])]),z($("div",wo,[a(K,{tag:"b"},{default:l(()=>[...e[45]||(e[45]=[p("过滤器",-1)])]),_:1}),(t(!0),r(oe,null,pe(da.value,(n,L)=>(t(),u(Pl,{key:n.name,closable:"",type:"primary",onClose:o=>Ha(n.field,L)},{default:l(()=>[$("span",null,x(n.name),1)]),_:2},1032,["onClose"]))),128))],512),[[Tl,da.value.length>>>0]]),z((t(),u(ot,{ref_key:"ciDataTableRef",ref:yl,data:sa.value,onSelectionChange:Ta,"table-layout":"fixed","highlight-current-row":"",style:{flex:"1"},border:"","row-key":qa},{default:l(()=>[a(tl,{"header-cell-class-name":at,type:"selection",selectable:Sa,width:"40",disable:_e.value,"reserve-selection":!0},null,8,["disable"]),a(tl,{prop:"instance_name",label:"名称",fixed:"left",width:"180"},{default:l(n=>[a(b,{content:"查看详情",placement:"right",effect:"dark"},{default:l(()=>[a(Ae,{type:"primary",onClick:L=>ra(n.row)},{default:l(()=>[p(x(n.row.instance_name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1}),(t(!0),r(oe,null,pe(Il.value,(n,L)=>(t(),u(tl,{property:n.name,label:n.verbose_name,"show-overflow-tooltip":"",sortable:"","min-width":"120","max-width":"220"},Vt({_:2},[n.name==="mgmt_ip"?{name:"default",fn:l(o=>[o.row[n.name]!==null?(t(),r("div",ko,[a(b,{content:"跳转管理口",placement:"right",effect:"dark"},{default:l(()=>[a(Ae,{href:`https://${o.row[n.name]}`,type:"primary",target:"_blank"},{default:l(()=>[p(x(o.row[n.name]),1),a(F,null,{default:l(()=>[a(tt)]),_:1})]),_:2},1032,["href"])]),_:2},1024)])):(t(),r("div",ho))]),key:"0"}:void 0,we.value.boolean.indexOf(n.name)!=-1?{name:"default",fn:l(o=>{var f;return[z(a(Ne,{modelValue:o.row[n.name],"onUpdate:modelValue":D=>o.row[n.name]=D,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:D=>Na({id:o.row.id,fields:{[n.name]:o.row[n.name]}})},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[ke,{id:`${(f=k(q).name)==null?void 0:f.replace("_info","")}:edit`,action:"disabled"}]])]}),key:"1"}:void 0,we.value.enum.indexOf(n.name)!=-1?{name:"default",fn:l(o=>{var f;return[$("div",Co,x((f=o.row[n.name])==null?void 0:f.label),1)]}),key:"2"}:void 0,we.value.password.indexOf(n.name)!=-1?{name:"default",fn:l(o=>{var f;return[T.value?(t(),r("div",xo,x(k(ql)(Q.value.key,Q.value.mode,o.row[n.name])),1)):(t(),r("div",Vo,[((f=o.row[n.name])==null?void 0:f.length)>>0?(t(),u(K,{key:0},{default:l(()=>{var D;return[p(x("*".repeat((D=o.row[n.name])==null?void 0:D.length)),1)]}),_:2},1024)):(t(),u(K,{key:1}))]))]}),key:"3"}:void 0,we.value.model_ref.indexOf(n.name)!=-1?{name:"default",fn:l(o=>{var f,D;return[$("div",{class:Fe({text_class:((f=o.row[n.name])==null?void 0:f.instance_name)>>0})},x((D=o.row[n.name])==null?void 0:D.instance_name),3)]}),key:"4"}:void 0]),1032,["property","label"]))),256)),a(tl,{fixed:"right",width:"150",label:"操作"},{default:l(n=>[a(b,{class:"box-item",effect:"dark",content:"查看详情",placement:"top"},{default:l(()=>[a(d,{link:"",type:"primary",icon:k(Xl),onClick:L=>ra(n.row)},null,8,["icon","onClick"])]),_:2},1024),a(b,{class:"box-item",effect:"dark",content:"克隆",placement:"top"},{default:l(()=>{var L;return[z(a(d,{link:"",type:"primary",icon:k(Ca),onClick:o=>Wa(n.row)},null,8,["icon","onClick"]),[[ke,`${(L=k(q).name)==null?void 0:L.replace("_info","")}:edit`]])]}),_:2},1024),a(b,{class:"box-item",effect:"dark",content:"点击查看二维码",placement:"top"},{default:l(()=>{var L;return[z(a(d,{link:"",type:"primary",icon:k($t),onClick:o=>lt(n.row)},null,8,["icon","onClick"]),[[ke,`${(L=k(q).name)==null?void 0:L.replace("_info","")}:view`]])]}),_:2},1024)]),_:1})]),_:1},8,["data"])),[[mt,Dl.value]]),a(st,{"current-page":Ye.value,"onUpdate:currentPage":e[10]||(e[10]=n=>Ye.value=n),"page-size":Se.value,"onUpdate:pageSize":e[11]||(e[11]=n=>Se.value=n),"page-sizes":[10,20,50,100,200],size:He.value,disabled:I.value,layout:"slot,total, sizes, prev, pager, next, jumper",total:Yl.value,onSizeChange:qe,onCurrentChange:j,style:{"margin-top":"5px","justify-content":"flex-end"}},{default:l(()=>[$("div",$o,[$("div",Mo,[a(nt,{modelValue:_e.value,"onUpdate:modelValue":e[9]||(e[9]=n=>_e.value=n),label:"全选",size:"default",onChange:ja},null,8,["modelValue"])]),a(K,null,{default:l(()=>[p("已选择 "+x(_e.value?Yl.value:ce.value.length)+" 条",1)]),_:1})])]),_:1},8,["current-page","page-size","size","disabled","total"])])):O("",!0),a(vt,{modelValue:De.value,"onUpdate:modelValue":e[23]||(e[23]=n=>De.value=n),class:"edit-drawer",direction:"rtl",size:"45%","before-close":Xa},{header:l(()=>[Re.value?(t(),u(K,{key:1,tag:"b"},{default:l(()=>[...e[46]||(e[46]=[p("实例信息 ",-1)])]),_:1})):(t(),u(ut,{key:0,title:"实例信息"},{default:l(()=>[a(_a,{label:"唯一标识"},{default:l(()=>{var n;return[p(x((n=Ie.value)==null?void 0:n.instance_name),1)]}),_:1}),a(_a,{label:"所属分组"},{default:l(()=>{var n;return[(t(!0),r(oe,null,pe((n=Ie.value)==null?void 0:n.instance_group,(L,o)=>(t(),u(K,{key:o},{default:l(()=>[p(x(L.group_path),1)]),_:2},1024))),128))]}),_:1})]),_:1}))]),default:l(()=>[a(pt,{modelValue:Fl.value,"onUpdate:modelValue":e[18]||(e[18]=n=>Fl.value=n),type:"card",class:"demo-tabs",onTabClick:et},{default:l(()=>[a(Sl,{label:"资产信息",name:"modelField"},{default:l(()=>[a(Ql,{ref_key:"ciDataFormRef",ref:ll,style:{"max-width":"100%"},model:m,"label-width":"auto","status-icon":"","label-position":"top",disabled:!1,"require-asterisk-position":"right"},{default:l(()=>[a(Gl,null,{default:l(()=>[a(kl,{span:12},{default:l(()=>[W.value?(t(),u(ye,{key:0,prop:"instance_name",required:"",style:{"margin-left":"30px"}},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[...e[47]||(e[47]=[p("唯一标识",-1)])]),_:1}),a(b,{content:"唯一命名标识",placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1})]),_:1})]),default:l(()=>[W.value?(t(),u(Le,{key:0,modelValue:m.instance_name,"onUpdate:modelValue":e[12]||(e[12]=n=>m.instance_name=n),style:{width:"240px"}},null,8,["modelValue"])):(t(),r("span",Oo,x(m.instance_name),1))]),_:1})):O("",!0)]),_:1}),a(kl,{span:12},{default:l(()=>[a(ye,{prop:"using_template",required:"",style:{"margin-left":"30px"}},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[...e[48]||(e[48]=[p("自动命名",-1)])]),_:1}),a(b,{content:"是否根据模型的唯一命名规则，自动生成唯一标识",placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1})]),_:1})]),default:l(()=>[a(Ne,{modelValue:m.using_template,"onUpdate:modelValue":e[13]||(e[13]=n=>m.using_template=n),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(ct,{modelValue:te.value,"onUpdate:modelValue":e[17]||(e[17]=n=>te.value=n)},{default:l(()=>[(t(!0),r(oe,null,pe(Te.value.field_groups,(n,L)=>(t(),u(it,{name:L,key:L},{title:l(()=>[a(K,{tag:"b",size:"large"},{default:l(()=>[p(x(n.verbose_name),1)]),_:2},1024)]),default:l(()=>[a(Gl,{style:{"margin-left":"30px"}},{default:l(()=>[(t(!0),r(oe,null,pe(n.fields,(o,f)=>(t(),u(kl,{span:12},{default:l(()=>[o.type==="string"?(t(),u(ye,{key:0,label:o.verbose_name,prop:o.name,required:o.required,rules:Ba(o.validation_rule)},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Le,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,style:{width:"240px"},disabled:Qa(o.editable)},null,8,["modelValue","onUpdate:modelValue","disabled"])):(t(),r("div",Do,[m[o.name]!=null?(t(),r("div",Uo,[o.name==="mgmt_ip"?(t(),u(Ae,{key:0,href:`https://${m[o.name]}`,type:"primary",target:"_blank"},{default:l(()=>[p(x(m[o.name]),1)]),_:2},1032,["href"])):(t(),r("span",{key:1,class:Fe(["text_class",{requiredClass:o.required}]),style:{width:"100%"}},x(m[o.name]),3))])):(t(),r("span",Io,"--"))]))]),_:2},1032,["label","prop","required","rules"])):O("",!0),o.type==="json"?(t(),u(ye,{key:1,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),a(b,{placement:"right",effect:"dark"},{content:l(()=>[...e[49]||(e[49]=[p(" json类型字段",-1),$("br",null,null,-1),p("请输入json格式数据! ",-1)])]),default:l(()=>[a(F,null,{default:l(()=>[a(dt)]),_:1})]),_:1}),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Le,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,style:{width:"240px"},autosize:"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Fo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},x(m[o.name]),3)):(t(),r("span",Po,"--"))]))]),_:2},1032,["label","prop","required"])):O("",!0),["text"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:2,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Le,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,style:{width:"240px"},autosize:"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",No,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}]),style:{width:"100%"}},x(m[o.name]),3)):(t(),r("span",So,"--"))]))]),_:2},1032,["label","prop","required"])),o.type==="boolean"?(t(),u(ye,{key:3,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[a(Ne,{modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},disabled:!W.value},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","prop","required"])):O("",!0),["float"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:4,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[o.unit!==null?(t(),u(K,{key:0,tag:"b"},{default:l(()=>[p(x(o.verbose_name+"("+o.unit+")"),1)]),_:2},1024)):(t(),u(K,{key:1,tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024)),o.description.length!=0?(t(),u(b,{key:2,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Wl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,precision:2,step:1},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",qo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},x(m[o.name]),3)):(t(),r("span",To,"--"))]))]),_:2},1032,["label","prop","required"])),["password"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:5,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>{var D,ze,ha;return[W.value?(t(),u(Le,{key:1,modelValue:m[o.name],"onUpdate:modelValue":pl=>m[o.name]=pl,style:{width:"240px"},type:"password","auto-complete":"new-password","show-password":"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",jo,[((D=m[o.name])==null?void 0:D.length)>>0?(t(),r("div",Ro,[T.value?(t(),r("span",Eo,x(k(ql)(Q.value.key,Q.value.mode,m[o.name])),1)):(t(),r("span",{key:1,class:Fe([{requiredClass:o.required},"hide-text"]),onMouseenter:e[15]||(e[15]=pl=>be.value=!0),onMouseleave:e[16]||(e[16]=pl=>be.value=!1)},[p(x("*".repeat((ze=m[o.name])==null?void 0:ze.length))+" ",1),z((t(),u(rt,{width:380,trigger:"click",onAfterLeave:Me},{reference:l(()=>[a(F,null,{default:l(()=>[z(a(k(Xl),null,null,512),[[Tl,be.value&&!T.value]])]),_:1})]),default:l(()=>[a(Ql,{ref_for:!0,ref_key:"passFormRef",ref:xe,inline:!0,model:B,"require-asterisk-position":"right"},{default:l(()=>[a(Gl,{align:"middle"},{default:l(()=>[a(kl,{span:20},{default:l(()=>[a(ye,{label:"密钥",prop:"secret",rules:[{required:!0,message:"输入密钥",trigger:"blur"}]},{default:l(()=>[a(Le,{type:"password",modelValue:B.secret,"onUpdate:modelValue":e[14]||(e[14]=pl=>B.secret=pl),"show-password":"","auto-complete":"new-password",placeholder:"输入密钥查看密码",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(kl,{span:2},{default:l(()=>[a(ye,null,{default:l(()=>[a(d,{type:"primary",size:"small",onClick:pl=>J(xe.value,m[o.name])},{default:l(()=>[...e[50]||(e[50]=[p("查看",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["model"]),X.value?(t(),u(K,{key:0,tag:"b"},{default:l(()=>[p("密码: "+x(ae.value)+" ",1),a(b,{class:"box-item",effect:"dark",content:"点击复制密码",placement:"top"},{default:l(()=>[a(F,null,{default:l(()=>[z(a(k(Ca),null,null,512),[[_t,ae.value]])]),_:1})]),_:1})]),_:1})):O("",!0)]),_:2},1024)),[[ke,`${(ha=k(q).name)==null?void 0:ha.replace("_info","")}:showPassword`]])],34))])):(t(),r("span",Ao,"--"))]))]}),_:2},1032,["label","prop","required"])),["integer"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:6,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[o.unit!==null?(t(),u(K,{key:0,tag:"b"},{default:l(()=>[p(x(o.verbose_name+"("+o.unit+")"),1)]),_:2},1024)):(t(),u(K,{key:1,tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024)),o.description.length!=0?(t(),u(b,{key:2,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Wl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,step:1},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Lo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},x(m[o.name]),3)):(t(),r("span",zo,"--"))]))]),_:2},1032,["label","prop","required"])),["date"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:7,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Nl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,type:"date",placeholder:"Pick a Date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Yo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},x(m[o.name]),3)):(t(),r("span",Bo,"--"))]))]),_:2},1032,["label","prop","required"])),["datetime"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:8,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Nl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,type:"datetime",placeholder:"Pick a Date",format:"YYYY/MM/DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Jo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},x(m[o.name]),3)):(t(),r("span",Ko,"--"))]))]),_:2},1032,["label","prop","required"])),["enum"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:9,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>{var D;return[W.value?(t(),u(Cl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":ze=>m[o.name]=ze,placeholder:"请选择",filterable:"",clearable:"",style:{width:"240px"}},{default:l(()=>[(t(!0),r(oe,null,pe(zl.value[o.validation_rule],ze=>(t(),u(hl,{key:ze.value,label:ze.label,value:ze.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(t(),r("div",Ho,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},x((D=Ie.value[o.name])==null?void 0:D.label),3)):(t(),r("span",Go,"--"))]))]}),_:2},1032,["label","prop","required"])),["model_ref"].indexOf(o.type)>>>-1?O("",!0):(t(),u(ye,{key:10,label:o.verbose_name,prop:o.name,required:o.required},{label:l(()=>[a(Ve,{size:2},{default:l(()=>[a(K,{tag:"b"},{default:l(()=>[p(x(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(b,{key:0,content:o.description,placement:"right",effect:"dark"},{default:l(()=>[a(F,null,{default:l(()=>[a(k($e))]),_:1})]),_:1},8,["content"])):O("",!0)]),_:2},1024)]),default:l(()=>[W.value?(t(),u(Cl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":D=>m[o.name]=D,clearable:"",placeholder:"请选择",style:{width:"240px"},filterable:"",remote:"","remote-method":s.getRemoteOptions,loading:s.remoteLoading},{default:l(()=>[(t(!0),r(oe,null,pe(bl.value[o.name],(D,ze)=>(t(),u(hl,{key:ze,label:D.label,value:D.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","remote-method","loading"])):(t(),r("div",Wo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},x(Ie.value[o.name].instance_name),3)):(t(),r("span",Qo,"--"))]))]),_:2},1032,["label","prop","required"]))]),_:2},1024))),256))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1}),Re.value?O("",!0):(t(),u(Sl,{key:0,label:"监控信息",name:"monitor",disabled:""},{default:l(()=>[...e[51]||(e[51]=[p("111",-1)])]),_:1})),Re.value?O("",!0):(t(),u(Sl,{key:1,label:"关联关系",name:"relations",disabled:""},{default:l(()=>[...e[52]||(e[52]=[p("222",-1)])]),_:1})),Re.value?O("",!0):(t(),u(Sl,{key:2,label:"变更记录",name:"changelog"},{default:l(()=>[Ie.value&&Ie.value.id?(t(),u(Pt,{key:0,ref_key:"ciDataAuditRef",ref:ie,instanceId:Ie.value.id},null,8,["instanceId"])):O("",!0)]),_:1}))]),_:1},8,["modelValue"])]),footer:l(()=>{var n,L,o,f;return[z($("div",Xo,[a(d,{onClick:e[19]||(e[19]=D=>Za(ll.value))},{default:l(()=>[...e[53]||(e[53]=[p("取消",-1)])]),_:1}),Re.value?(t(),r("div",Zo,[a(d,{type:"primary",onClick:e[20]||(e[20]=D=>va(ll.value))},{default:l(()=>[...e[54]||(e[54]=[p("添加",-1)])]),_:1})])):(t(),r("div",en,[W.value?(t(),r("div",ln,[Aa((n=Ie.value)==null?void 0:n.instance_group)?z((t(),u(d,{key:0,type:"danger",onClick:fa},{default:l(()=>[...e[55]||(e[55]=[p("删除",-1)])]),_:1})),[[ke,`${(L=k(q).name)==null?void 0:L.replace("_info","")}:delete`]]):z((t(),u(b,{key:1,content:"无法删除非空闲池的主机",placement:"top",effect:"dark"},{default:l(()=>[a(d,{type:"danger",onClick:fa,disabled:""},{default:l(()=>[...e[56]||(e[56]=[p("删除",-1)])]),_:1})]),_:1})),[[ke,`${(o=k(q).name)==null?void 0:o.replace("_info","")}:delete`]]),z((t(),u(d,{type:"primary",onClick:e[21]||(e[21]=D=>va(ll.value))},{default:l(()=>[...e[57]||(e[57]=[p("保存",-1)])]),_:1})),[[ya]])])):(t(),r("div",an,[z((t(),u(d,{type:"primary",onClick:e[22]||(e[22]=D=>W.value=!0)},{default:l(()=>[...e[58]||(e[58]=[p("编辑",-1)])]),_:1})),[[ke,`${(f=k(q).name)==null?void 0:f.replace("_info","")}:edit`]])]))]))],512),[[Tl,Fl.value==="modelField"]])]}),_:1},8,["modelValue"]),a(ga,{modelValue:el.value,"onUpdate:modelValue":e[25]||(e[25]=n=>el.value=n),title:"批量更新",width:"500","before-close":la},{footer:l(()=>[$("div",_n,[a(d,{onClick:la},{default:l(()=>[...e[59]||(e[59]=[p("取消",-1)])]),_:1}),a(d,{onClick:e[24]||(e[24]=xl(n=>Ml(),["prevent"]))},{default:l(()=>[...e[60]||(e[60]=[p("新增字段",-1)])]),_:1}),z((t(),u(d,{type:"primary",onClick:Ia,disabled:!(de.value.length>0)},{default:l(()=>[...e[61]||(e[61]=[p("保存",-1)])]),_:1},8,["disabled"])),[[ya]])])]),default:l(()=>[a(Ql,{ref_key:"multipleFormRef",ref:rl,style:{"max-width":"1000px"},model:V,"label-width":"auto"},{default:l(()=>[(t(!0),r(oe,null,pe(de.value,(n,L)=>{var o;return t(),u(ye,{key:`param-${n}`,label:"字段"+(L+1),prop:`updateParams.${n}`,rules:Al((o=ge.value[n])==null?void 0:o.validation_rule),required:!0},{default:l(()=>[a(Ve,null,{default:l(()=>[a(Cl,{"model-value":n.startsWith("__temp")?void 0:n,placeholder:"选择字段",style:{width:"120px"},filterable:"",onChange:f=>Ue(L,f)},{default:l(()=>[(t(!0),r(oe,null,pe(Fa.value,f=>(t(),u(hl,{key:f.value,label:f.label,value:f.value,disabled:f.disable},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","onChange"]),n&&!n.startsWith("__temp")?(t(),r("div",tn,[n==="using_template"?(t(),r("div",on,[a(Ne,{modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):["text","json"].indexOf(ge.value[n].type)>>>-1?["string"].indexOf(ge.value[n].type)>>>-1?["enum"].indexOf(ge.value[n].type)>>>-1?["model_ref"].indexOf(ge.value[n].type)>>>-1?["boolean"].indexOf(ge.value[n].type)>>>-1?["integer"].indexOf(ge.value[n].type)>>>-1?["float"].indexOf(ge.value[n].type)>>>-1?["date"].indexOf(ge.value[n].type)>>>-1?["datetime"].indexOf(ge.value[n].type)>>>-1?(t(),r("div",mn,[a(Le,{modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",fn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Nl,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,type:"datetime",placeholder:"Pick a Date",format:"YYYY/MM/DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",vn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Nl,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,type:"date",placeholder:"Pick a Date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",pn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Wl,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,precision:2,step:.1,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",cn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Le,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,step:1,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",rn,[a(Ne,{modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",dn,[a(Cl,{modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,placeholder:"请选择",style:{width:"240px"},filterable:"",clearable:""},{default:l(()=>[(t(!0),r(oe,null,pe(bl.value[n],(f,D)=>(t(),u(hl,{key:D,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):(t(),r("div",un,[a(Cl,{modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,placeholder:"请选择",style:{width:"180px"},clearable:"",filterable:""},{default:l(()=>{var f;return[(t(!0),r(oe,null,pe(zl.value[(f=ge.value[n])==null?void 0:f.validation_rule],D=>(t(),u(hl,{key:D.value,label:D.label,value:D.value},null,8,["label","value"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])])):(t(),r("div",sn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Le,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",nn,[a(Ne,{modelValue:A.value[n],"onUpdate:modelValue":f=>A.value[n]=f,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:f=>Xe(A.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),A.value[n]?O("",!0):(t(),u(Le,{key:0,modelValue:V.updateParams[n],"onUpdate:modelValue":f=>V.updateParams[n]=f,type:"textarea",autosize:"",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))]))])):O("",!0),a(d,{class:"mt-2",icon:k(Mt),circle:"",onClick:xl(f=>Ol(L,n),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1032,["label","prop","rules"])}),128))]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(ga,{modelValue:_.value,"onUpdate:modelValue":e[28]||(e[28]=n=>_.value=n),title:"实例组编辑",width:"500"},{footer:l(()=>[$("div",gn,[a(d,{onClick:e[27]||(e[27]=n=>_.value=!1)},{default:l(()=>[...e[62]||(e[62]=[p("取消",-1)])]),_:1}),a(d,{type:"primary",onClick:$l},{default:l(()=>[...e[63]||(e[63]=[p(" 提交更新 ",-1)])]),_:1})])]),default:l(()=>[a(ft,{options:v.treeData,props:h,clearable:"",modelValue:N.value,"onUpdate:modelValue":e[26]||(e[26]=n=>N.value=n),style:{width:"400px"}},null,8,["options","modelValue"])]),_:1},8,["modelValue"]),se.value?(t(),u(jt,{key:1,isShowUpload:Ge.value,"onUpdate:isShowUpload":e[29]||(e[29]=n=>Ge.value=n),ciModelId:v.ciModelId,currentNodeId:v.currentNodeId,onGetCiData:Oe},null,8,["isShowUpload","ciModelId","currentNodeId"])):O("",!0),se.value?(t(),u(mo,{key:2,ciModelId:v.ciModelId,currentNodeId:v.currentNodeId,allModelFieldByNameObj:ge.value,enumOptionObj:zl.value,validationRulesObj:je.value,allModelField:wl.value,modelRefOptions:bl.value,showFilter:le.value,"onUpdate:showFilter":e[30]||(e[30]=n=>le.value=n),onUpdateFilterParam:ua,onGetCiData:Oe,ref_key:"ciDataFilterRef",ref:ve},null,8,["ciModelId","currentNodeId","allModelFieldByNameObj","enumOptionObj","validationRulesObj","allModelField","modelRefOptions","showFilter"])):O("",!0),a(Kt,{ciModelId:v.ciModelId,allModelField:wl.value,allModelFieldInfo:Ra.value,isShowTableCol:Ll.value,"onUpdate:isShowTableCol":e[31]||(e[31]=n=>Ll.value=n),hasConfigField:Il.value,"onUpdate:hasConfigField":e[32]||(e[32]=n=>Il.value=n),onReloadTable:oa,ref_key:"ciDataTableColRef",ref:ta},null,8,["ciModelId","allModelField","allModelFieldInfo","isShowTableCol","hasConfigField"]),a(Gt,{showAllPassDia:P.value,"onUpdate:showAllPassDia":e[33]||(e[33]=n=>P.value=n)},null,8,["showAllPassDia"]),a(Qt,{qCodeContext:ma.value,showqCodeDia:Jl.value,"onUpdate:showqCodeDia":e[34]||(e[34]=n=>Jl.value=n)},null,8,["qCodeContext","showqCodeDia"])],64)}}}),bn=Rl(yn,[["__scopeId","data-v-0ed8edf7"]]),wn={class:"card ci_data_tree"},kn={class:"flexJstart gap-5"},hn={class:"tree-container"},Cn={class:"custom-tree-node"},xn={class:"table-box"},Vn=sl({name:"cidata",__name:"cidataView",setup(ee){const fe=Da(),{proxy:Y}=ml(),U=i(!0),E=Nt(),M=i(""),q=i(!1);i(""),i(!1);const Z=i(),re=i([]),ie=i("");jl(ie,h=>{w.value.filter(h)});const v=(h,_)=>h?_.label.toLowerCase().includes(h.toLowerCase()):!0,me=h=>!(h.level>Vl.value-1||h.label==="空闲池"),te=async()=>{q.value=!0;let h=await Y.$api.getCiModelTree({model:M.value});console.log(h),re.value=[h.data],he(()=>{y.value===1&&(w.value.setCurrentKey(h.data.id),y.value=w.value.getCurrentKey())}),q.value=!1},le=R(()=>E.ciLastModel),ne=i([]),se=async()=>{let h=await Y.$api.getCiModel();ne.value=h.data.results,E.setModelList(ne.value),console.log(le.value),le.value===void 0||le.value===null?(M.value=ne.value.find(_=>_.name==="hosts").id,he(()=>{E.setCiLastModel(M.value)})):M.value=le.value},H=i([]),ve=async()=>{let h=await Y.$api.getCiModelGroup();H.value=h.data.results},Ce=R(()=>{let h=new Array;return H.value.forEach(_=>{let N=new Array;ne.value.forEach(Be=>{Be.model_group===_.id&&N.push({value:Be.id,label:Be.verbose_name})}),h.push({value:_.id,label:_.verbose_name,children:N})}),h});R(()=>{let h={};return ne.value.forEach(_=>{h[_.id]=_}),h});const P=i(""),Q=async()=>{E.setCiLastModel(M.value),y.value=1,await te(),await P.value.closeFilter(),await P.value.updateFilterParam({}),await P.value.clearMultipleSelect(),P.value.reloadCiDataFilter(),await P.value.setLoading(!0),await P.value.getModelField(),await P.value.getHasConfigField(),await P.value.setLoading(!1),await P.value.initCiDataForm(),await P.value.getCiData({model:M.value,model_instance_group:y.value})};Ua(async()=>{await ve(),await se(),await te(),P.value.setLoading(!0),await P.value.getModelField(),await P.value.getHasConfigField(),await P.value.setLoading(!1),await P.value.initCiDataForm(),await P.value.getCiData({model:M.value,model_instance_group:w.value.getCurrentKey()})});const T=h=>h.built_in?!1:h.children?!(h.children.length>>>0):!0,w=i(),g=i(),y=i(1),G=i(!1),ue=i(100),be=(h,_)=>{J.value=!1;let N=ue.value++;w.value.append({id:N,label:"新建子目录",level:_.level+1,parent:_.id,model:M.value},h),w.value.setCurrentKey(N),ae.value=N,he(()=>{g.value.focus()})},Me=(h,_)=>{let N=ue.value++;J.value=!1,w.value.insertAfter({id:N,label:"新建目录",level:_.level,parent:h.parent.data.id,model:M.value},h),w.value.setCurrentKey(N),ae.value=N,he(()=>{g.value.focus()})},xe=()=>{y.value=w.value.getCurrentKey(),P.value.clearMultipleSelect(),P.value.setLoading(!0),P.value.getCiData({model:M.value,model_instance_group:w.value.getCurrentKey()}),P.value.setLoading(!0)},B=h=>{G.value=!G.value,h.isShowEdit=G.value},ae=i(99999),X=i(""),J=i(!0),Ye=h=>{J.value=!0,console.log(h),X.value=h.label,ae.value=h.id,he(()=>{g.value.focus()})},Se=async(h,_)=>{if(ae.value=99999,!X.value)S.warning("名称不可为空"),w.value.remove(_);else if(J.value){if(X.value==_.label)return!1;{let N=await Y.$api.updateCiModelTree({id:_.id,label:X.value});N.status=="200"?(S({type:"success",message:"更新成功"}),_.label=X.value,te(),X.value=""):S({showClose:!0,message:"更新失败:"+JSON.stringify(N.data),type:"error"}),console.log(_)}}else{_.label=X.value,console.log(_);let N=await Y.$api.addCiModelTree(_);N.status=="201"?(S({type:"success",message:"添加成功"}),te(),X.value=""):(S({showClose:!0,message:"添加失败:"+JSON.stringify(N.data),type:"error"}),w.value.remove(_))}},He=h=>{h&&ea.confirm("确定删除该目录吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{(await Y.$api.deleteCiModelTree(h.data.id)).status==200?(S({type:"success",message:"删除成功"}),await te()):S({type:"error",message:"删除失败"})}).catch(()=>{})},I=i(""),qe=(h,_)=>{I.value=h,console.log(I.value)},j=(h,_,N)=>{},ul=(h,_,N)=>{},dl=(h,_,N)=>{},Ge=async(h,_,N,Be)=>{if(_.data.id===h.data.id)return;let Qe=await Y.$api.updateCiModelTree({id:h.data.id,target_id:_.data.id,position:N});Qe.status=="200"?(S({type:"success",message:"更新排序成功"}),te()):S({showClose:!0,message:"更新排序失败:"+JSON.stringify(Qe.data),type:"error"})},We=(h,_,N,Be)=>{},Vl=i(5),Ze=(h,_,N)=>_.data.built_in?!1:N!=="inner",El=h=>!h.data.built_in;return(h,_)=>{const N=c("el-text"),Be=c("el-tree-select"),Qe=c("el-divider"),$l=c("el-input"),rl=c("a-menu-item"),el=c("a-menu"),A=c("a-dropdown"),Xe=c("el-space"),_l=vl("permission"),Al=vl("loading");return t(),r(oe,null,[z($("div",wn,[$("div",kn,[a(N,{tag:"b"},{default:l(()=>[..._[7]||(_[7]=[p("模型",-1)])]),_:1}),a(Be,{modelValue:M.value,"onUpdate:modelValue":_[0]||(_[0]=V=>M.value=V),data:Ce.value,onChange:_[1]||(_[1]=V=>Q()),"render-after-expand":!1,style:{flex:"1"}},null,8,["modelValue","data"])]),a(Qe),a($l,{modelValue:ie.value,"onUpdate:modelValue":_[2]||(_[2]=V=>ie.value=V),clearable:"",style:{"max-width":"280px","margin-bottom":"10px"},size:"small",placeholder:"检索节点"},null,8,["modelValue"]),$("div",hn,[z((t(),u(k(It),{class:"tree-with-scrollbar","allow-drop":Ze,"allow-drag":El,data:re.value,draggable:!0,"default-expand-all":"","node-key":"id",onNodeDragStart:qe,onNodeDragEnter:j,onNodeDragLeave:ul,onNodeDragOver:dl,onNodeDragEnd:Ge,onNodeDrop:We,"highlight-current":!0,"current-node-key":y.value,"expand-on-click-node":!1,ref_key:"treeRef",ref:w,onNodeClick:xe,"filter-node-method":v},{default:l(({node:V,data:de})=>{var Ml;return[$("div",Cn,[ae.value===de.id?(t(),u($l,{key:0,modelValue:X.value,"onUpdate:modelValue":_[3]||(_[3]=Ue=>X.value=Ue),modelModifiers:{trim:!0},placeholder:"请输入",ref_key:"eInputRef",ref:g,onBlur:Ue=>Se(Ue,de),onKeyup:_[4]||(_[4]=Ot(Ue=>Ue.target.blur(),["enter"])),autofocus:!0,maxlength:"10",type:"text",size:"small"},null,8,["modelValue","onBlur"])):(t(),u(N,{key:1,size:"default"},{default:l(()=>[p(x(V.label),1),a(N,{size:"small"},{default:l(()=>[p("("+x(de.instance_count)+")",1)]),_:2},1024)]),_:2},1024)),z((t(),r("div",{class:Fe(["actionClass",{is_show_action:V.isShowEdit}])},[a(Xe,null,{default:l(()=>[de.built_in?O("",!0):(t(),u(k(Dt),{key:0,onClick:xl(Ue=>Ye(de),["stop"])},null,8,["onClick"])),a(A,{trigger:["click"],ref_key:"aDropdownRef",ref:Z,onOpenChange:Ue=>B(V)},{overlay:l(()=>[a(el,null,{default:l(()=>{var Ue,Ol;return[z((t(),r("div",null,[de.level!==1?(t(),u(rl,{key:"0",onClick:Pe=>Me(V,de)},{default:l(()=>[..._[8]||(_[8]=[p(" 添加同级节点 ",-1)])]),_:1},8,["onClick"])):O("",!0),me(de)?(t(),u(rl,{key:"1",onClick:Pe=>be(V,de)},{default:l(()=>[..._[9]||(_[9]=[p(" 添加子节点 ",-1)])]),_:1},8,["onClick"])):O("",!0)])),[[_l,`${(Ue=k(fe).name)==null?void 0:Ue.replace("_info","")}:add`]]),z((t(),r("div",null,[T(de)?(t(),u(rl,{key:"2",onClick:Pe=>He(V)},{default:l(()=>[..._[10]||(_[10]=[p(" 删除节点 ",-1)])]),_:1},8,["onClick"])):O("",!0)])),[[_l,`${(Ol=k(fe).name)==null?void 0:Ol.replace("_info","")}:delete`]])]}),_:2},1024)]),default:l(()=>[a(k(Ut),{onClick:_[5]||(_[5]=xl(()=>{},["stop"]))})]),_:2},1032,["onOpenChange"])]),_:2},1024)],2)),[[_l,`${(Ml=k(fe).name)==null?void 0:Ml.replace("_info","")}:edit`]])])]}),_:1},8,["data","current-node-key"])),[[Al,q.value]])])],512),[[Tl,U.value]]),$("div",xn,[a(bn,{ciModelId:M.value,treeData:re.value,currentNodeId:y.value,ref_key:"ciDataShowRef",ref:P,onGetTree:te,showTree:U.value,"onUpdate:showTree":_[6]||(_[6]=V=>U.value=V)},null,8,["ciModelId","treeData","currentNodeId","showTree"])])],64)}}}),Fn=Rl(Vn,[["__scopeId","data-v-40c78f65"]]);export{Fn as default};
