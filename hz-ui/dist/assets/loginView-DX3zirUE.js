import{d as L,g as N,u as F,r as f,a as b,c as g,b as l,e as I,f as e,w as s,h as n,F as R,i as z,o as v,j as B,k as E,l as T,m as V,n as U,p as K,q as M,t as $,E as j,_ as D}from"./index-D37lWo2y.js";const G={class:"login-container"},A={class:"login-wrapper"},H={class:"login-box"},J={class:"login-right"},O={key:0,class:"login-footer"},P={class:"particles-container"},Q=L({__name:"loginView",setup(W){const{proxy:w}=N(),p=F(),k=B(),y=f(),C=b({password:[{required:!0,message:"请输入密码",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}]}),i=f(""),m=f(!1),r=b({username:"",password:""}),h=()=>{var _;i.value="",(_=y.value)==null||_.validate(async a=>{var c,d;if(a){m.value=!0;try{let t=await w.$api.login(r);if(t.data.code!=200)i.value=t.data.error,(c=document.querySelector(".login-card"))==null||c.classList.add("shake"),setTimeout(()=>{var o;(o=document.querySelector(".login-card"))==null||o.classList.remove("shake")},500);else{await p.setUserConfig(t.data),await p.getMenuInfo();let o=await w.$api.getSysConfig({params:"gm"});p.setGmCry(o.data),j({title:"登录成功",message:"欢迎回来，"+r.username,type:"success",duration:2e3}),k.push({name:"main"})}}catch(t){console.error("登录失败:",t),i.value="登录失败，请检查网络连接",(d=document.querySelector(".login-card"))==null||d.classList.add("shake"),setTimeout(()=>{var o;(o=document.querySelector(".login-card"))==null||o.classList.remove("shake")},500)}finally{m.value=!1}}})};return(_,a)=>{const c=n("el-icon"),d=n("el-input"),t=n("el-form-item"),o=n("el-button"),x=n("el-form"),S=n("el-alert"),q=n("el-card");return v(),g("div",G,[l("div",A,[l("div",H,[a[3]||(a[3]=I('<div class="login-left" data-v-f969b1c4><div class="welcome-text" data-v-f969b1c4><h1 data-v-f969b1c4>欢迎登录</h1><p data-v-f969b1c4>高效、便捷的自动化运维系统</p></div><div class="decoration-elements" data-v-f969b1c4><div class="circle circle-1" data-v-f969b1c4></div><div class="circle circle-2" data-v-f969b1c4></div><div class="circle circle-3" data-v-f969b1c4></div></div></div>',1)),l("div",J,[e(q,{class:"login-card",shadow:"never"},{default:s(()=>[a[2]||(a[2]=l("div",{class:"card-header"},[l("h2",null,"用户登录"),l("p",null,"请输入您的账户信息")],-1)),e(x,{model:r,class:"login-form",ref_key:"ruleFormRef",ref:y,rules:C,"label-position":"top",onKeyup:T(h,["enter","native"])},{default:s(()=>[e(t,{prop:"username"},{default:s(()=>[e(d,{modelValue:r.username,"onUpdate:modelValue":a[0]||(a[0]=u=>r.username=u),placeholder:"请输入用户名",size:"large",clearable:""},{prefix:s(()=>[e(c,{class:"el-input__icon"},{default:s(()=>[e(V(U))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t,{prop:"password"},{default:s(()=>[e(d,{modelValue:r.password,"onUpdate:modelValue":a[1]||(a[1]=u=>r.password=u),type:"password",placeholder:"请输入密码",size:"large","show-password":""},{prefix:s(()=>[e(c,{class:"el-input__icon"},{default:s(()=>[e(V(K))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t,null,{default:s(()=>[e(o,{type:"primary",onClick:h,loading:m.value,size:"large",class:"login-button",style:{width:"100%"}},{default:s(()=>[M($(m.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),i.value?(v(),g("div",O,[e(S,{title:i.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):E("",!0)]),_:1})])])]),l("div",P,[(v(),g(R,null,z(20,u=>l("div",{class:"particle",key:u})),64))])])}}}),Y=D(Q,[["__scopeId","data-v-f969b1c4"]]);export{Y as default};
