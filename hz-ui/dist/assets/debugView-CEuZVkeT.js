import{d as G,g as J,r as n,l as C,m as E,e as b,c as v,o as m,i as s,b as r,w as i,k as w,F as x,p as L,t as M,y as T,cb as P,bY as Q}from"./index-BuQNgUX_.js";import{l as R}from"./vue-draggable-plus-D555JBaU.js";import{T as W}from"./treeTransfer-BjDokUnJ.js";const X={class:"card",style:{"flex-direction":"column","justify-content":"space-between"}},Z={class:"example-container"},ee={style:{display:"flex","justify-content":"space-around",gap:"10px",height:"100%"}},le={style:{width:"100%",overflow:"auto"}},te={style:{display:"flex","justify-content":"space-between"}},ae={style:{flex:"auto"}},de=G({__name:"debugView",setup(ne){const{proxy:h}=J(),f=n(!1),N=n("Option 1");function $(){f.value=!1}function F(){Q.confirm(`Are you confirm to chose ${N.value} ?`).then(()=>{f.value=!1}).catch(()=>{})}const B=n([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),c=n([1,2,3]),U=C(()=>B.value.filter(l=>!c.value.includes(l))),j=l=>{let e=c.value.indexOf(l);c.value.splice(e,1)},D=l=>{console.log("start",l)},H=l=>{console.log("onEnd",l),console.log(c.value)},I=()=>{console.log("update")},O=n([]),k=n({});C(()=>{var e,o;let l={};return(o=(e=k.value)==null?void 0:e.field_groups)==null||o.forEach(t=>{t.fields.forEach(d=>{l[d.id]=d})}),l}),C(()=>{var e,o;let l={};return(o=(e=k.value)==null?void 0:e.field_groups)==null||o.forEach(t=>{t.fields.forEach(d=>{l[d.name]=d})}),l});const S=n({}),z=async()=>{let l=await h.$api.getCiModelCol({model:"a8406612-738f-4b8f-93cc-e3f8fbe217ee"});S.value=l.data,O.value=l.data.fields_preferred};E(async()=>{await z()}),n([{id:1,label:"1Level one 1",children:[{id:4,label:"1-1",children:[{id:9,label:"1-1-1"},{id:10,label:"1-1-2"}]}]},{id:2,label:"2Level one 2",children:[{id:5,label:"2-1"},{id:6,label:"2-2"}]},{id:3,label:"3Level one 31111111",children:[{id:7,label:"3-111111111111111111",disabled:!0},{id:8,label:"Level two 3-21111111",disabled:!0,children:[{id:11,label:"4-111111111111111111111"},{id:12,label:"4-211111111111111111111"}]}]}]),n([9,10]),n({label:"label",children:"children",disabled:"disabled"});const y=n([]),V=n([]);function A(l){function e(t){const d={id:t.id,label:t.label};let g=[];t.children&&t.children.length>0&&(g=t.children.map(e).filter(p=>p!==null));let a=[];t.instances&&t.instances.length>0&&(a=t.instances.map(p=>({id:p.id,label:p.instance_name})));const u=[...g,...a];if(u.length>0)d.children=u;else if((!t.instances||t.instances.length===0)&&(!t.children||t.children.length===0))return null;return d}return l.map(e).filter(t=>t!==null)}const _=n(null),K=async()=>{let l=await h.$api.getCiModel({name:"hosts"});_.value=l.data.results[0]},Y=async()=>{var e;console.log(_.value);let l=await h.$api.getCiModelTreeNode({model:(e=_.value)==null?void 0:e.id});y.value=A(l.data),console.log(y.value)};E(async()=>{await K(),await Y()});const q=(l,e,o)=>{console.log("值变化:",l),console.log("移动方向:",e),console.log("移动的keys:",o)};return(l,e)=>{const o=b("el-button"),t=b("el-card"),d=b("el-icon"),g=b("el-drawer");return m(),v(x,null,[s("div",X,[r(o,{onClick:e[0]||(e[0]=a=>f.value=!0)},{default:i(()=>[...e[4]||(e[4]=[w("打开",-1)])]),_:1}),s("div",Z,[r(W,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),data:y.value,titles:["可选节点","已选节点"],"leaf-only":!0,"check-strictly":!1,onChange:q},null,8,["modelValue","data"])])]),r(g,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a),direction:"rtl",size:"50%"},{header:i(()=>[...e[5]||(e[5]=[s("h4",null,"set title by slot",-1)])]),default:i(()=>[s("div",ee,[r(t,{class:"card",style:{flex:"0.4"}},{header:i(()=>[...e[6]||(e[6]=[s("div",{class:"card-header"},[s("span",null,"模型字段")],-1)])]),default:i(()=>[s("div",le,[(m(!0),v(x,null,L(U.value,(a,u)=>(m(),v("p",{key:u},M(a),1))),128))])]),_:1}),r(t,{class:"card",style:{flex:"0.4"}},{header:i(()=>[...e[7]||(e[7]=[s("div",{class:"card-header"},[s("span",null,"已显示字段")],-1)])]),default:i(()=>[r(T(R),{ref:"el",modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),onStart:D,onUpdate:I,onEnd:H},{default:i(()=>[(m(!0),v(x,null,L(c.value,(a,u)=>(m(),v("div",{key:u},[s("div",te,[s("span",null,M(a),1),r(d,null,{default:i(()=>[r(T(P),{onClick:p=>j(a)},null,8,["onClick"])]),_:2},1024)])]))),128))]),_:1},8,["modelValue"])]),_:1})])]),footer:i(()=>[s("div",ae,[r(o,{onClick:$},{default:i(()=>[...e[8]||(e[8]=[w("cancel",-1)])]),_:1}),r(o,{type:"primary",onClick:F},{default:i(()=>[...e[9]||(e[9]=[w("confirm",-1)])]),_:1})])]),_:1},8,["modelValue"])],64)}}});export{de as default};
