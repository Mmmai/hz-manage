import{d as Y,r as g,l as K,bK as B,aK as N,m as Z,e as x,c as E,o as u,i as d,b as a,w as c,k as O,t as V,y,c4 as P,q as _,z as M,cy as w,aL as U,bU as $,cz as ee,cA as le,_ as te}from"./index-BuQNgUX_.js";const ae={class:"tree-transfer"},se={class:"tree-transfer-panel"},ne={class:"panel left-panel"},de={class:"panel-header"},ce={class:"panel-body"},oe={class:"custom-tree-node"},re={key:1,class:"custom-tree-node"},ie={class:"operation-buttons"},ue={class:"panel right-panel"},fe={class:"panel-header"},he={class:"panel-body"},pe={class:"custom-tree-node"},ye={key:1,class:"custom-tree-node"},ke=Y({__name:"treeTransfer",props:{data:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},titles:{type:Array,default:()=>["左侧列表","右侧列表"]},buttonTexts:{type:Array,default:()=>["到左侧","到右侧"]},checkStrictly:{type:Boolean,default:!1},leafOnly:{type:Boolean,default:!1},treeProps:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},defaultExpandedKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(f,{emit:F}){const o=f,C=F,h=g(),p=g(),A=g(""),R=g(""),m=g([]),v=g([]),j=(e,l)=>{m.value=l.checkedKeys},q=(e,l)=>{v.value=l.checkedKeys},I=e=>{const l=[],r=s=>{!s||!Array.isArray(s)||s.forEach(n=>{n.children&&n.children.length>0?r(n.children):l.push(n.id)})};return r(e),l},S=(e,l)=>{const r=I(l);return e.filter(s=>r.includes(s))},G=K(()=>D(o.data,e=>!o.modelValue.includes(e.id))),H=K(()=>D(o.data,e=>o.modelValue.includes(e.id))),z=K(()=>m.value.filter(e=>!o.modelValue.includes(e))),L=K(()=>v.value.filter(e=>o.modelValue.includes(e))),D=(e,l)=>{if(!e||!Array.isArray(e))return[];const r=[],s=n=>{const k=l(n),b={...n};let T=!1;if(n.children&&n.children.length>0){const t=n.children.map(i=>s(i)).filter(i=>i!==null);t.length>0?(b.children=t,T=!0):delete b.children}return k||T?b:null};return e.forEach(n=>{const k=s(n);k!==null&&r.push(k)}),r},J=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0,Q=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0,W=()=>{if(m.value.length===0)return;let e=m.value;o.leafOnly&&(e=S(e,o.data));const l=[...new Set([...o.modelValue,...e])];C("update:modelValue",l),C("change",l,"right",e),m.value=[],N(()=>{h.value&&h.value.setCheckedKeys([])})},X=()=>{if(v.value.length===0)return;let e=v.value;o.leafOnly&&(e=S(e,o.data));const l=o.modelValue.filter(r=>!e.includes(r));C("update:modelValue",l),C("change",l,"left",e),v.value=[],N(()=>{p.value&&p.value.setCheckedKeys([])})};return B(A,e=>{h.value&&h.value.filter(e)}),B(R,e=>{p.value&&p.value.filter(e)}),B(()=>o.modelValue,()=>{N(()=>{h.value&&h.value.setCheckedKeys(z.value),p.value&&p.value.setCheckedKeys(L.value)})},{deep:!0}),Z(()=>{N(()=>{h.value&&h.value.setCheckedKeys(z.value),p.value&&p.value.setCheckedKeys(L.value)})}),(e,l)=>{const r=x("el-text"),s=x("el-icon"),n=x("el-input"),k=x("el-tooltip"),b=x("el-tree"),T=x("el-button");return u(),E("div",ae,[d("div",se,[d("div",ne,[d("div",de,[a(r,{tag:"b"},{default:c(()=>[O(V(f.titles[0]||"左侧列表"),1)]),_:1}),a(n,{modelValue:A.value,"onUpdate:modelValue":l[0]||(l[0]=t=>A.value=t),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:c(()=>[a(s,null,{default:c(()=>[a(y(P))]),_:1})]),_:1},8,["modelValue"])]),d("div",ce,[a(b,{ref_key:"leftTreeRef",ref:h,data:G.value,"show-checkbox":"","default-expand-all":"","node-key":"id",props:f.treeProps,"filter-node-method":J,"check-strictly":f.checkStrictly,onCheck:j,"default-checked-keys":z.value,"default-expanded-keys":f.defaultExpandedKeys,"expand-on-click-node":!1},{default:c(({node:t,data:i})=>[i.disabled?(u(),_(k,{key:0,content:i.disabledTooltip||"无法移动",placement:"top"},{default:c(()=>[d("span",oe,[t.childNodes&&t.childNodes.length>0?(u(),_(s,{key:0,class:"node-icon"},{default:c(()=>[a(y(w))]),_:1})):M("",!0),d("span",{class:U({"node-disabled":i.disabled})},V(t.label),3)])]),_:2},1032,["content"])):(u(),E("span",re,[t.childNodes&&t.childNodes.length>0?(u(),_(s,{key:0,class:"node-icon"},{default:c(()=>[a(y(w))]),_:1})):M("",!0),d("span",null,V(t.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys"])])]),d("div",ie,[a(T,{type:"primary",icon:y($),circle:"",size:"default",disabled:m.value.length===0,onClick:W},null,8,["icon","disabled"]),a(T,{type:"primary",icon:y(ee),circle:"",size:"default",disabled:v.value.length===0,onClick:X,style:{"margin-left":"0"}},null,8,["icon","disabled"])]),d("div",ue,[d("div",fe,[a(r,{tag:"b"},{default:c(()=>[O(V(f.titles[1]||"右侧列表"),1)]),_:1}),a(n,{modelValue:R.value,"onUpdate:modelValue":l[1]||(l[1]=t=>R.value=t),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:c(()=>[a(s,null,{default:c(()=>[a(y(P))]),_:1})]),_:1},8,["modelValue"])]),d("div",he,[a(b,{ref_key:"rightTreeRef",ref:p,data:H.value,"show-checkbox":"","default-expand-all":"","node-key":"id",props:f.treeProps,"filter-node-method":Q,"check-strictly":f.checkStrictly,onCheck:q,"default-checked-keys":L.value,"default-expanded-keys":f.defaultExpandedKeys,"expand-on-click-node":!1},{default:c(({node:t,data:i})=>[i.disabled?(u(),_(k,{key:0,content:i.disabledTooltip||"无法移除",placement:"top"},{default:c(()=>[d("span",pe,[a(s,{class:"node-icon"},{default:c(()=>[t.childNodes&&t.childNodes.length>0?(u(),_(y(w),{key:0})):(u(),_(y(le),{key:1}))]),_:2},1024),d("span",{class:U({"node-disabled":i.disabled})},V(t.label),3)])]),_:2},1032,["content"])):(u(),E("span",ye,[t.childNodes&&t.childNodes.length>0?(u(),_(s,{key:0,class:"node-icon"},{default:c(()=>[a(y(w))]),_:1})):M("",!0),d("span",null,V(t.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys"])])])])])}}}),me=te(ke,[["__scopeId","data-v-7c220e81"]]);export{me as T};
