import{d as B,g as L,a as m,r as o,q as P,e as n,c as f,o as d,b as s,w as l,a7 as U,a8 as V,D as I,aD as N,k as b,t as O}from"./index-BGjJrjF8.js";const q={class:"card"},$=B({name:"logFlowMission",__name:"logFlowMissionView",setup(E){const{proxy:w}=L(),h=m([{label:"用户",prop:"username",width:"90"},{label:"日志流程",prop:"flow_name"},{label:"分析ID",prop:"search_key"},{label:"数据源",prop:"dataSource_name",width:"120"},{label:"创建时间",prop:"create_time",width:"220",sortable:!0},{label:"状态",prop:"status",width:"100",fixed:"right"}]),y=t=>t=="Success"?"success":t==="Failed"?"error":"info",v={Pending:"运行中",Success:"成功",Failed:"失败",Unknown:"未知"},p=o([]),r=async()=>{let t=await w.$api.getLogFlowMission({page:i.value,page_size:u.value});p.value=t.data.results,c.value=t.data.count};m({});const i=o(1),u=o(10),x=o("default"),z=o(!1),c=o(0),C=()=>{r()},S=()=>{r()};return P(async()=>{await r()}),(t,a)=>{const k=n("el-tag"),g=n("el-table-column"),F=n("el-link"),M=n("el-table"),D=n("el-pagination");return d(),f("div",q,[s(M,{data:p.value,"default-sort":{prop:"create_time",order:"descending"}},{default:l(()=>[(d(!0),f(U,null,V(h,(e,j)=>(d(),I(g,{key:j,prop:e.prop,label:e.label,width:e.width,sortable:e.sortable,fixed:e.fixed},N({_:2},[e.prop==="status"?{name:"default",fn:l(_=>[s(k,{round:"",type:y(_.row.status)},{default:l(()=>[b(O(v[_.row.status]),1)]),_:2},1032,["type"])]),key:"0"}:void 0]),1032,["prop","label","width","sortable","fixed"]))),128)),s(g,{label:"操作",fixed:"right",width:"80"},{default:l(e=>[s(F,{href:"/#/log/logFlowMission/"+e.row.mission_id+"?mission_id="+e.row.mission_id+"&verbose_name="+e.row.flow_name,type:"primary"},{default:l(()=>a[2]||(a[2]=[b("查看结果")])),_:2},1032,["href"])]),_:1})]),_:1},8,["data"]),s(D,{"current-page":i.value,"onUpdate:currentPage":a[0]||(a[0]=e=>i.value=e),"page-size":u.value,"onUpdate:pageSize":a[1]||(a[1]=e=>u.value=e),"page-sizes":[10,20,50,100,200],size:x.value,disabled:z.value,layout:"total, sizes, prev, pager, next, jumper",total:c.value,onSizeChange:C,onCurrentChange:S,style:{"margin-top":"5px","justify-content":"flex-end"}},null,8,["current-page","page-size","size","disabled","total"])])}}});export{$ as default};
