<<<<<<<< HEAD:hz-ui/dist/assets/treeTransfer-0YCCccR7.js
import{d as de,r as x,v as g,bP as P,aP as q,z as ue,h as N,c as I,o as p,b as f,f as u,w as h,q as W,t as _,m,ca as X,aQ as w,B as b,k as $,cI as L,c0 as oe,cJ as fe,cK as he,_ as ye}from"./index-Cm0tF2Sj.js";const pe={class:"tree-transfer"},ve={class:"tree-transfer-panel"},ke={class:"panel left-panel"},me={class:"panel-header"},ge={class:"panel-body"},_e={class:"custom-tree-node"},be={key:1,class:"custom-tree-node"},Ke={class:"operation-buttons"},Ae={class:"panel right-panel"},Te={class:"panel-header"},xe={class:"panel-body"},Ne={class:"custom-tree-node"},Ce={key:1,class:"custom-tree-node"},Ve=de({__name:"treeTransfer",props:{data:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},titles:{type:Array,default:()=>["左侧列表","右侧列表"]},buttonTexts:{type:Array,default:()=>["到左侧","到右侧"]},checkStrictly:{type:Boolean,default:!1},leafOnly:{type:Boolean,default:!1},hideFullyAssignedParents:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},treeProps:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},defaultExpandedKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(y,{emit:Y}){const c=y,C=Y,v=x(),k=x(),E=x(""),D=x(""),K=x([]),A=x([]),F=(e,l="")=>{if(!e||!Array.isArray(e))return[];const a=[],t=(r,n,i="")=>{const o={...r},s=`${i}${n}-${r.id}`;return o.uniqueKey=s,r.children&&r.children.length>0&&(o.children=r.children.map((d,V)=>t(d,V,`${s}-`))),o};return e.forEach((r,n)=>{const i=t(r,n,l);a.push(i)}),a},j=(e,l)=>{const a=[],t=r=>{!r||!Array.isArray(r)||r.forEach(n=>{e.includes(n.uniqueKey)&&a.push(n.id),n.children&&n.children.length>0&&t(n.children)})};return t(l),[...new Set(a)]},J=e=>{const l=new Set,a=t=>{!t||!Array.isArray(t)||t.forEach(r=>{!r.children||r.children.length===0?r.disabled||l.add(r.id):r.children&&r.children.length>0&&a(r.children)})};return a(e),Array.from(l)},R=g(()=>F(U.value,"left-")),B=g(()=>F(M.value,"right-")),Q=(e,l)=>{if(!e||!Array.isArray(e))return[];const a=[],t=r=>{const n=l(r),i={...r};let o=!1;if(r.children&&r.children.length>0){const s=r.children.map(d=>t(d)).filter(d=>d!==null);s.length>0?(i.children=s,o=!0):delete i.children}return n||o?i:null};return e.forEach(r=>{const n=t(r);n!==null&&a.push(n)}),a},Z=(e,l,a=!1,t=[])=>{if(!e||!Array.isArray(e))return[];const r=[];O(e);const n=i=>{const o=l(i),s={...i};let d=!1,V=!1;if(i.children&&i.children.length>0){const H=i.children.map(T=>n(T)).filter(T=>T!==null);if(H.length>0?(s.children=H,d=!0):delete s.children,a){const T=O([i]);V=T.length>0&&T.every(ie=>t.includes(ie))}}return a&&V?null:o||d?s:null};return e.forEach(i=>{const o=n(i);o!==null&&r.push(o)}),r},U=g(()=>c.hideFullyAssignedParents?Z(c.data,e=>!c.modelValue.includes(e.id),!0,c.modelValue):Q(c.data,e=>!c.modelValue.includes(e.id))),M=g(()=>Q(c.data,e=>c.modelValue.includes(e.id))),O=e=>{const l=[],a=t=>{!t||!Array.isArray(t)||t.forEach(r=>{r.children&&r.children.length>0?a(r.children):l.push(r.id)})};return a(e),l},ee=g(()=>{if(c.leafOnly)return J(U.value).length;{const e=l=>!l||!Array.isArray(l)?0:l.reduce((a,t)=>t.disabled?a+e(t.children):a+1+e(t.children),0);return e(U.value)}}),le=g(()=>{if(c.leafOnly)return J(M.value).length;{const e=l=>!l||!Array.isArray(l)?0:l.reduce((a,t)=>t.disabled?a+e(t.children):a+1+e(t.children),0);return e(M.value)}}),S=g(()=>{const e=[],l=a=>{!a||!Array.isArray(a)||a.forEach(t=>{K.value.includes(t.id)&&e.push(t.uniqueKey),t.children&&t.children.length>0&&l(t.children)})};return l(R.value),e}),z=g(()=>{const e=[],l=a=>{!a||!Array.isArray(a)||a.forEach(t=>{A.value.includes(t.id)&&e.push(t.uniqueKey),t.children&&t.children.length>0&&l(t.children)})};return l(B.value),e}),te=(e,l)=>{c.disabled||(console.log(e),K.value=j(l.checkedKeys,R.value))},ae=(e,l)=>{c.disabled||(A.value=j(l.checkedKeys,B.value))},G=(e,l)=>{const a=O(l);return e.filter(t=>a.includes(t))},re=()=>{if(K.value.length===0)return;let e=K.value;c.leafOnly&&(e=G(e,c.data));const l=[...new Set([...c.modelValue,...e])];C("update:modelValue",l),C("change",l,"right",e),K.value=[],q(()=>{v.value&&v.value.setCheckedKeys([])})},se=()=>{if(A.value.length===0)return;let e=A.value;c.leafOnly&&(e=G(e,c.data));const l=c.modelValue.filter(a=>!e.includes(a));C("update:modelValue",l),C("change",l,"left",e),A.value=[],q(()=>{k.value&&k.value.setCheckedKeys([])})},ne=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0,ce=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0;return P(E,e=>{v.value&&v.value.filter(e)}),P(D,e=>{k.value&&k.value.filter(e)}),P(()=>c.modelValue,()=>{q(()=>{v.value&&v.value.setCheckedKeys(S.value),k.value&&k.value.setCheckedKeys(z.value)})},{deep:!0}),ue(()=>{q(()=>{v.value&&v.value.setCheckedKeys(S.value),k.value&&k.value.setCheckedKeys(z.value)})}),(e,l)=>{const a=N("el-text"),t=N("el-icon"),r=N("el-input"),n=N("el-tooltip"),i=N("el-tree"),o=N("el-button");return p(),I("div",pe,[f("div",ve,[f("div",ke,[f("div",me,[u(a,{tag:"b"},{default:h(()=>[W(_(y.titles[0]||"左侧列表")+" ("+_(ee.value)+")",1)]),_:1}),u(r,{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=s=>E.value=s),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:h(()=>[u(t,null,{default:h(()=>[u(m(X))]),_:1})]),_:1},8,["modelValue"])]),f("div",ge,[u(i,{ref_key:"leftTreeRef",ref:v,data:R.value,"show-checkbox":"","default-expand-all":"","node-key":"uniqueKey",props:y.treeProps,"filter-node-method":ne,"check-strictly":y.checkStrictly,onCheck:te,"default-checked-keys":S.value,"default-expanded-keys":y.defaultExpandedKeys,"expand-on-click-node":!1,class:w({"tree-disabled":y.disabled})},{default:h(({node:s,data:d})=>[d.disabled?(p(),b(n,{key:0,content:d.disabledTooltip||"无法移动",placement:"top"},{default:h(()=>[f("span",_e,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",{class:w({"node-disabled":d.disabled})},_(s.label),3)])]),_:2},1032,["content"])):(p(),I("span",be,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",null,_(s.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys","class"])])]),f("div",Ke,[u(o,{type:"primary",icon:m(oe),circle:"",size:"default",disabled:K.value.length===0,onClick:re},null,8,["icon","disabled"]),u(o,{type:"primary",icon:m(fe),circle:"",size:"default",disabled:A.value.length===0,onClick:se,style:{"margin-left":"0"}},null,8,["icon","disabled"])]),f("div",Ae,[f("div",Te,[u(a,{tag:"b"},{default:h(()=>[W(_(y.titles[1]||"右侧列表")+" ("+_(le.value)+")",1)]),_:1}),u(r,{modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=s=>D.value=s),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:h(()=>[u(t,null,{default:h(()=>[u(m(X))]),_:1})]),_:1},8,["modelValue"])]),f("div",xe,[u(i,{ref_key:"rightTreeRef",ref:k,data:B.value,"show-checkbox":"","default-expand-all":"","node-key":"uniqueKey",props:y.treeProps,"filter-node-method":ce,"check-strictly":y.checkStrictly,onCheck:ae,"default-checked-keys":z.value,"default-expanded-keys":y.defaultExpandedKeys,"expand-on-click-node":!1,class:w({"tree-disabled":y.disabled})},{default:h(({node:s,data:d})=>[d.disabled?(p(),b(n,{key:0,content:d.disabledTooltip||"无法移除",placement:"top"},{default:h(()=>[f("span",Ne,[u(t,{class:"node-icon"},{default:h(()=>[s.childNodes&&s.childNodes.length>0?(p(),b(m(L),{key:0})):(p(),b(m(he),{key:1}))]),_:2},1024),f("span",{class:w({"node-disabled":d.disabled})},_(s.label),3)])]),_:2},1032,["content"])):(p(),I("span",Ce,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",null,_(s.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys","class"])])])])])}}}),we=ye(Ve,[["__scopeId","data-v-e7ccae8a"]]);export{we as T};
========
import{d as de,r as x,v as g,bP as P,aP as q,z as ue,h as N,c as I,o as p,b as f,f as u,w as h,q as W,t as _,m,ca as X,aQ as w,B as b,k as $,cI as L,c0 as oe,cJ as fe,cK as he,_ as ye}from"./index-D37lWo2y.js";const pe={class:"tree-transfer"},ve={class:"tree-transfer-panel"},ke={class:"panel left-panel"},me={class:"panel-header"},ge={class:"panel-body"},_e={class:"custom-tree-node"},be={key:1,class:"custom-tree-node"},Ke={class:"operation-buttons"},Ae={class:"panel right-panel"},Te={class:"panel-header"},xe={class:"panel-body"},Ne={class:"custom-tree-node"},Ce={key:1,class:"custom-tree-node"},Ve=de({__name:"treeTransfer",props:{data:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},titles:{type:Array,default:()=>["左侧列表","右侧列表"]},buttonTexts:{type:Array,default:()=>["到左侧","到右侧"]},checkStrictly:{type:Boolean,default:!1},leafOnly:{type:Boolean,default:!1},hideFullyAssignedParents:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},treeProps:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},defaultExpandedKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(y,{emit:Y}){const c=y,C=Y,v=x(),k=x(),E=x(""),D=x(""),K=x([]),A=x([]),F=(e,l="")=>{if(!e||!Array.isArray(e))return[];const a=[],t=(r,n,i="")=>{const o={...r},s=`${i}${n}-${r.id}`;return o.uniqueKey=s,r.children&&r.children.length>0&&(o.children=r.children.map((d,V)=>t(d,V,`${s}-`))),o};return e.forEach((r,n)=>{const i=t(r,n,l);a.push(i)}),a},j=(e,l)=>{const a=[],t=r=>{!r||!Array.isArray(r)||r.forEach(n=>{e.includes(n.uniqueKey)&&a.push(n.id),n.children&&n.children.length>0&&t(n.children)})};return t(l),[...new Set(a)]},J=e=>{const l=new Set,a=t=>{!t||!Array.isArray(t)||t.forEach(r=>{!r.children||r.children.length===0?r.disabled||l.add(r.id):r.children&&r.children.length>0&&a(r.children)})};return a(e),Array.from(l)},R=g(()=>F(U.value,"left-")),B=g(()=>F(M.value,"right-")),Q=(e,l)=>{if(!e||!Array.isArray(e))return[];const a=[],t=r=>{const n=l(r),i={...r};let o=!1;if(r.children&&r.children.length>0){const s=r.children.map(d=>t(d)).filter(d=>d!==null);s.length>0?(i.children=s,o=!0):delete i.children}return n||o?i:null};return e.forEach(r=>{const n=t(r);n!==null&&a.push(n)}),a},Z=(e,l,a=!1,t=[])=>{if(!e||!Array.isArray(e))return[];const r=[];O(e);const n=i=>{const o=l(i),s={...i};let d=!1,V=!1;if(i.children&&i.children.length>0){const H=i.children.map(T=>n(T)).filter(T=>T!==null);if(H.length>0?(s.children=H,d=!0):delete s.children,a){const T=O([i]);V=T.length>0&&T.every(ie=>t.includes(ie))}}return a&&V?null:o||d?s:null};return e.forEach(i=>{const o=n(i);o!==null&&r.push(o)}),r},U=g(()=>c.hideFullyAssignedParents?Z(c.data,e=>!c.modelValue.includes(e.id),!0,c.modelValue):Q(c.data,e=>!c.modelValue.includes(e.id))),M=g(()=>Q(c.data,e=>c.modelValue.includes(e.id))),O=e=>{const l=[],a=t=>{!t||!Array.isArray(t)||t.forEach(r=>{r.children&&r.children.length>0?a(r.children):l.push(r.id)})};return a(e),l},ee=g(()=>{if(c.leafOnly)return J(U.value).length;{const e=l=>!l||!Array.isArray(l)?0:l.reduce((a,t)=>t.disabled?a+e(t.children):a+1+e(t.children),0);return e(U.value)}}),le=g(()=>{if(c.leafOnly)return J(M.value).length;{const e=l=>!l||!Array.isArray(l)?0:l.reduce((a,t)=>t.disabled?a+e(t.children):a+1+e(t.children),0);return e(M.value)}}),S=g(()=>{const e=[],l=a=>{!a||!Array.isArray(a)||a.forEach(t=>{K.value.includes(t.id)&&e.push(t.uniqueKey),t.children&&t.children.length>0&&l(t.children)})};return l(R.value),e}),z=g(()=>{const e=[],l=a=>{!a||!Array.isArray(a)||a.forEach(t=>{A.value.includes(t.id)&&e.push(t.uniqueKey),t.children&&t.children.length>0&&l(t.children)})};return l(B.value),e}),te=(e,l)=>{c.disabled||(console.log(e),K.value=j(l.checkedKeys,R.value))},ae=(e,l)=>{c.disabled||(A.value=j(l.checkedKeys,B.value))},G=(e,l)=>{const a=O(l);return e.filter(t=>a.includes(t))},re=()=>{if(K.value.length===0)return;let e=K.value;c.leafOnly&&(e=G(e,c.data));const l=[...new Set([...c.modelValue,...e])];C("update:modelValue",l),C("change",l,"right",e),K.value=[],q(()=>{v.value&&v.value.setCheckedKeys([])})},se=()=>{if(A.value.length===0)return;let e=A.value;c.leafOnly&&(e=G(e,c.data));const l=c.modelValue.filter(a=>!e.includes(a));C("update:modelValue",l),C("change",l,"left",e),A.value=[],q(()=>{k.value&&k.value.setCheckedKeys([])})},ne=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0,ce=(e,l)=>e?l.children&&l.children.length>0?!1:l.label.includes(e):!0;return P(E,e=>{v.value&&v.value.filter(e)}),P(D,e=>{k.value&&k.value.filter(e)}),P(()=>c.modelValue,()=>{q(()=>{v.value&&v.value.setCheckedKeys(S.value),k.value&&k.value.setCheckedKeys(z.value)})},{deep:!0}),ue(()=>{q(()=>{v.value&&v.value.setCheckedKeys(S.value),k.value&&k.value.setCheckedKeys(z.value)})}),(e,l)=>{const a=N("el-text"),t=N("el-icon"),r=N("el-input"),n=N("el-tooltip"),i=N("el-tree"),o=N("el-button");return p(),I("div",pe,[f("div",ve,[f("div",ke,[f("div",me,[u(a,{tag:"b"},{default:h(()=>[W(_(y.titles[0]||"左侧列表")+" ("+_(ee.value)+")",1)]),_:1}),u(r,{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=s=>E.value=s),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:h(()=>[u(t,null,{default:h(()=>[u(m(X))]),_:1})]),_:1},8,["modelValue"])]),f("div",ge,[u(i,{ref_key:"leftTreeRef",ref:v,data:R.value,"show-checkbox":"","default-expand-all":"","node-key":"uniqueKey",props:y.treeProps,"filter-node-method":ne,"check-strictly":y.checkStrictly,onCheck:te,"default-checked-keys":S.value,"default-expanded-keys":y.defaultExpandedKeys,"expand-on-click-node":!1,class:w({"tree-disabled":y.disabled})},{default:h(({node:s,data:d})=>[d.disabled?(p(),b(n,{key:0,content:d.disabledTooltip||"无法移动",placement:"top"},{default:h(()=>[f("span",_e,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",{class:w({"node-disabled":d.disabled})},_(s.label),3)])]),_:2},1032,["content"])):(p(),I("span",be,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",null,_(s.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys","class"])])]),f("div",Ke,[u(o,{type:"primary",icon:m(oe),circle:"",size:"default",disabled:K.value.length===0,onClick:re},null,8,["icon","disabled"]),u(o,{type:"primary",icon:m(fe),circle:"",size:"default",disabled:A.value.length===0,onClick:se,style:{"margin-left":"0"}},null,8,["icon","disabled"])]),f("div",Ae,[f("div",Te,[u(a,{tag:"b"},{default:h(()=>[W(_(y.titles[1]||"右侧列表")+" ("+_(le.value)+")",1)]),_:1}),u(r,{modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=s=>D.value=s),placeholder:"输入关键字筛选",size:"default",clearable:"",class:"filter-input"},{prefix:h(()=>[u(t,null,{default:h(()=>[u(m(X))]),_:1})]),_:1},8,["modelValue"])]),f("div",xe,[u(i,{ref_key:"rightTreeRef",ref:k,data:B.value,"show-checkbox":"","default-expand-all":"","node-key":"uniqueKey",props:y.treeProps,"filter-node-method":ce,"check-strictly":y.checkStrictly,onCheck:ae,"default-checked-keys":z.value,"default-expanded-keys":y.defaultExpandedKeys,"expand-on-click-node":!1,class:w({"tree-disabled":y.disabled})},{default:h(({node:s,data:d})=>[d.disabled?(p(),b(n,{key:0,content:d.disabledTooltip||"无法移除",placement:"top"},{default:h(()=>[f("span",Ne,[u(t,{class:"node-icon"},{default:h(()=>[s.childNodes&&s.childNodes.length>0?(p(),b(m(L),{key:0})):(p(),b(m(he),{key:1}))]),_:2},1024),f("span",{class:w({"node-disabled":d.disabled})},_(s.label),3)])]),_:2},1032,["content"])):(p(),I("span",Ce,[s.childNodes&&s.childNodes.length>0?(p(),b(t,{key:0,class:"node-icon"},{default:h(()=>[u(m(L))]),_:1})):$("",!0),f("span",null,_(s.label),1)]))]),_:1},8,["data","props","check-strictly","default-checked-keys","default-expanded-keys","class"])])])])])}}}),we=ye(Ve,[["__scopeId","data-v-e7ccae8a"]]);export{we as T};
>>>>>>>> hz-manager/cmdb_permission:hz-ui/dist/assets/treeTransfer-DY_GUiGZ.js
