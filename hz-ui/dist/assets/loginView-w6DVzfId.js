import{d as k,g as R,r as s,a as g,c as S,b as o,w as t,e as a,o as F,u as B,f as E,h as N,i,j as U,k as $,t as q,_ as I}from"./index-BGjJrjF8.js";import{u as K}from"./config-CmPjqu-X.js";const T={class:"login-container"},j={style:{color:"red"}},A=k({__name:"loginView",setup(D){const{proxy:l}=R(),m=B(),p=K(),w=E();N();const y=s(),V=s(""),v=s(""),b=g({password:[{required:!0,message:"请输入密码",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}]}),c=s("");s("");const r=g({username:"",password:""}),_=()=>{l.$refs.ruleFormRef.validate(async f=>{if(f){let e=await l.$api.login(r);if(console.log(e),e.data.code!=200)c.value=e.data.error;else{m.commit("updateCurrentUsername",r.username),m.commit("addToken",e.data),w.push({name:"main"});let n=await l.$api.getSysConfig({params:"gm"});p.setGmCry(n.data),p.getAppVersion()}}})};return(f,e)=>{const n=a("el-input"),u=a("el-form-item"),x=a("el-button"),C=a("el-form"),h=a("el-card");return F(),S("div",T,[o(h,{class:"box-card"},{header:t(()=>e[2]||(e[2]=[i("div",{class:"card-header"},[i("span",null,"欢迎登录")],-1)])),default:t(()=>[o(C,{model:r,style:{"max-width":"460px"},ref_key:"ruleFormRef",ref:y,rules:b,"label-position":"right","label-width":"80px",onKeyup:U(_,["enter","native"])},{default:t(()=>[o(u,{label:"用户名",prop:"username",error:V.value},{default:t(()=>[o(n,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=d=>r.username=d)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,{label:"密码",prop:"password",error:v.value},{default:t(()=>[o(n,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,null,{default:t(()=>[o(x,{type:"primary",onClick:_,style:{width:"100%"}},{default:t(()=>e[3]||(e[3]=[$("登录")])),_:1})]),_:1})]),_:1},8,["model","rules"]),i("span",j,q(c.value),1)]),_:1})])}}}),M=I(A,[["__scopeId","data-v-4e8a898f"]]);export{M as default};
