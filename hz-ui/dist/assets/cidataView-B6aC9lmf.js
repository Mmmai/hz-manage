import{d as ol,aN as Ge,g as _l,bB as tl,r as i,a as ml,h as p,B as u,o as t,w as e,f as a,b as V,q as f,c as r,k as $,t as C,m as b,ci as Ve,ce as Da,b_ as T,v as q,bP as ea,F as re,i as ge,c0 as Ia,cj as bt,aP as ke,_ as ql,u as Ua,E as al,y as wt,bX as Cl,j as kt,x as Fa,z as Pa,bc as vl,bV as J,ck as ht,cl as Ct,c8 as xt,cg as Ql,cm as Vt,cn as Mt,ca as $t,bM as hl,aa as Ot,aQ as Fe,co as Ma,cp as Dt,cd as $a,cq as Oa,c4 as Zl,l as It,cr as Ut,cs as Ft,ct as Pt}from"./index-CWdEKdsq.js";import{l as Nt}from"./vue-draggable-plus-BNohd0Dm.js";import{c as St}from"./ciDataAudit-BVSdeYkD.js";import{e as Xl,d as Sl}from"./gmCrypto-CqnZf592.js";import{m as Na}from"./model-doa-3kv_.js";import{u as qt}from"./ci-CNUOXV04.js";import"./vue3-json-viewer-DHXfab_Y.js";const Tt={class:"flexJstart gap-1"},jt={key:0,class:"flexJstart gap-1"},Rt={key:3,class:"flexJstart gap-1"},Et=ol({__name:"ciDataUpload",props:Ge(["ciModelId","currentNodeId"],{isShowUpload:{},isShowUploadModifiers:{}}),emits:Ge(["getCiData"],["update:isShowUpload"]),setup(Z,{emit:pe}){const{proxy:H}=_l(),O=Z,A=pe,I=tl(Z,"isShowUpload"),E=i([]),ne=i(null),z=["xlsx"],le=i(10),U=i({}),k=i({}),ye=ml({"Content-Type":"multipart/form-data"}),ee=i({}),ae=async()=>{Object.keys(k.value).length>0?Object.entries(k.value).forEach(async([D,h])=>{let v=await H.$api.importCiDataStatus(h);U.value[D]=v.data,(v.data.status==="completed"||v.data.status==="failed")&&delete k.value[D]}):(clearInterval(te),te=null,A("getCiData",{model:O.ciModelId,model_instance_group:O.currentNodeId}))};let te=null;const K=async D=>{let h=new FormData;h.append("file",D.file),h.append("model",O.ciModelId);let v=await H.$api.importCiData(h,ye,2*60*1e3);v.status==200?(k.value[D.file.uid]=v.data,ee.value[D.file.uid]=!0,te===null&&(te=setInterval(ae,2e3))):(ee.value[D.file.uid]=!1,T({message:`导入异常: ${JSON.stringify(v.data)}`,type:"error",showClose:!0}))},ie=()=>{},be=D=>{let h=D.name;if(D.type!=""||D.type!=null||D.type!=null){const v=D.name.replace(/.+\./,"").toLowerCase();return D.size/1024/1024<100?z.includes(v)?E.value.find(oe=>oe.name==h&&oe.lastModified==D.lastModified)?(T({type:"error",message:"该文件已上传！",showClose:!0}),!1):!0:(T({message:`不能上传${v}类型的文件`,type:"error",showClose:!0}),!1):(T.error("上传文件大小不能超过 100MB!"),!1)}},Me=async D=>{await H.$api.downloadErrorRecords({error_file_key:D})},j=async()=>{await H.$api.downloadImportTemplate({model:O.ciModelId})};return(D,h)=>{const v=p("upload-filled"),g=p("el-icon"),B=p("el-col"),oe=p("el-button"),he=p("el-row"),we=p("Loading"),De=p("CircleCheck"),W=p("el-link"),fe=p("el-upload"),se=p("el-dialog");return t(),u(se,{modelValue:I.value,"onUpdate:modelValue":h[1]||(h[1]=N=>I.value=N),title:"导入",width:"800"},{default:e(()=>[a(fe,{class:"upload-demo",drag:"",action:"",ref_key:"refUpload",ref:ne,headers:ye,"http-request":K,"file-list":E.value,"before-upload":be,limit:le.value,onOnChange:ie,"show-file-list":""},{tip:e(()=>[a(he,{justify:"space-between",align:"middle"},{default:e(()=>[a(B,{span:18},{default:e(()=>[...h[2]||(h[2]=[V("div",null,"只支持从此系统下载的模板导入，请按右侧按钮下载模板!",-1)])]),_:1}),a(B,{span:3},{default:e(()=>[a(oe,{link:"",type:"primary",onClick:h[0]||(h[0]=N=>j())},{default:e(()=>[...h[3]||(h[3]=[f("点击下载模板",-1)])]),_:1})]),_:1})]),_:1})]),file:e(({file:N,index:je})=>{var Re,Ee,P,Pe,R,nl,sl,ul,We;return[V("div",Tt,[V("span",null,C(N.name),1),ee.value[N.uid]==!0?(t(),r("div",jt,[((Re=U.value[N.uid])==null?void 0:Re.status)!=="completed"?(t(),u(g,{key:0,class:"is-loading"},{default:e(()=>[a(we)]),_:1})):((Ee=U.value[N.uid])==null?void 0:Ee.failed)>>>0?(t(),u(g,{key:1},{default:e(()=>[a(b(Ve),{color:"var(--el-color-warning)"})]),_:1})):(t(),u(g,{key:2},{default:e(()=>[a(De,{color:"var(--el-color-success)"})]),_:1})),U.value[N.uid]?(t(),r("div",Rt,[V("span",null,C(`进度: ${(P=U.value[N.uid])==null?void 0:P.progress}%`),1),V("span",null,C(`结果: 总条数: ${(Pe=U.value[N.uid])==null?void 0:Pe.total},创建: ${(R=U.value[N.uid])==null?void 0:R.created},更新: ${(nl=U.value[N.uid])==null?void 0:nl.updated},跳过: ${(sl=U.value[N.uid])==null?void 0:sl.skipped},失败: ${(ul=U.value[N.uid])==null?void 0:ul.failed}.`),1),((We=U.value[N.uid])==null?void 0:We.failed)>>>0?(t(),u(W,{key:0,type:"danger",onClick:dl=>{var rl;return Me((rl=U.value[N.uid])==null?void 0:rl.error_file_key)}},{default:e(()=>[...h[4]||(h[4]=[f("查看导入失败数据",-1)])]),_:1},8,["onClick"])):$("",!0)])):$("",!0)])):ee.value[N.uid]==!1?(t(),u(g,{key:1},{default:e(()=>[a(b(Da),{color:"var(--el-color-error)"})]),_:1})):$("",!0)])]}),default:e(()=>[a(g,{class:"el-icon--upload"},{default:e(()=>[a(v)]),_:1}),h[5]||(h[5]=V("div",{class:"el-upload__text"},[f("拖拽文件到此或者 "),V("em",null,"点击上传文件")],-1))]),_:1},8,["headers","file-list","limit"])]),_:1},8,["modelValue"])}}}),At={style:{display:"flex","justify-content":"space-around",gap:"20px",height:"100%"}},Lt={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},zt={style:{width:"100%",overflow:"auto"}},Yt={class:"listItem"},Bt={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},Jt={class:"listItem"},Kt={style:{flex:"auto"}},Ht=ol({__name:"ciDataTableCol",props:Ge(["ciModelId","allModelFieldInfo","allModelField"],{isShowTableCol:{},isShowTableColModifiers:{},hasConfigField:{},hasConfigFieldModifiers:{}}),emits:Ge(["reloadTable"],["update:isShowTableCol","update:hasConfigField"]),setup(Z,{expose:pe,emit:H}){const O=Z,A=tl(Z,"isShowTableCol"),I=tl(Z,"hasConfigField"),{proxy:E}=_l(),ne=i(""),z=i(""),le=q(()=>ne.value===""?D.value:D.value.filter(h=>h.verbose_name.includes(ne.value)));function U(){A.value=!1}const k=h=>{I.value.push(h)},ye=h=>{let v=I.value.indexOf(h);I.value.splice(v,1)},ee=h=>{console.log("start",h)},ae=h=>{console.log("onEnd",h),console.log(I.value)},te=()=>{console.log("update")},K=i({}),ie=async()=>{let h=await E.$api.getCiModelCol({model:O.ciModelId});K.value=h.data;let v=[];h.data.fields_preferred.forEach(g=>{Object.keys(O.allModelFieldInfo).includes(g)&&v.push(O.allModelFieldInfo[g])}),I.value=v},be=q(()=>I.value.map(h=>h.id)),Me=H;ea(()=>I.value,h=>{console.log("更新表格"),Me("reloadTable")},{deep:!0});const j=async()=>{let h=await E.$api.updateCiModelCol({id:K.value.id,fields_preferred:be.value});h.status=="200"?(T({type:"success",message:"更新成功"}),ke(()=>{z.value.clear(),A.value=!1})):T({showClose:!0,message:"更新失败:"+JSON.stringify(h.data),type:"error"})},D=q(()=>O.allModelField.filter(h=>!I.value.includes(h)));return pe({getHasConfigField:ie}),(h,v)=>{const g=p("el-text"),B=p("el-divider"),oe=p("el-input"),he=p("el-icon"),we=p("el-button"),De=p("el-drawer");return t(),u(De,{modelValue:A.value,"onUpdate:modelValue":v[2]||(v[2]=W=>A.value=W),direction:"rtl",size:"40%"},{header:e(()=>[a(g,{tag:"b"},{default:e(()=>[...v[3]||(v[3]=[f("表格列显示配置",-1)])]),_:1})]),default:e(()=>[V("div",At,[V("div",Lt,[a(g,{tag:"b"},{default:e(()=>[...v[4]||(v[4]=[f("模型字段",-1)])]),_:1}),a(B),a(oe,{modelValue:ne.value,"onUpdate:modelValue":v[0]||(v[0]=W=>ne.value=W),style:{width:"100%","margin-bottom":"10px"},placeholder:"筛选字段名称",clearable:"",ref_key:"filterInputRef",ref:z},null,8,["modelValue"]),V("div",zt,[(t(!0),r(re,null,ge(le.value,(W,fe)=>(t(),r("div",{key:fe},[V("div",Yt,[V("span",null,C(W.verbose_name),1),a(he,null,{default:e(()=>[a(b(Ia),{onClick:se=>k(W)},null,8,["onClick"])]),_:2},1024)])]))),128))])]),V("div",Bt,[a(g,{tag:"b"},{default:e(()=>[...v[5]||(v[5]=[f("已显示字段",-1)])]),_:1}),a(B),a(b(Nt),{"force-fallback":!0,"scroll-sensitivity":200,ref:"el",modelValue:I.value,"onUpdate:modelValue":v[1]||(v[1]=W=>I.value=W),onStart:ee,onUpdate:te,onEnd:ae,style:{width:"100%",overflow:"auto"}},{default:e(()=>[(t(!0),r(re,null,ge(I.value,(W,fe)=>(t(),r("div",{key:fe},[V("div",Jt,[V("span",null,C(W.verbose_name),1),a(he,null,{default:e(()=>[a(b(bt),{onClick:se=>ye(W)},null,8,["onClick"])]),_:2},1024)])]))),128))]),_:1},8,["modelValue"])])])]),footer:e(()=>[V("div",Kt,[a(we,{onClick:U},{default:e(()=>[...v[6]||(v[6]=[f("取消",-1)])]),_:1}),a(we,{type:"primary",onClick:j},{default:e(()=>[...v[7]||(v[7]=[f("保存",-1)])]),_:1})])]),_:1},8,["modelValue"])}}}),Gt=ql(Ht,[["__scopeId","data-v-3fb13dee"]]),Wt={class:"dialog-footer"},Qt=ol({__name:"ciDataShowPass",props:{showAllPassDia:{},showAllPassDiaModifiers:{}},emits:["update:showAllPassDia"],setup(Z){const pe=Ua(),H=tl(Z,"showAllPassDia"),O=q(()=>pe.gmCry),A=i(),I=ml({secret:null,time:3});i(""),i(!1);const E=async le=>{le.validate(async U=>{U&&(I.secret===O.value.key?(al({title:"操作成功",message:"解密成功,"+I.time+"分钟后过期！",type:"success",duration:2e3}),pe.updateShowAllPass(!0),H.value=!1,pe.setShowAllPassTime(I.time*60*1e3),ne(A.value)):al({title:"操作失败",message:"密钥错误",type:"warning",duration:2e3}))})},ne=le=>{le&&le.resetFields()},z=()=>{H.value=!1,ne(A.value)};return(le,U)=>{const k=p("el-input"),ye=p("el-form-item"),ee=p("el-input-number"),ae=p("el-form"),te=p("el-button"),K=p("el-dialog");return t(),u(K,{modelValue:H.value,"onUpdate:modelValue":U[3]||(U[3]=ie=>H.value=ie),title:"查看密码",width:"400"},{footer:e(()=>[V("div",Wt,[a(te,{onClick:z},{default:e(()=>[...U[5]||(U[5]=[f("取消",-1)])]),_:1}),a(te,{type:"primary",onClick:U[2]||(U[2]=ie=>E(A.value))},{default:e(()=>[...U[6]||(U[6]=[f(" 查看 ",-1)])]),_:1})])]),default:e(()=>[a(ae,{ref_key:"allPassFormRef",ref:A,inline:!0,model:I,"require-asterisk-position":"right","label-position":"left"},{default:e(()=>[a(ye,{label:"密钥",prop:"secret",rules:[{required:!0,message:"输入密钥",trigger:"blur"}]},{default:e(()=>[a(k,{type:"password",modelValue:I.secret,"onUpdate:modelValue":U[0]||(U[0]=ie=>I.secret=ie),"show-password":"",placeholder:"输入密钥查看密码",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),a(ye,{label:"有效时间",prop:"time"},{default:e(()=>[a(ee,{modelValue:I.time,"onUpdate:modelValue":U[1]||(U[1]=ie=>I.time=ie),min:1,step:1,max:30},{suffix:e(()=>[...U[4]||(U[4]=[V("span",null,"分钟",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Xt={style:{display:"flex","justify-content":"center"}},Zt=ol({__name:"ciDataqCode",props:Ge(["qCodeContext"],{showqCodeDia:{},showqCodeDiaModifiers:{}}),emits:["update:showqCodeDia"],setup(Z){const{proxy:pe}=_l();wt();const H=tl(Z,"showqCodeDia"),O=Z;return(A,I)=>{const E=p("a-qrcode"),ne=p("el-dialog");return t(),u(ne,{modelValue:H.value,"onUpdate:modelValue":I[0]||(I[0]=z=>H.value=z),title:"实例二维码",width:"600"},{default:e(()=>[V("div",Xt,[a(E,{value:JSON.stringify(O.qCodeContext),size:500},null,8,["value"])])]),_:1},8,["modelValue"])}}}),eo={style:{display:"flex","justify-content":"space-around",gap:"20px",height:"100%"}},lo={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},ao={style:{width:"100%",overflow:"auto"}},to={class:"listItem"},oo={class:"card",style:{flex:"1",display:"flex","flex-direction":"column"}},no={style:{"margin-right":"5px"}},so={style:{float:"left"}},uo={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},ro={key:0},io={key:1},co={key:0},po={key:1},fo={key:2},vo={key:3},mo={style:{flex:"auto"}},_o=ol({__name:"ciDataFilter",props:Ge(["ciModelId","currentNodeId","allModelField","allModelFieldByNameObj","enumOptionObj","validationRulesObj","modelRefOptions"],{showFilter:{},showFilterModifiers:{}}),emits:Ge(["getCiData","updateFilterParam"],["update:showFilter"]),setup(Z,{expose:pe,emit:H}){const O=Z,A=tl(Z,"showFilter"),I=i(""),E=i(""),ne=q(()=>I.value===""?ee.value:ee.value.filter(v=>v.verbose_name.includes(I.value))),{proxy:z}=_l();function le(){A.value=!1}const U=v=>{be.value.push(v)},k=v=>{let g=K.filterParams.indexOf(v);be.value.splice(g,1)},ye=(v,g)=>{v==="instance_name"?K.instance_name="":be.value.splice(g,1),ke(()=>{ae("updateFilterParam",Me.value)})},ee=q(()=>O.allModelField.filter(v=>!be.value.includes(v)));i({});const ae=H,te=i(""),K=ml({filterParams:[],instance_name:""}),ie=i([{value:"=",label:"等于",description:"等于"},{value:"not:",label:"不等于",description:"不等于"},{value:"like:",label:"模糊匹配",description:"模糊匹配"},{value:"not:like:",label:"反向模糊",description:"反向模糊匹配"},{value:"in:",label:"在列表",description:"以,分隔"},{value:"not:in:",label:"不在列表",description:"以,分隔"},{value:"regex:",label:"正则",description:"正则表达式"},{value:"null",label:"空",description:"正则表达式"},{value:"not:null",label:"非空",description:"正则表达式"}]),be=i([]),Me=q(()=>{let v=new Object;return K.filterParams.forEach(g=>{if(g.match==="null"||g.match==="not:null"){v[g.name]=g.match;return}if(g.value!==""){let B=null;g.value!==null?B=g.value:B="null",g.match==="="?v[g.name]=B:v[g.name]=g.match+B}}),K.instance_name!==""&&(v.instance_name=K.instance_name),v}),j=()=>{console.log(Me.value),ae("updateFilterParam",Me.value),console.log(Me.value),ke(()=>{ae("getCiData",{model:O.ciModelId,model_instance_group:O.currentNodeId})}),A.value=!1},D=q(()=>{var v;return(v=K.filterParams)==null?void 0:v.map(g=>g.name)});ea(()=>be.value,v=>{var B;let g=new Array;(B=be.value)==null||B.forEach((oe,he)=>{var we;if(((we=D.value)==null?void 0:we.indexOf(oe.name))>>>-1)g.push({name:oe.name,value:"",match:"=",label:oe.verbose_name});else{let De=K.filterParams.findIndex(W=>W.name===oe.name);g.push(K.filterParams[De])}}),K.filterParams=g},{deep:!0});const h=v=>{v&&(v.resetFields(),ae("updateFilterParam",Me.value),ke(()=>{ae("getCiData",{model:O.ciModelId,model_instance_group:O.currentNodeId})}))};return pe({removeFilterParam:ye}),(v,g)=>{const B=p("el-text"),oe=p("el-divider"),he=p("el-input"),we=p("el-icon"),De=p("el-form-item"),W=p("el-button"),fe=p("el-option"),se=p("el-select"),N=p("el-switch"),je=p("el-space"),Re=p("el-form"),Ee=p("el-drawer");return t(),u(Ee,{modelValue:A.value,"onUpdate:modelValue":g[4]||(g[4]=P=>A.value=P),direction:"rtl",size:"50%","before-close":le},{header:e(()=>[a(B,{tag:"b"},{default:e(()=>[...g[5]||(g[5]=[f("筛选",-1)])]),_:1})]),default:e(()=>[V("div",eo,[V("div",lo,[a(B,{tag:"b"},{default:e(()=>[...g[6]||(g[6]=[f("模型字段",-1)])]),_:1}),a(oe),a(he,{modelValue:I.value,"onUpdate:modelValue":g[0]||(g[0]=P=>I.value=P),style:{width:"100%","margin-bottom":"10px"},placeholder:"筛选字段名称",clearable:"",ref_key:"filterInputRef",ref:E},null,8,["modelValue"]),V("div",ao,[(t(!0),r(re,null,ge(ne.value,(P,Pe)=>(t(),r("div",{key:Pe},[V("div",to,[V("span",null,C(P.verbose_name),1),a(we,null,{default:e(()=>[a(b(Ia),{onClick:R=>U(P)},null,8,["onClick"])]),_:2},1024)])]))),128))])]),V("div",oo,[a(B,{tag:"b"},{default:e(()=>[...g[7]||(g[7]=[f("过滤器",-1)])]),_:1}),a(oe),a(Re,{ref_key:"filterFormRef",ref:te,model:K,"label-width":"auto",style:{width:"100%"},"label-position":"top"},{default:e(()=>[a(je,{wrap:""},{default:e(()=>[a(De,{label:"唯一标识",prop:"instance_name"},{default:e(()=>[a(he,{modelValue:K.instance_name,"onUpdate:modelValue":g[1]||(g[1]=P=>K.instance_name=P),type:"textarea",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),(t(!0),r(re,null,ge(K.filterParams,(P,Pe)=>(t(),u(De,{key:P.index,prop:"filterParams."+Pe+".value"},{label:e(()=>[V("span",no,C(P.label),1),a(W,{icon:b(Da),size:"small",circle:"",onClick:Cl(R=>k(P),["prevent"])},null,8,["icon","onClick"])]),default:e(()=>[a(je,null,{default:e(()=>[a(se,{modelValue:P.match,"onUpdate:modelValue":R=>P.match=R,placeholder:"匹配方式",style:{"max-width":"100px",width:"120px"}},{default:e(()=>[(t(!0),r(re,null,ge(ie.value,R=>(t(),u(fe,{key:R.value,label:R.label,value:R.value},{default:e(()=>[V("span",so,C(R.label),1),V("span",uo,C(R.description),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"]),P.match==="null"||P.match==="not:null"?(t(),r("div",ro)):(t(),r("div",io,[["enum"].indexOf(O.allModelFieldByNameObj[P.name].type)>>>-1?["model_ref"].indexOf(O.allModelFieldByNameObj[P.name].type)>>>-1?["boolean"].indexOf(O.allModelFieldByNameObj[P.name].type)>>>-1?(t(),r("div",vo,[a(he,{modelValue:P.value,"onUpdate:modelValue":R=>P.value=R,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",fo,[a(N,{modelValue:P.value,"onUpdate:modelValue":R=>P.value=R,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",po,[a(se,{modelValue:P.value,"onUpdate:modelValue":R=>P.value=R,placeholder:"请选择",style:{width:"180px"}},{default:e(()=>[(t(!0),r(re,null,ge(O.modelRefOptions[P.name],R=>(t(),u(fe,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):(t(),r("div",co,[a(se,{modelValue:P.value,"onUpdate:modelValue":R=>P.value=R,placeholder:"请选择",style:{width:"180px"}},{default:e(()=>[(t(!0),r(re,null,ge(O.enumOptionObj[O.allModelFieldByNameObj[P.name].validation_rule],R=>(t(),u(fe,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]))]))]),_:2},1024)]),_:2},1032,["prop"]))),128))]),_:1})]),_:1},8,["model"])])])]),footer:e(()=>[V("div",mo,[a(W,{onClick:g[2]||(g[2]=P=>h(te.value))},{default:e(()=>[...g[8]||(g[8]=[f("重置",-1)])]),_:1}),a(W,{onClick:g[3]||(g[3]=P=>j()),type:"primary"},{default:e(()=>[...g[9]||(g[9]=[f("搜索",-1)])]),_:1})])]),_:1},8,["modelValue"])}}}),go=ql(_o,[["__scopeId","data-v-8bcd5a33"]]),yo={key:0,class:"card table-main",style:{width:"100%",flex:"1"}},bo={class:"table-header"},wo={class:"header-button-lf"},ko={class:"header-button-ri"},ho={class:"flexJstart gap-1",style:{overflow:"auto"}},Co={key:0},xo={key:1},Vo={key:0},Mo={key:1},$o={class:"text_class"},Oo={key:0,class:"text_class"},Do={key:1},Io={style:{display:"flex","justify-content":"space-between",width:"100%"}},Uo={style:{display:"flex","justify-content":"space-between"}},Fo={key:1,class:"requiredClass"},Po={key:0},No={key:0},So={key:1},qo={key:0},To={key:1},jo={key:0},Ro={key:1},Eo={key:0},Ao={key:1},Lo={key:0},zo={key:0},Yo={key:0},Bo={key:1},Jo={key:0},Ko={key:1},Ho={key:0},Go={key:1},Wo={key:0},Qo={key:1},Xo={key:0},Zo={key:1},en={key:0},ln={key:1},an={style:{flex:"auto"},class:"footerButtonClass"},tn={key:0},on={key:1},nn={key:0},sn={key:1},un={key:0},dn={key:0},rn={key:1},cn={key:2},pn={key:3},fn={key:4},vn={key:5},mn={key:6},_n={key:7},gn={key:8},yn={key:9},bn={key:10},wn={class:"dialog-footer"},kn={class:"dialog-footer"},hn=ol({__name:"ciDataShow",props:Ge(["ciModelId","treeData","currentNodeId"],{showTree:{},showTreeModifiers:{}}),emits:Ge(["getTree","show-info"],["update:showTree"]),setup(Z,{expose:pe,emit:H}){const{proxy:O}=_l(),A=Ua(),I=Na();q(()=>I.modelObjectByName);const E=q(()=>I.allModelCiDataTreeObj),ne=kt(),z=Fa(),le=H,U=i(""),k=Z,ye=tl(Z,"showTree"),ee=i([0]),ae=i(!1),te=()=>{ae.value=!0},K=i(!0),ie=()=>{K.value=!1,ke(()=>{K.value=!0})},be=i(""),Me=()=>{ae.value=!1},j=i(!1),D=q(()=>A.gmCry),h=q(()=>A.showAllPass),v=q(()=>A.showAllPassTime),g=async()=>{j.value=!0},B=()=>{A.updateShowAllPass(!1),al({title:"操作成功",message:"密码到期已自动屏蔽",type:"success",duration:2e3})},oe=s=>{A.setShowAllPassTime(s.totalMilliseconds)},he=()=>{j.value=!1,A.updateShowAllPass(!1),A.setShowAllPassTime(0),al({title:"success",message:"密码已屏蔽",type:"success",duration:2e3})},we=i(!1),De=()=>{N.value=!1,He(W.value[0]),se.value=""},W=i(),fe=ml({secret:null}),se=i(""),N=i(!1),je=async(s,l)=>{s[0].validate(async d=>{d&&(fe.secret===D.value.key?(se.value=Sl(D.value.key,D.value.mode,l),N.value=!0):(al({title:"Warning",message:"密钥错误",type:"warning",duration:2e3}),N.value=!1,se.value=""))})},Re=i(1),Ee=i(10),P=i("default"),Pe=i(!1),R=()=>{$e({model:k.ciModelId,model_instance_group:k.currentNodeId})},nl=()=>{$e({model:k.ciModelId,model_instance_group:k.currentNodeId})},sl=q(()=>Il.value.map(s=>s.name)),ul=q(()=>wl.value.map(s=>s.name)),We=i(!1),dl=q(()=>ve.value?{all:!0,group:k.currentNodeId,params:cl.value}:{group:k.currentNodeId,params:cl.value}),rl=async()=>{let s=new Object;ve.value?s={...dl.value}:s={instances:de.value},Ol.value=!0;let l=await O.$api.bulkDeleteCiModelInstance(s,60*1e3);console.log(l),l.status=="200"?(T({type:"success",message:"删除成功"}),bl.value.clearSelection(),await $e({model:k.ciModelId,model_instance_group:k.currentNodeId}),setTimeout(()=>{le("getTree")},2e3)):T({type:"error",message:`删除失败:${JSON.stringify(l.data)}`}),Ol.value=!1},xl=async s=>{s?await O.$api.exportCiData({model:k.ciModelId,fields:ul.value,instances:de.value}):await O.$api.exportCiData({model:k.ciModelId,fields:sl.value,instances:de.value})},Tl=async()=>{console.log(dl.value);let s=await O.$api.exportCiData({all:!0,model:k.ciModelId,group:k.currentNodeId,params:cl.value});console.log(s)},w={multiple:!0,value:"id"},_=i(!1),S=i([]),Je=q(()=>k.treeData[0].children[0].id),Ke=q(()=>k.treeData[0].id),Vl=async()=>{var y;let s=[];(y=S.value)==null||y.forEach(M=>{s.push(M[M.length-1])});let l=new Object;ve.value?l={all:!0,groups:s,instances:[]}:l={instances:de.value,groups:s};let d=await O.$api.setCiDataToTree(l);d.status=="201"?(T({type:"success",message:"更新成功"}),$e({model:k.ciModelId,model_instance_group:k.currentNodeId}),aa(),le("getTree"),await I.getModelTreeInstance(k.ciModelId)):T({showClose:!0,message:"更新失败:"+JSON.stringify(d.data),type:"error"}),S.value=[],_.value=!1},il=i(""),Xe=i(!1),Y=i({}),Qe=(s,l)=>{s?x.updateParams[l]="null":x.updateParams[l]=null},gl=()=>{Xe.value=!0};i(!1);const jl=s=>{var l;if(s!==void 0&&((l=Le.value[s])==null?void 0:l.field_type)==="string")return s==""||s==null?void 0:[{pattern:new RegExp(Le.value[s].rule),message:"不符合正则表达式",trigger:"blur"}]};q(()=>{var l,d;let s={};return(d=(l=Ae.value)==null?void 0:l.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{var F;M.type==="string"&&M.validation_rule!==""&&M.validation_rule!==null&&(s["updateParams."+M.name]=[{pattern:new RegExp((F=Le.value[M.validation_rule])==null?void 0:F.rule),message:"不符合正则表达式",trigger:"blur"}])})}),s});const x=ml({updateParams:{}}),ue=i([]),Ml=()=>{const s=Object.keys(x.updateParams).length,l=`__temp_param_${s}`;ue.value[s]=l,x.updateParams[l]=""},Ie=(s,l)=>{console.log(l),l==="using_template"?x.updateParams[l]=!0:x.updateParams[l]=void 0,delete x.updateParams[ue.value[s]],ue.value[s]=l},$l=(s,l)=>{ue.value.splice(s,1),delete Y.value[l],delete x.updateParams[l]},Ne=q(()=>{let s=new Object;for(let[l,d]of Object.entries(x.updateParams))d==="null"?s[l]=null:s[l]=d,Ue.value.password.indexOf(l)!==-1&&(s[l]=Xl(D.value.key,D.value.mode,d));return s});i(!1);const Sa=()=>{il.value.validate(async s=>{if(s){let l=null;console.log("111",JSON.stringify(Ne.value.using_template)),"using_template"in Ne.value&&(l=Ne.value.using_template,delete Ne.value.using_template,console.log("111",JSON.stringify(Ne.value)));let d=new Object;ve.value?d={fields:Ne.value,model:k.ciModelId,...dl.value,using_template:Ne.value}:d={instances:de.value,fields:Ne.value},l!==null&&(d.using_template=l);const y=Oa.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});let M=await O.$api.multipleUpdateCiModelInstance(d);M.status=="200"?(T({type:"success",message:"更新成功"}),$e({model:k.ciModelId,model_instance_group:k.currentNodeId}),x.updateParams={},Y.value={},ue.value=[],Xe.value=!1):T({showClose:!0,message:"更新失败:"+JSON.stringify(M.data),type:"error"}),ke(()=>y.close())}else T({showClose:!0,message:"请输入正确内容.",type:"error"})})},qa=q(()=>{var l,d;let s=[{value:"using_template",label:"自动命名",disabled:!1}];return(d=(l=Ae.value)==null?void 0:l.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{let F=!1;M.name in x.updateParams&&(F=!0),s.push({value:M.name,label:M.verbose_name,disable:F})})}),s}),la=()=>{Xe.value=!1,x.updateParams={},Y.value={},ue.value=[]},Ol=i(!0),yl=s=>{Ol.value=s},Dl=i(!0),Q=i(!1),Rl=i(!1),Ta=()=>{Rl.value=!0},ja=async s=>{yl(!0);let l=await O.$api.updateCiModelInstance({...s});l.status=="200"?(T({type:"success",message:"更新成功"}),Oe.value=!1,He(Ze.value),await $e({model:k.ciModelId,model_instance_group:k.currentNodeId})):T({showClose:!0,message:"更新失败:"+JSON.stringify(l.data),type:"error"})},Ra=s=>!ve.value,bl=i(null),Ea=s=>s.id,de=i([]),Aa=s=>{de.value=s.map(l=>l.id)},ve=i(!1),La=s=>{s?de.value.length===0&&bl.value.toggleAllSelection():(de.value=[],bl.value.clearSelection()),console.log(de.value)},aa=()=>{de.value=[],bl.value.clearSelection()},Il=i([]),Ae=i({}),za=q(()=>{var l,d;let s={};return(d=(l=Ae.value)==null?void 0:l.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{s[M.id]=M})}),s}),ce=q(()=>{var l,d;let s={};return(d=(l=Ae.value)==null?void 0:l.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{s[M.name]=M})}),s}),ta=i(""),Ya=()=>{ta.value.getHasConfigField()},oa=()=>{Dl.value=!1,ke(()=>{Dl.value=!0})},na=s=>s.filter(d=>d.group_id===Je.value).length>>0,Le=i({});i({});const Ba=async(s=null)=>{(await O.$api.getValidationRules({...s,page:1,page_size:1e4})).data.results.forEach(d=>{Le.value[d.id]=d})},El=q(()=>{var l,d;let s={};return(d=(l=Ae.value)==null?void 0:l.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{if(M.type==="enum"){if(M.validation_rule===null)return;let F=JSON.parse(Le==null?void 0:Le.value[M==null?void 0:M.validation_rule].rule),Ye=[];Object.keys(F).forEach(el=>{Ye.push({value:el,label:F[el]})}),s[M.validation_rule]=Ye}})}),s}),sa=q(()=>{let s={};return Ae.value.field_groups.forEach(l=>{l.fields.forEach(d=>{if(d.type==="enum"){let y=JSON.parse(Le.value[d.validation_rule].rule),M={};Object.keys(y).forEach(F=>{M[F]=y[F]}),s[d.name]=M}})}),s}),ua=i({}),Ja=q(()=>{let s=new Object;for(let[l,d]of Object.entries(ua.value)){let y=new Object;d==null||d.forEach(M=>{y[M.value]=M}),s[l]=y}return s}),Ka=s=>{if(!(s==""||s==null))return[{pattern:new RegExp(Le.value[s].rule),message:"不符合正则表达式",trigger:"blur"}]},Ha=()=>{for(const[s,l]of Object.entries(m))["instance_name","using_template"].indexOf(s)===-1&&delete m[s];Ae.value.field_groups.forEach(s=>{s.fields.forEach(l=>{m[l.name]=l.default})}),m.instance_name=null},wl=i([]),Ga=async()=>{var d;let s=await O.$api.getCiModel({},k.ciModelId);Ae.value=s.data;let l=[];(d=Ae.value.field_groups)==null||d.forEach(y=>{y.fields.forEach(M=>{l.push(M)})}),wl.value=l},Ue=q(()=>{let s={enum:[],boolean:[],model_ref:[],password:[]};return wl.value.forEach(l=>{l.type==="enum"?s.enum.push(l.name):l.type==="boolean"?s.boolean.push(l.name):l.type==="model_ref"?s.model_ref.push(l.name):l.type==="password"&&s.password.push(l.name)}),s}),da=i([]),Al=i(0),cl=i({}),ra=s=>{cl.value=s},ia=q(()=>{let s=new Array;for(let[l,d]of Object.entries(cl.value))console.log(),l==="instance_name"?s.push({name:"唯一标识:"+d,field:l}):Ue.value.model_ref.indexOf(l)!==-1?s.push({name:ce.value[l].verbose_name+":"+Ja.value[l][d].label,field:l}):Ue.value.enum.indexOf(l)!==-1?(console.log(sa.value),s.push({name:ce.value[l].verbose_name+":"+sa.value[l][d],field:l})):s.push({name:ce.value[l].verbose_name+":"+d,field:l});return s}),Wa=async(s,l)=>{await be.value.removeFilterParam(s,l),ke(()=>{$e({model:k.ciModelId,model_instance_group:k.currentNodeId})})},$e=async s=>{var y;yl(!0);let l=new Array,d=await O.$api.getCiModelInstance({...s,page:Re.value,page_size:Ee.value,...cl.value});Al.value=d.data.count,(y=d.data.results)==null||y.forEach(M=>{l.push({id:M.id,instance_group:M.instance_group,instance_name:M.instance_name,...M.fields})}),da.value=l,ke(()=>{ve.value=!1,yl(!1)})};Pa(async()=>{Dl.value=!0,await Ba(),yl(!1)});const Oe=i(!1),Qa=()=>{console.log("addCiData",JSON.stringify(m)),Q.value=!0,Oe.value=!0,ze.value=!0},Se=i({}),ca=i({}),pa=s=>{ne.push({path:z.path+"/"+s.id})},fa=i(!1),Xa=s=>{Oe.value=!0,fa.value=!0,ze.value=!0,Q.value=!0,Se.value=s,ke(()=>{Object.keys(s).forEach(l=>{l==="id"||l==="instance_group"||(Ue.value.model_ref.indexOf(l)!==-1?(console.log(l),console.log(123,s[l]),s[l]!==null?m[l]=s[l].id:m[l]=s[l]):Ue.value.enum.indexOf(l)!==-1?m[l]=s[l].value:Ue.value.password.indexOf(l)!==-1?h.value?m[l]=Sl(D.value.key,D.value.mode,s[l]):m[l]=null:m[l]=s[l])}),console.log("ddd",m)}),al({title:"Warning",message:"复制实例，请修改后再提交",type:"warning",duration:2e3})},Za=s=>!(ze.value||fa.value||s),Ze=i(),m=ml({instance_name:null,using_template:!0}),et=q(()=>{let s=Object.assign({},m);delete s.instance_name,delete s.using_template;for(let[l,d]of Object.entries(s))d===null||d===""||Ue.value.password.indexOf(l)!==-1&&(s[l]=Xl(D.value.key,D.value.mode,d));return s}),va=q(()=>{let s=Object.assign({},pl.value);delete s.instance_name;for(let[l,d]of Object.entries(pl.value))d===null||d===""||Ue.value.password.indexOf(l)!==-1&&(s[l]=Xl(D.value.key,D.value.mode,d));return s}),ze=i(!0),pl=i({}),ma=async(s,l=null)=>{s&&await s.validate(async(d,y)=>{if(d){const M=Oa.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});if(ze.value){let F=await O.$api.addCiModelInstance({model:k.ciModelId,fields:et.value,instance_name:m.instance_name,using_template:m.using_template,instance_group:[k.currentNodeId]});F.status=="201"?(T({type:"success",message:"添加成功"}),Oe.value=!1,He(s),await $e({model:k.ciModelId,model_instance_group:k.currentNodeId}),le("getTree"),I.getModelTreeInstance(k.ciModelId)):T({showClose:!0,message:"添加失败:"+JSON.stringify(F.data),type:"error"}),M.close()}else{if(JSON.stringify(ca.value)===JSON.stringify(m)){Q.value=!1,Oe.value=!1,He(s),T({showClose:!0,message:"无更新,关闭窗口",type:"info"}),setTimeout(()=>{M.close()},200);return}else{const el=Object.entries(ca.value),Yl=Object.entries(m),Bl=el.concat(Yl).map(qe=>JSON.stringify(qe)),G=Array.from(new Set(Bl)).map(qe=>JSON.parse(qe));G.splice(0,el.length);const Fl=Object.fromEntries(G);let ll={};if(Object.keys(Fl).forEach(qe=>{ll[qe]=Fl[qe]}),pl.value=ll,Object.keys(pl.value).length===0){Q.value=!1,Oe.value=!1,He(s),T({showClose:!0,message:"无更新,关闭窗口",type:"info"});return}}let F={id:Se.value.id,model:k.ciModelId};Object.keys(pl.value).indexOf("instance_name")===-1||(F.instance_name=pl.value.instance_name),F.fields=va.value;let Ye=await O.$api.updateCiModelInstance(F);Ye.status=="200"?(T({type:"success",message:"更新成功"}),Oe.value=!1,Q.value=!1,He(s),await $e({model:k.ciModelId,model_instance_group:k.currentNodeId})):T({showClose:!0,message:"更新失败:"+JSON.stringify(Ye.data),type:"error"}),setTimeout(()=>{M.close()},200)}}else al({title:"表单校验",message:"表单填写异常",type:"error"})})},lt=s=>{if(Q.value==!1&&ze.value==!1){Oe.value=!1;return}Zl.confirm("是否确认关闭?").then(()=>{s(),He(Ze.value),Oe.value=!1,Q.value=!1}).catch(()=>{})},at=s=>{He(s),Oe.value=!1,Q.value=!1},Ll=(s=null)=>{Zl.confirm("是否确认删除?","实例删除",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning",draggable:!0}).then(async()=>{(await O.$api.deleteCiModelInstance(s)).status==204?(T({type:"success",message:"删除成功"}),await $e({model:k.ciModelId,model_instance_group:k.currentNodeId}),He(Ze.value),Oe.value=!1,Q.value=!1,le("getTree")):T({type:"error",message:"删除失败"})}).catch(()=>{T({type:"info",message:"取消删除"})})},He=s=>{s&&(s.resetFields(),Se.value={})},Ul=i("modelField"),tt=(s,l)=>{console.log(Ul.value),s.props.name=="changelog"&&U.value.getData()};pe({getHasConfigField:Ya,getCiData:$e,initCiDataForm:Ha,getModelField:Ga,setLoading:yl,closeFilter:Me,clearMultipleSelect:aa,updateFilterParam:ra,reloadCiDataFilter:ie});const zl=i(!1),_a=i(""),ot=s=>{zl.value=!0,_a.value=s},nt=({row:s,column:l,rowIndex:d,columnIndex:y})=>{if(d===0&&y===0&&ve.value)return"selectAllBtnDis"};return(s,l)=>{var ha,Ca,xa;const d=p("el-button"),y=p("el-tooltip"),M=p("arrow-down"),F=p("el-icon"),Ye=p("el-dropdown-item"),el=p("el-dropdown-menu"),Yl=p("el-dropdown"),Bl=p("vue-countdown"),G=p("el-text"),Fl=p("el-tag"),ll=p("el-table-column"),qe=p("el-link"),ga=p("TopRight"),Te=p("el-switch"),st=p("el-table"),ut=p("el-checkbox"),dt=p("el-pagination"),ya=p("el-descriptions-item"),rt=p("el-descriptions"),Ce=p("el-space"),Be=p("el-input"),me=p("el-form-item"),kl=p("el-col"),Jl=p("el-row"),it=p("InfoFilled"),Kl=p("el-input-number"),Hl=p("el-form"),ct=p("el-popover"),Pl=p("el-date-picker"),Gl=p("el-option"),Wl=p("el-select"),ba=p("el-select-v2"),pt=p("el-collapse-item"),ft=p("el-collapse"),Nl=p("el-tab-pane"),vt=p("el-tabs"),mt=p("el-drawer"),wa=p("el-dialog"),_t=p("el-cascader"),_e=vl("permission"),gt=vl("loading"),yt=vl("copy"),ka=vl("throttle");return t(),r(re,null,[Dl.value?(t(),r("div",yo,[V("div",bo,[V("div",wo,[ye.value?(t(),u(y,{key:0,class:"box-item",effect:"dark",content:"隐藏实例树",placement:"top"},{default:e(()=>[a(d,{icon:b(ht),onClick:l[0]||(l[0]=n=>ye.value=!1),size:"default"},null,8,["icon"])]),_:1})):(t(),u(y,{key:1,class:"box-item",effect:"dark",content:"显示实例树",placement:"top"},{default:e(()=>[a(d,{icon:b(Ct),onClick:l[1]||(l[1]=n=>ye.value=!0),size:"default"},null,8,["icon"])]),_:1})),J((t(),u(d,{type:"primary",onClick:Qa},{default:e(()=>[...l[35]||(l[35]=[f("添加",-1)])]),_:1})),[[_e,`${(ha=b(z).name)==null?void 0:ha.replace("_info","")}:add`]]),(de.value.length>>>0||ve.value)&&Ke.value!==Z.currentNodeId?J((t(),u(d,{key:3,disabled:!((de.value.length>>>0||ve.value)&&Ke.value!==Z.currentNodeId),content:"勾选实例且非<所有>分组才支持转移~",onClick:l[3]||(l[3]=n=>_.value=!0)},{default:e(()=>[...l[37]||(l[37]=[f("转移",-1)])]),_:1},8,["disabled"])),[[_e,`${(Ca=b(z).name)==null?void 0:Ca.replace("_info","")}:edit`]]):(t(),u(y,{key:2,class:"box-item",effect:"dark",content:"勾选实例且非<所有>分组才支持转移~",placement:"top"},{default:e(()=>{var n;return[J((t(),u(d,{disabled:!((de.value.length>>>0||ve.value)&&Ke.value!==Z.currentNodeId),onClick:l[2]||(l[2]=L=>_.value=!0)},{default:e(()=>[...l[36]||(l[36]=[f("转移",-1)])]),_:1},8,["disabled"])),[[_e,`${(n=b(z).name)==null?void 0:n.replace("_info","")}:edit`]])]}),_:1})),J((t(),u(d,{disabled:!(de.value.length>>>0||ve.value),onClick:gl},{default:e(()=>[...l[38]||(l[38]=[f("批量更新",-1)])]),_:1},8,["disabled"])),[[_e,`${(xa=b(z).name)==null?void 0:xa.replace("_info","")}:edit`]]),a(Yl,{style:{"margin-left":"12px"}},{dropdown:e(()=>[a(el,null,{default:e(()=>{var n,L;return[J((t(),r("div",null,[a(Ye,{disabled:!(de.value.length>>>0||ve.value),onClick:l[4]||(l[4]=o=>rl()),divided:""},{default:e(()=>[...l[40]||(l[40]=[f("批量删除",-1)])]),_:1},8,["disabled"])])),[[_e,`${(n=b(z).name)==null?void 0:n.replace("_info","")}:delete`]]),J((t(),r("div",null,[a(Ye,{disabled:!(de.value.length>>>0),onClick:l[5]||(l[5]=o=>xl(!1))},{default:e(()=>[...l[41]||(l[41]=[f("导出勾选(显示字段)",-1)])]),_:1},8,["disabled"]),a(Ye,{disabled:!(de.value.length>>>0),onClick:l[6]||(l[6]=o=>xl(!0))},{default:e(()=>[...l[42]||(l[42]=[f("导出勾选(所有字段)",-1)])]),_:1},8,["disabled"]),a(Ye,{onClick:l[7]||(l[7]=o=>Tl())},{default:e(()=>[...l[43]||(l[43]=[f("导出所有",-1)])]),_:1})])),[[_e,`${(L=b(z).name)==null?void 0:L.replace("_info","")}:export`]])]}),_:1})]),default:e(()=>[a(d,{type:"primary"},{default:e(()=>[l[39]||(l[39]=f(" 更多操作",-1)),a(F,{class:"el-icon--right"},{default:e(()=>[a(M)]),_:1})]),_:1})]),_:1})]),V("div",ko,[a(y,{class:"box-item",effect:"dark",content:"刷新表格",placement:"top"},{default:e(()=>[a(d,{icon:b(xt),circle:"",onClick:oa},null,8,["icon"])]),_:1}),h.value?$("",!0):(t(),u(y,{key:0,class:"box-item",effect:"dark",content:"显示密码",placement:"top"},{default:e(()=>{var n;return[J(a(d,{icon:b(Ql),circle:"",onClick:g},null,8,["icon"]),[[_e,`${(n=b(z).name)==null?void 0:n.replace("_info","")}:showPassword`]])]}),_:1})),h.value?(t(),u(y,{key:1,class:"box-item",effect:"dark",content:"隐藏密码",placement:"top"},{content:e(()=>[...l[44]||(l[44]=[V("span",null,[f("倒计时结束后自动隐藏密码"),V("br"),f("手动点击可立马隐藏")],-1)])]),default:e(()=>[a(d,{circle:"",onClick:he},{default:e(()=>[a(Bl,{time:v.value,onEnd:B,onProgress:oe},{default:e(({totalSeconds:n})=>[f(C(n),1)]),_:1},8,["time"])]),_:1})]),_:1})):$("",!0),a(y,{class:"box-item",effect:"dark",content:"配置表格显示列",placement:"top"},{default:e(()=>[a(d,{icon:b(Vt),circle:"",onClick:Ta},null,8,["icon"])]),_:1}),a(y,{class:"box-item",effect:"dark",content:"实例导入",placement:"top"},{default:e(()=>{var n;return[J(a(d,{icon:b(Mt),circle:"",onClick:l[8]||(l[8]=L=>We.value=!0)},null,8,["icon"]),[[_e,`${(n=b(z).name)==null?void 0:n.replace("_info","")}:import`]])]}),_:1}),a(y,{class:"box-item",effect:"dark",content:"打开过滤器",placement:"top"},{default:e(()=>[a(d,{icon:b($t),circle:"",onClick:te},null,8,["icon"])]),_:1})])]),J(V("div",ho,[a(G,{tag:"b"},{default:e(()=>[...l[45]||(l[45]=[f("过滤器",-1)])]),_:1}),(t(!0),r(re,null,ge(ia.value,(n,L)=>(t(),u(Fl,{key:n.name,closable:"",type:"primary",onClose:o=>Wa(n.field,L)},{default:e(()=>[V("span",null,C(n.name),1)]),_:2},1032,["onClose"]))),128))],512),[[hl,ia.value.length>>>0]]),J((t(),u(st,{ref_key:"ciDataTableRef",ref:bl,data:da.value,onSelectionChange:Aa,"table-layout":"fixed","highlight-current-row":"",style:{flex:"1"},border:"","row-key":Ea},{default:e(()=>[a(ll,{"header-cell-class-name":nt,type:"selection",selectable:Ra,width:"40",disable:ve.value,"reserve-selection":!0},null,8,["disable"]),a(ll,{prop:"instance_name",label:"名称",fixed:"left",width:"180"},{default:e(n=>[a(y,{content:"查看详情",placement:"right",effect:"dark"},{default:e(()=>[a(qe,{type:"primary",onClick:L=>pa(n.row)},{default:e(()=>[f(C(n.row.instance_name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1}),(t(!0),r(re,null,ge(Il.value,(n,L)=>(t(),u(ll,{property:n.name,label:n.verbose_name,"show-overflow-tooltip":"",sortable:"","min-width":"120","max-width":"220"},Ot({_:2},[n.name==="mgmt_ip"?{name:"default",fn:e(o=>{var X;return[o.row[n.name]!==null||((X=o.row[n.name])==null?void 0:X.length)==0?(t(),r("div",Co,[a(y,{content:"跳转管理口",placement:"right",effect:"dark"},{default:e(()=>[a(qe,{href:`https://${o.row[n.name]}`,type:"primary",target:"_blank"},{default:e(()=>[f(C(o.row[n.name]),1),a(F,null,{default:e(()=>[a(ga)]),_:1})]),_:2},1032,["href"])]),_:2},1024)])):(t(),r("div",xo))]}),key:"0"}:void 0,["mgmt_url","access_url"].indexOf(n.name)!=-1?{name:"default",fn:e(o=>{var X;return[o.row[n.name]!==null||((X=o.row[n.name])==null?void 0:X.length)==0?(t(),r("div",Vo,[a(y,{content:"跳转链接",placement:"right",effect:"dark"},{default:e(()=>[a(qe,{href:`${o.row[n.name]}`,type:"primary",target:"_blank"},{default:e(()=>[f(C(o.row[n.name]),1),a(F,null,{default:e(()=>[a(ga)]),_:1})]),_:2},1032,["href"])]),_:2},1024)])):(t(),r("div",Mo))]}),key:"1"}:void 0,Ue.value.boolean.indexOf(n.name)!=-1?{name:"default",fn:e(o=>{var X;return[J(a(Te,{modelValue:o.row[n.name],"onUpdate:modelValue":c=>o.row[n.name]=c,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:c=>ja({id:o.row.id,fields:{[n.name]:o.row[n.name]}})},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[_e,{id:`${(X=b(z).name)==null?void 0:X.replace("_info","")}:edit`,action:"disabled"}]])]}),key:"2"}:void 0,Ue.value.enum.indexOf(n.name)!=-1?{name:"default",fn:e(o=>{var X;return[V("div",$o,C((X=o.row[n.name])==null?void 0:X.label),1)]}),key:"3"}:void 0,Ue.value.password.indexOf(n.name)!=-1?{name:"default",fn:e(o=>{var X;return[h.value?(t(),r("div",Oo,C(b(Sl)(D.value.key,D.value.mode,o.row[n.name])),1)):(t(),r("div",Do,[((X=o.row[n.name])==null?void 0:X.length)>>0?(t(),u(G,{key:0},{default:e(()=>{var c;return[f(C("*".repeat((c=o.row[n.name])==null?void 0:c.length)),1)]}),_:2},1024)):(t(),u(G,{key:1}))]))]}),key:"4"}:void 0,Ue.value.model_ref.indexOf(n.name)!=-1?{name:"default",fn:e(o=>{var X,c;return[V("div",{class:Fe({text_class:((X=o.row[n.name])==null?void 0:X.instance_name)>>0})},C((c=o.row[n.name])==null?void 0:c.instance_name),3)]}),key:"5"}:void 0]),1032,["property","label"]))),256)),a(ll,{fixed:"right",width:"150",label:"操作"},{default:e(n=>[a(y,{class:"box-item",effect:"dark",content:"查看详情",placement:"top"},{default:e(()=>[a(d,{link:"",type:"primary",icon:b(Ql),onClick:L=>pa(n.row)},null,8,["icon","onClick"])]),_:2},1024),a(y,{class:"box-item",effect:"dark",content:"克隆",placement:"top"},{default:e(()=>{var L;return[J(a(d,{link:"",type:"primary",icon:b(Ma),onClick:o=>Xa(n.row)},null,8,["icon","onClick"]),[[_e,`${(L=b(z).name)==null?void 0:L.replace("_info","")}:edit`]])]}),_:2},1024),a(y,{class:"box-item",effect:"dark",content:"点击查看二维码",placement:"top"},{default:e(()=>{var L;return[J(a(d,{link:"",type:"primary",icon:b(Dt),onClick:o=>ot(n.row)},null,8,["icon","onClick"]),[[_e,`${(L=b(z).name)==null?void 0:L.replace("_info","")}:view`]])]}),_:2},1024),a(y,{class:"box-item",effect:"dark",content:"删除",placement:"top"},{default:e(()=>{var L;return[J(a(d,{link:"",type:"danger",icon:b($a),onClick:o=>Ll(n.row.id)},null,8,["icon","onClick"]),[[_e,`${(L=b(z).name)==null?void 0:L.replace("_info","")}:delete`],[hl,na(n.row.instance_group)&&Ke.value!=Z.currentNodeId]])]}),_:2},1024)]),_:1})]),_:1},8,["data"])),[[gt,Ol.value]]),a(dt,{"current-page":Re.value,"onUpdate:currentPage":l[10]||(l[10]=n=>Re.value=n),"page-size":Ee.value,"onUpdate:pageSize":l[11]||(l[11]=n=>Ee.value=n),"page-sizes":[10,20,50,100,200],size:P.value,disabled:Pe.value,layout:"slot,total, sizes, prev, pager, next, jumper",total:Al.value,onSizeChange:R,onCurrentChange:nl,style:{"margin-top":"5px","justify-content":"flex-end"}},{default:e(()=>[V("div",Io,[V("div",Uo,[a(ut,{modelValue:ve.value,"onUpdate:modelValue":l[9]||(l[9]=n=>ve.value=n),label:"全选",size:"default",onChange:La},null,8,["modelValue"])]),a(G,null,{default:e(()=>[f("已选择 "+C(ve.value?Al.value:de.value.length)+" 条",1)]),_:1})])]),_:1},8,["current-page","page-size","size","disabled","total"])])):$("",!0),a(mt,{modelValue:Oe.value,"onUpdate:modelValue":l[23]||(l[23]=n=>Oe.value=n),class:"edit-drawer",direction:"rtl",size:"45%","before-close":lt},{header:e(()=>[ze.value?(t(),u(G,{key:1,tag:"b"},{default:e(()=>[...l[46]||(l[46]=[f("实例信息 ",-1)])]),_:1})):(t(),u(rt,{key:0,title:"实例信息"},{default:e(()=>[a(ya,{label:"唯一标识"},{default:e(()=>{var n;return[f(C((n=Se.value)==null?void 0:n.instance_name),1)]}),_:1}),a(ya,{label:"所属分组"},{default:e(()=>{var n;return[(t(!0),r(re,null,ge((n=Se.value)==null?void 0:n.instance_group,(L,o)=>(t(),u(G,{key:o},{default:e(()=>[f(C(L.group_path),1)]),_:2},1024))),128))]}),_:1})]),_:1}))]),default:e(()=>[a(vt,{modelValue:Ul.value,"onUpdate:modelValue":l[18]||(l[18]=n=>Ul.value=n),type:"card",class:"demo-tabs",onTabClick:tt},{default:e(()=>[a(Nl,{label:"资产信息",name:"modelField"},{default:e(()=>[a(Hl,{ref_key:"ciDataFormRef",ref:Ze,style:{"max-width":"100%"},model:m,"label-width":"auto","status-icon":"","label-position":"top",disabled:!1,"require-asterisk-position":"right"},{default:e(()=>[a(Jl,null,{default:e(()=>[a(kl,{span:12},{default:e(()=>[Q.value?(t(),u(me,{key:0,prop:"instance_name",required:"",style:{"margin-left":"30px"}},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[...l[47]||(l[47]=[f("唯一标识",-1)])]),_:1}),a(y,{content:"唯一命名标识",placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1})]),_:1})]),default:e(()=>[Q.value?(t(),u(Be,{key:0,modelValue:m.instance_name,"onUpdate:modelValue":l[12]||(l[12]=n=>m.instance_name=n),style:{width:"240px"}},null,8,["modelValue"])):(t(),r("span",Fo,C(m.instance_name),1))]),_:1})):$("",!0)]),_:1}),a(kl,{span:12},{default:e(()=>[a(me,{prop:"using_template",required:"",style:{"margin-left":"30px"}},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[...l[48]||(l[48]=[f("自动命名",-1)])]),_:1}),a(y,{content:"是否根据模型的唯一命名规则，自动生成唯一标识",placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1})]),_:1})]),default:e(()=>[a(Te,{modelValue:m.using_template,"onUpdate:modelValue":l[13]||(l[13]=n=>m.using_template=n),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(ft,{modelValue:ee.value,"onUpdate:modelValue":l[17]||(l[17]=n=>ee.value=n)},{default:e(()=>[(t(!0),r(re,null,ge(Ae.value.field_groups,(n,L)=>(t(),u(pt,{name:L,key:L},{title:e(()=>[a(G,{tag:"b",size:"large"},{default:e(()=>[f(C(n.verbose_name),1)]),_:2},1024)]),default:e(()=>[a(Jl,{style:{"margin-left":"30px"}},{default:e(()=>[(t(!0),r(re,null,ge(n.fields,(o,X)=>(t(),u(kl,{span:12},{default:e(()=>[o.type==="string"?(t(),u(me,{key:0,label:o.verbose_name,prop:o.name,required:o.required,rules:Ka(o.validation_rule)},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Be,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,style:{width:"240px"},disabled:Za(o.editable)},null,8,["modelValue","onUpdate:modelValue","disabled"])):(t(),r("div",Po,[m[o.name]!=null?(t(),r("div",No,[o.name==="mgmt_ip"?(t(),u(qe,{key:0,href:`https://${m[o.name]}`,type:"primary",target:"_blank"},{default:e(()=>[f(C(m[o.name]),1)]),_:2},1032,["href"])):(t(),r("span",{key:1,class:Fe(["text_class",{requiredClass:o.required}]),style:{width:"100%"}},C(m[o.name]),3))])):(t(),r("span",So,"--"))]))]),_:2},1032,["label","prop","required","rules"])):$("",!0),o.type==="json"?(t(),u(me,{key:1,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),a(y,{placement:"right",effect:"dark"},{content:e(()=>[...l[49]||(l[49]=[f(" json类型字段",-1),V("br",null,null,-1),f("请输入json格式数据! ",-1)])]),default:e(()=>[a(F,null,{default:e(()=>[a(it)]),_:1})]),_:1}),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Be,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,style:{width:"240px"},autosize:"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",qo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},C(m[o.name]),3)):(t(),r("span",To,"--"))]))]),_:2},1032,["label","prop","required"])):$("",!0),["text"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:2,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Be,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,style:{width:"240px"},autosize:"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",jo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}]),style:{width:"100%"}},C(m[o.name]),3)):(t(),r("span",Ro,"--"))]))]),_:2},1032,["label","prop","required"])),o.type==="boolean"?(t(),u(me,{key:3,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[a(Te,{modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},disabled:!Q.value},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","prop","required"])):$("",!0),["float"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:4,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[o.unit!==null?(t(),u(G,{key:0,tag:"b"},{default:e(()=>[f(C(o.verbose_name+"("+o.unit+")"),1)]),_:2},1024)):(t(),u(G,{key:1,tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024)),o.description.length!=0?(t(),u(y,{key:2,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Kl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,precision:2,step:1},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Eo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},C(m[o.name]),3)):(t(),r("span",Ao,"--"))]))]),_:2},1032,["label","prop","required"])),["password"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:5,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>{var c,xe,Va;return[Q.value?(t(),u(Be,{key:1,modelValue:m[o.name],"onUpdate:modelValue":fl=>m[o.name]=fl,style:{width:"240px"},type:"password","auto-complete":"new-password","show-password":"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Lo,[((c=m[o.name])==null?void 0:c.length)>>0?(t(),r("div",zo,[h.value?(t(),r("span",Yo,C(b(Sl)(D.value.key,D.value.mode,m[o.name])),1)):(t(),r("span",{key:1,class:Fe([{requiredClass:o.required},"hide-text"]),onMouseenter:l[15]||(l[15]=fl=>we.value=!0),onMouseleave:l[16]||(l[16]=fl=>we.value=!1)},[f(C("*".repeat((xe=m[o.name])==null?void 0:xe.length))+" ",1),J((t(),u(ct,{width:380,trigger:"click",onAfterLeave:De},{reference:e(()=>[a(F,null,{default:e(()=>[J(a(b(Ql),null,null,512),[[hl,we.value&&!h.value]])]),_:1})]),default:e(()=>[a(Hl,{ref_for:!0,ref_key:"passFormRef",ref:W,inline:!0,model:fe,"require-asterisk-position":"right"},{default:e(()=>[a(Jl,{align:"middle"},{default:e(()=>[a(kl,{span:20},{default:e(()=>[a(me,{label:"密钥",prop:"secret",rules:[{required:!0,message:"输入密钥",trigger:"blur"}]},{default:e(()=>[a(Be,{type:"password",modelValue:fe.secret,"onUpdate:modelValue":l[14]||(l[14]=fl=>fe.secret=fl),"show-password":"","auto-complete":"new-password",placeholder:"输入密钥查看密码",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(kl,{span:2},{default:e(()=>[a(me,null,{default:e(()=>[a(d,{type:"primary",size:"small",onClick:fl=>je(W.value,m[o.name])},{default:e(()=>[...l[50]||(l[50]=[f("查看",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["model"]),N.value?(t(),u(G,{key:0,tag:"b"},{default:e(()=>[f("密码: "+C(se.value)+" ",1),a(y,{class:"box-item",effect:"dark",content:"点击复制密码",placement:"top"},{default:e(()=>[a(F,null,{default:e(()=>[J(a(b(Ma),null,null,512),[[yt,se.value]])]),_:1})]),_:1})]),_:1})):$("",!0)]),_:2},1024)),[[_e,`${(Va=b(z).name)==null?void 0:Va.replace("_info","")}:showPassword`]])],34))])):(t(),r("span",Bo,"--"))]))]}),_:2},1032,["label","prop","required"])),["integer"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:6,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[o.unit!==null?(t(),u(G,{key:0,tag:"b"},{default:e(()=>[f(C(o.verbose_name+"("+o.unit+")"),1)]),_:2},1024)):(t(),u(G,{key:1,tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024)),o.description.length!=0?(t(),u(y,{key:2,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Kl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,step:1},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Jo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},C(m[o.name]),3)):(t(),r("span",Ko,"--"))]))]),_:2},1032,["label","prop","required"])),["date"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:7,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Pl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,type:"date",placeholder:"Pick a Date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Ho,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},C(m[o.name]),3)):(t(),r("span",Go,"--"))]))]),_:2},1032,["label","prop","required"])),["datetime"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:8,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>[Q.value?(t(),u(Pl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":c=>m[o.name]=c,type:"datetime",placeholder:"Pick a Date",format:"YYYY/MM/DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])):(t(),r("div",Wo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},C(m[o.name]),3)):(t(),r("span",Qo,"--"))]))]),_:2},1032,["label","prop","required"])),["enum"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:9,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>{var c;return[Q.value?(t(),u(Wl,{key:1,modelValue:m[o.name],"onUpdate:modelValue":xe=>m[o.name]=xe,placeholder:"请选择",filterable:"",clearable:"",style:{width:"240px"}},{default:e(()=>[(t(!0),r(re,null,ge(El.value[o.validation_rule],xe=>(t(),u(Gl,{key:xe.value,label:xe.label,value:xe.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(t(),r("div",Xo,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe({requiredClass:o.required})},C((c=Se.value[o.name])==null?void 0:c.label),3)):(t(),r("span",Zo,"--"))]))]}),_:2},1032,["label","prop","required"])),["model_ref"].indexOf(o.type)>>>-1?$("",!0):(t(),u(me,{key:10,label:o.verbose_name,prop:o.name,required:o.required},{label:e(()=>[a(Ce,{size:2},{default:e(()=>[a(G,{tag:"b"},{default:e(()=>[f(C(o.verbose_name),1)]),_:2},1024),o.description.length!=0?(t(),u(y,{key:0,content:o.description,placement:"right",effect:"dark"},{default:e(()=>[a(F,null,{default:e(()=>[a(b(Ve))]),_:1})]),_:1},8,["content"])):$("",!0)]),_:2},1024)]),default:e(()=>{var c;return[Q.value?(t(),u(ba,{key:1,modelValue:m[o.name],"onUpdate:modelValue":xe=>m[o.name]=xe,clearable:"",placeholder:"请选择",style:{width:"240px"},filterable:"",options:E.value[(c=ce.value[o.name])==null?void 0:c.ref_model]},null,8,["modelValue","onUpdate:modelValue","options"])):(t(),r("div",en,[m[o.name]!=null?(t(),r("span",{key:0,class:Fe(["text_class",{requiredClass:o.required}])},C(Se.value[o.name].instance_name),3)):(t(),r("span",ln,"--"))]))]}),_:2},1032,["label","prop","required"]))]),_:2},1024))),256))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1}),ze.value?$("",!0):(t(),u(Nl,{key:0,label:"监控信息",name:"monitor",disabled:""},{default:e(()=>[...l[51]||(l[51]=[f("111",-1)])]),_:1})),ze.value?$("",!0):(t(),u(Nl,{key:1,label:"关联关系",name:"relations",disabled:""},{default:e(()=>[...l[52]||(l[52]=[f("222",-1)])]),_:1})),ze.value?$("",!0):(t(),u(Nl,{key:2,label:"变更记录",name:"changelog"},{default:e(()=>[Se.value&&Se.value.id?(t(),u(St,{key:0,ref_key:"ciDataAuditRef",ref:U,instanceId:Se.value.id},null,8,["instanceId"])):$("",!0)]),_:1}))]),_:1},8,["modelValue"])]),footer:e(()=>{var n,L,o,X;return[J(V("div",an,[a(d,{onClick:l[19]||(l[19]=c=>at(Ze.value))},{default:e(()=>[...l[53]||(l[53]=[f("取消",-1)])]),_:1}),ze.value?(t(),r("div",tn,[a(d,{type:"primary",onClick:l[20]||(l[20]=c=>ma(Ze.value))},{default:e(()=>[...l[54]||(l[54]=[f("添加",-1)])]),_:1})])):(t(),r("div",on,[Q.value?(t(),r("div",nn,[na((n=Se.value)==null?void 0:n.instance_group)?J((t(),u(d,{key:0,type:"danger",onClick:Ll},{default:e(()=>[...l[55]||(l[55]=[f("删除",-1)])]),_:1})),[[_e,`${(L=b(z).name)==null?void 0:L.replace("_info","")}:delete`]]):J((t(),u(y,{key:1,content:"无法删除非空闲池的主机",placement:"top",effect:"dark"},{default:e(()=>[a(d,{type:"danger",onClick:Ll,disabled:""},{default:e(()=>[...l[56]||(l[56]=[f("删除",-1)])]),_:1})]),_:1})),[[_e,`${(o=b(z).name)==null?void 0:o.replace("_info","")}:delete`]]),J((t(),u(d,{type:"primary",onClick:l[21]||(l[21]=c=>ma(Ze.value))},{default:e(()=>[...l[57]||(l[57]=[f("保存",-1)])]),_:1})),[[ka]])])):(t(),r("div",sn,[J((t(),u(d,{type:"primary",onClick:l[22]||(l[22]=c=>Q.value=!0)},{default:e(()=>[...l[58]||(l[58]=[f("编辑",-1)])]),_:1})),[[_e,`${(X=b(z).name)==null?void 0:X.replace("_info","")}:edit`]])]))]))],512),[[hl,Ul.value==="modelField"]])]}),_:1},8,["modelValue"]),a(wa,{modelValue:Xe.value,"onUpdate:modelValue":l[25]||(l[25]=n=>Xe.value=n),title:"批量更新",width:"500","before-close":la},{footer:e(()=>[V("div",wn,[a(d,{onClick:la},{default:e(()=>[...l[59]||(l[59]=[f("取消",-1)])]),_:1}),a(d,{onClick:l[24]||(l[24]=Cl(n=>Ml(),["prevent"]))},{default:e(()=>[...l[60]||(l[60]=[f("新增字段",-1)])]),_:1}),J((t(),u(d,{type:"primary",onClick:Sa,disabled:!(ue.value.length>0)},{default:e(()=>[...l[61]||(l[61]=[f("保存",-1)])]),_:1},8,["disabled"])),[[ka]])])]),default:e(()=>[a(Hl,{ref_key:"multipleFormRef",ref:il,style:{"max-width":"1000px"},model:x,"label-width":"auto"},{default:e(()=>[(t(!0),r(re,null,ge(ue.value,(n,L)=>{var o;return t(),u(me,{key:`param-${n}`,label:"字段"+(L+1),prop:`updateParams.${n}`,rules:jl((o=ce.value[n])==null?void 0:o.validation_rule),required:!0},{default:e(()=>[a(Ce,null,{default:e(()=>{var X;return[a(Wl,{"model-value":n.startsWith("__temp")?void 0:n,placeholder:"选择字段",style:{width:"120px"},filterable:"",onChange:c=>Ie(L,c)},{default:e(()=>[(t(!0),r(re,null,ge(qa.value,c=>(t(),u(Gl,{key:c.value,label:c.label,value:c.value,disabled:c.disable},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","onChange"]),n&&!n.startsWith("__temp")?(t(),r("div",un,[n==="using_template"?(t(),r("div",dn,[a(Te,{modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):["text","json"].indexOf(ce.value[n].type)>>>-1?["string"].indexOf(ce.value[n].type)>>>-1?["enum"].indexOf(ce.value[n].type)>>>-1?["model_ref"].indexOf(ce.value[n].type)>>>-1?["boolean"].indexOf(ce.value[n].type)>>>-1?["integer"].indexOf(ce.value[n].type)>>>-1?["float"].indexOf(ce.value[n].type)>>>-1?["date"].indexOf(ce.value[n].type)>>>-1?["datetime"].indexOf(ce.value[n].type)>>>-1?(t(),r("div",bn,[a(Be,{modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",yn,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Pl,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,type:"datetime",placeholder:"Pick a Date",format:"YYYY/MM/DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",gn,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Pl,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,type:"date",placeholder:"Pick a Date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",_n,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Kl,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,precision:2,step:.1,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",mn,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Be,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,step:1,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",vn,[a(Te,{modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])])):(t(),r("div",fn,[a(ba,{modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,placeholder:"请选择",style:{width:"240px"},filterable:"",clearable:"",options:E.value[(X=ce.value[s.fitem.name])==null?void 0:X.ref_model]},null,8,["modelValue","onUpdate:modelValue","options"])])):(t(),r("div",pn,[a(Wl,{modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,placeholder:"请选择",style:{width:"180px"},clearable:"",filterable:""},{default:e(()=>{var c;return[(t(!0),r(re,null,ge(El.value[(c=ce.value[n])==null?void 0:c.validation_rule],xe=>(t(),u(Gl,{key:xe.value,label:xe.label,value:xe.value},null,8,["label","value"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])])):(t(),r("div",cn,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Be,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))])):(t(),r("div",rn,[a(Te,{modelValue:Y.value[n],"onUpdate:modelValue":c=>Y.value[n]=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-right":"10px"},"inline-prompt":"","active-text":"置空","inactive-text":"非空",onChange:c=>Qe(Y.value[n],n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),Y.value[n]?$("",!0):(t(),u(Be,{key:0,modelValue:x.updateParams[n],"onUpdate:modelValue":c=>x.updateParams[n]=c,type:"textarea",autosize:"",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]))]))])):$("",!0),a(d,{class:"mt-2",icon:b($a),circle:"",onClick:Cl(c=>$l(L,n),["prevent"])},null,8,["icon","onClick"])]}),_:2},1024)]),_:2},1032,["label","prop","rules"])}),128))]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(wa,{modelValue:_.value,"onUpdate:modelValue":l[28]||(l[28]=n=>_.value=n),title:"实例组编辑",width:"500"},{footer:e(()=>[V("div",kn,[a(d,{onClick:l[27]||(l[27]=n=>_.value=!1)},{default:e(()=>[...l[62]||(l[62]=[f("取消",-1)])]),_:1}),a(d,{type:"primary",onClick:Vl},{default:e(()=>[...l[63]||(l[63]=[f(" 提交更新 ",-1)])]),_:1})])]),default:e(()=>[a(_t,{options:k.treeData,props:w,clearable:"",modelValue:S.value,"onUpdate:modelValue":l[26]||(l[26]=n=>S.value=n),style:{width:"400px"}},null,8,["options","modelValue"])]),_:1},8,["modelValue"]),K.value?(t(),u(Et,{key:1,isShowUpload:We.value,"onUpdate:isShowUpload":l[29]||(l[29]=n=>We.value=n),ciModelId:k.ciModelId,currentNodeId:k.currentNodeId,onGetCiData:$e},null,8,["isShowUpload","ciModelId","currentNodeId"])):$("",!0),K.value?(t(),u(go,{key:2,ciModelId:k.ciModelId,currentNodeId:k.currentNodeId,allModelFieldByNameObj:ce.value,enumOptionObj:El.value,validationRulesObj:Le.value,allModelField:wl.value,modelRefOptions:ua.value,showFilter:ae.value,"onUpdate:showFilter":l[30]||(l[30]=n=>ae.value=n),onUpdateFilterParam:ra,onGetCiData:$e,ref_key:"ciDataFilterRef",ref:be},null,8,["ciModelId","currentNodeId","allModelFieldByNameObj","enumOptionObj","validationRulesObj","allModelField","modelRefOptions","showFilter"])):$("",!0),a(Gt,{ciModelId:k.ciModelId,allModelField:wl.value,allModelFieldInfo:za.value,isShowTableCol:Rl.value,"onUpdate:isShowTableCol":l[31]||(l[31]=n=>Rl.value=n),hasConfigField:Il.value,"onUpdate:hasConfigField":l[32]||(l[32]=n=>Il.value=n),onReloadTable:oa,ref_key:"ciDataTableColRef",ref:ta},null,8,["ciModelId","allModelField","allModelFieldInfo","isShowTableCol","hasConfigField"]),a(Qt,{showAllPassDia:j.value,"onUpdate:showAllPassDia":l[33]||(l[33]=n=>j.value=n)},null,8,["showAllPassDia"]),a(Zt,{qCodeContext:_a.value,showqCodeDia:zl.value,"onUpdate:showqCodeDia":l[34]||(l[34]=n=>zl.value=n)},null,8,["qCodeContext","showqCodeDia"])],64)}}}),Cn=ql(hn,[["__scopeId","data-v-5ebc0095"]]),xn={class:"card ci_data_tree"},Vn={class:"flexJstart gap-5"},Mn={class:"tree-container"},$n={class:"custom-tree-node"},On={class:"table-box"},Dn=ol({name:"cidata",__name:"cidataView",setup(Z){const pe=Fa(),{proxy:H}=_l(),O=i(!0),A=qt(),I=Na(),E=i(""),ne=i(!1);i(""),i(!1);const z=i(),le=i([]),U=i("");ea(U,w=>{v.value.filter(w)});const k=(w,_)=>w?_.label.toLowerCase().includes(w.toLowerCase()):!0,ye=w=>!(w.level>rl.value-1||w.label==="空闲池"),ee=async()=>{ne.value=!0;let w=await H.$api.getCiModelTree({model:E.value});console.log(w),le.value=[w.data],ke(()=>{B.value===1&&(v.value.setCurrentKey(w.data.id),B.value=v.value.getCurrentKey())}),ne.value=!1},ae=q(()=>A.ciLastModel),te=i([]),K=async()=>{let w=await H.$api.getCiModel();te.value=w.data.results,A.setModelList(te.value),ae.value===void 0||ae.value===null?(E.value=te.value.find(_=>_.name==="hosts").id,ke(()=>{A.setCiLastModel(E.value)})):E.value=ae.value},ie=i([]),be=async()=>{let w=await H.$api.getCiModelGroup();ie.value=w.data.results},Me=q(()=>{let w=new Array;return ie.value.forEach(_=>{let S=new Array;te.value.forEach(Je=>{Je.model_group===_.id&&S.push({value:Je.id,label:Je.verbose_name})}),w.push({value:_.id,label:_.verbose_name,children:S})}),w});q(()=>{let w={};return te.value.forEach(_=>{w[_.id]=_}),w});const j=i(""),D=async()=>{A.setCiLastModel(E.value),B.value=1,await ee(),await j.value.closeFilter(),await j.value.updateFilterParam({}),await j.value.clearMultipleSelect(),j.value.reloadCiDataFilter(),await j.value.setLoading(!0),await j.value.getModelField(),await j.value.getHasConfigField(),await j.value.setLoading(!1),await j.value.initCiDataForm(),await j.value.getCiData({model:E.value,model_instance_group:B.value})};Pa(async()=>{await be(),await K(),await ee(),j.value.setLoading(!0),await j.value.getModelField(),await j.value.getHasConfigField(),await j.value.setLoading(!1),await j.value.initCiDataForm(),await j.value.getCiData({model:E.value,model_instance_group:v.value.getCurrentKey()})});const h=w=>w.built_in?!1:w.children?!(w.children.length>>>0):!0,v=i(),g=i(),B=i(1),oe=i(!1),he=i(100),we=(w,_)=>{je.value=!1;let S=he.value++;v.value.append({id:S,label:"新建子目录",level:_.level+1,parent:_.id,model:E.value},w),v.value.setCurrentKey(S),se.value=S,ke(()=>{g.value.focus()})},De=(w,_)=>{let S=he.value++;je.value=!1,v.value.insertAfter({id:S,label:"新建目录",level:_.level,parent:w.parent.data.id,model:E.value},w),v.value.setCurrentKey(S),se.value=S,ke(()=>{g.value.focus()})},W=()=>{B.value=v.value.getCurrentKey(),j.value.clearMultipleSelect(),j.value.setLoading(!0),j.value.getCiData({model:E.value,model_instance_group:v.value.getCurrentKey()}),j.value.setLoading(!0)},fe=w=>{oe.value=!oe.value,w.isShowEdit=oe.value},se=i(99999),N=i(""),je=i(!0),Re=w=>{je.value=!0,console.log(w),N.value=w.label,se.value=w.id,ke(()=>{g.value.focus()})},Ee=async(w,_)=>{if(se.value=99999,!N.value)T.warning("名称不可为空"),v.value.remove(_);else if(je.value){if(N.value==_.label)return!1;{let S=await H.$api.updateCiModelTree({id:_.id,label:N.value});S.status=="200"?(T({type:"success",message:"更新成功"}),_.label=N.value,ee(),await I.getModelTreeInstance(E.value),N.value=""):T({showClose:!0,message:"更新失败:"+JSON.stringify(S.data),type:"error"}),console.log(_)}}else{_.label=N.value,console.log(_);let S=await H.$api.addCiModelTree(_);S.status=="201"?(T({type:"success",message:"添加成功"}),ee(),N.value="",await I.getModelTreeInstance(E.value)):(T({showClose:!0,message:"添加失败:"+JSON.stringify(S.data),type:"error"}),v.value.remove(_))}},P=w=>{w&&Zl.confirm("确定删除该目录吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{(await H.$api.deleteCiModelTree(w.data.id)).status==200?(T({type:"success",message:"删除成功"}),await ee(),await I.getModelTreeInstance(E.value)):T({type:"error",message:"删除失败"})}).catch(()=>{})},Pe=i(""),R=(w,_)=>{Pe.value=w,console.log(Pe.value)},nl=(w,_,S)=>{},sl=(w,_,S)=>{},ul=(w,_,S)=>{},We=async(w,_,S,Je)=>{if(_.data.id===w.data.id)return;let Ke=await H.$api.updateCiModelTree({id:w.data.id,target_id:_.data.id,position:S});Ke.status=="200"?(T({type:"success",message:"更新排序成功"}),ee()):T({showClose:!0,message:"更新排序失败:"+JSON.stringify(Ke.data),type:"error"})},dl=(w,_,S,Je)=>{},rl=i(5),xl=(w,_,S)=>_.data.built_in?!1:S!=="inner",Tl=w=>!w.data.built_in;return(w,_)=>{const S=p("el-text"),Je=p("el-tree-select"),Ke=p("el-divider"),Vl=p("el-input"),il=p("a-menu-item"),Xe=p("a-menu"),Y=p("a-dropdown"),Qe=p("el-space"),gl=vl("permission"),jl=vl("loading");return t(),r(re,null,[J(V("div",xn,[V("div",Vn,[a(S,{tag:"b"},{default:e(()=>[..._[7]||(_[7]=[f("模型",-1)])]),_:1}),a(Je,{modelValue:E.value,"onUpdate:modelValue":_[0]||(_[0]=x=>E.value=x),data:Me.value,onChange:_[1]||(_[1]=x=>D()),"render-after-expand":!1,style:{flex:"1"}},null,8,["modelValue","data"])]),a(Ke),a(Vl,{modelValue:U.value,"onUpdate:modelValue":_[2]||(_[2]=x=>U.value=x),clearable:"",style:{"max-width":"280px","margin-bottom":"10px"},size:"small",placeholder:"检索节点"},null,8,["modelValue"]),V("div",Mn,[J((t(),u(b(Pt),{class:"tree-with-scrollbar","allow-drop":xl,"allow-drag":Tl,data:le.value,draggable:!0,"default-expand-all":"","node-key":"id",onNodeDragStart:R,onNodeDragEnter:nl,onNodeDragLeave:sl,onNodeDragOver:ul,onNodeDragEnd:We,onNodeDrop:dl,"highlight-current":!0,"current-node-key":B.value,"expand-on-click-node":!1,ref_key:"treeRef",ref:v,onNodeClick:W,"filter-node-method":k},{default:e(({node:x,data:ue})=>{var Ml;return[V("div",$n,[se.value===ue.id?(t(),u(Vl,{key:0,modelValue:N.value,"onUpdate:modelValue":_[3]||(_[3]=Ie=>N.value=Ie),modelModifiers:{trim:!0},placeholder:"请输入",ref_key:"eInputRef",ref:g,onBlur:Ie=>Ee(Ie,ue),onKeyup:_[4]||(_[4]=It(Ie=>Ie.target.blur(),["enter"])),autofocus:!0,maxlength:"10",type:"text",size:"small"},null,8,["modelValue","onBlur"])):(t(),u(S,{key:1,size:"default"},{default:e(()=>[f(C(x.label),1),a(S,{size:"small"},{default:e(()=>[f("("+C(ue.instance_count)+")",1)]),_:2},1024)]),_:2},1024)),J((t(),r("div",{class:Fe(["actionClass",{is_show_action:x.isShowEdit}])},[a(Qe,null,{default:e(()=>[ue.built_in?$("",!0):(t(),u(b(Ut),{key:0,onClick:Cl(Ie=>Re(ue),["stop"])},null,8,["onClick"])),a(Y,{trigger:["click"],ref_key:"aDropdownRef",ref:z,onOpenChange:Ie=>fe(x)},{overlay:e(()=>[a(Xe,null,{default:e(()=>{var Ie,$l;return[J((t(),r("div",null,[ue.level!==1?(t(),u(il,{key:"0",onClick:Ne=>De(x,ue)},{default:e(()=>[..._[8]||(_[8]=[f(" 添加同级节点 ",-1)])]),_:1},8,["onClick"])):$("",!0),ye(ue)?(t(),u(il,{key:"1",onClick:Ne=>we(x,ue)},{default:e(()=>[..._[9]||(_[9]=[f(" 添加子节点 ",-1)])]),_:1},8,["onClick"])):$("",!0)])),[[gl,`${(Ie=b(pe).name)==null?void 0:Ie.replace("_info","")}:add`]]),J((t(),r("div",null,[h(ue)?(t(),u(il,{key:"2",onClick:Ne=>P(x)},{default:e(()=>[..._[10]||(_[10]=[f(" 删除节点 ",-1)])]),_:1},8,["onClick"])):$("",!0)])),[[gl,`${($l=b(pe).name)==null?void 0:$l.replace("_info","")}:delete`]])]}),_:2},1024)]),default:e(()=>[a(b(Ft),{onClick:_[5]||(_[5]=Cl(()=>{},["stop"]))})]),_:2},1032,["onOpenChange"])]),_:2},1024)],2)),[[gl,`${(Ml=b(pe).name)==null?void 0:Ml.replace("_info","")}:edit`]])])]}),_:1},8,["data","current-node-key"])),[[jl,ne.value]])])],512),[[hl,O.value]]),V("div",On,[a(Cn,{ciModelId:E.value,treeData:le.value,currentNodeId:B.value,ref_key:"ciDataShowRef",ref:j,onGetTree:ee,showTree:O.value,"onUpdate:showTree":_[6]||(_[6]=x=>O.value=x)},null,8,["ciModelId","treeData","currentNodeId","showTree"])])],64)}}}),Tn=ql(Dn,[["__scopeId","data-v-94e6bdd7"]]);export{Tn as default};
