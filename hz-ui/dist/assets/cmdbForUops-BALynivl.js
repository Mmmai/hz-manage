import{d as T,s as $,l as x,h as q,u as z,r as C,m as E,n as P,c as _,b as r,w as e,e as u,o as n,i as d,F as p,p as g,q as s,v as W,x as j,y as G,K as H,f as J,z as y,A as v,t as k,k as O,_ as Q}from"./index-BuQNgUX_.js";import{u as X}from"./keepAlive-CLEltDlF.js";import{R as Y,u as Z}from"./index-CpkasZmF.js";const ee={class:"asset-config-layout"},ne=T({__name:"cmdbForUops",setup(te){const w=X(),{keepAliveName:N}=$(w);Y("#749bc7"),Z();const A=q(),R=J(),m=z(),B=x(()=>{const t=A.name;return t?typeof t=="string"&&t.startsWith("cmdb_only_")?t.replace("cmdb_only_",""):t.toString():""}),b=x(()=>m.state.menuInfo||[]),h=x(()=>{const t=b.value.find(o=>o.name==="cmdb");return t&&t.children?t.children:b.value.filter(o=>o.name==="cidata"||o.name==="cimodelManage"||o.parentid_id==="cmdb"||o.parentid_id==="cimodelManage")});console.log("菜单",h.value);const M=(t,o)=>{for(const c of t){if(c.name===o)return c;if(c.children&&c.children.length>0){const i=M(c.children,o);if(i)return i}}return null},F=async t=>{const o=M(b.value,t);o&&R.push({name:`cmdb_only_${o.name}`})};return C(""),E(async()=>{if(!m.state.menuInfo||m.state.menuInfo.length===0)try{await m.dispatch("getRoleMenu",{role:m.state.role})}catch(t){console.error("获取菜单失败:",t)}}),P(()=>{}),(t,o)=>{const c=u("el-icon"),i=u("el-menu-item"),S=u("el-sub-menu"),I=u("el-menu"),V=u("el-scrollbar"),D=u("el-aside"),K=u("router-view"),U=u("el-main"),L=u("el-container");return n(),_("div",ee,[r(L,{class:"full-height"},{default:e(()=>[r(D,{width:"200px",class:"aside"},{default:e(()=>[o[0]||(o[0]=d("div",{class:"logo"},[d("h3",null,"资产配置")],-1)),r(V,null,{default:e(()=>[r(I,{"default-active":B.value,class:"el-menu-vertical",onSelect:F},{default:e(()=>[(n(!0),_(p,null,g(h.value,l=>(n(),_(p,{key:l.name},[l.children&&l.children.length>0?(n(),s(S,{key:0,index:l.name},{title:e(()=>[l.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:l.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(l.label),1)]),default:e(()=>[(n(!0),_(p,null,g(l.children,a=>(n(),_(p,{key:a.name},[a.children&&a.children.length>0?(n(),s(S,{key:0,index:a.name},{title:e(()=>[a.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:a.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(a.label),1)]),default:e(()=>[(n(!0),_(p,null,g(a.children,f=>(n(),s(i,{key:f.name,index:f.name},{default:e(()=>[f.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:f.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(f.label),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(n(),s(i,{key:1,index:a.name},{default:e(()=>[a.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:a.icon},null,8,["icon"])]),_:2},1024)):y("",!0),d("span",null,k(a.label),1)]),_:2},1032,["index"]))],64))),128))]),_:2},1032,["index"])):(n(),s(i,{key:1,index:l.name},{title:e(()=>[O(k(l.label),1)]),default:e(()=>[l.icon?(n(),s(c,{key:0},{default:e(()=>[r(v,{icon:l.icon},null,8,["icon"])]),_:2},1024)):y("",!0)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active"])]),_:1})]),_:1}),r(U,{class:"main-content"},{default:e(()=>[r(K,null,{default:e(({Component:l,route:a})=>[(n(),s(H,{include:G(N)},[(n(),s(W(l),j({key:a.path},a.params),null,16))],1032,["include"]))]),_:1})]),_:1})]),_:1})])}}}),se=Q(ne,[["__scopeId","data-v-d0d4f30f"]]);export{se as default};
