import{d as je,u as Ke,v as pe,g as We,j as He,r as h,a as ke,z as Qe,b_ as p,h as f,c as w,o as n,b as o,f as t,m as G,ca as Xe,w as s,q as v,c7 as Ye,k as P,cu as X,t as c,F as R,i as j,aS as Y,B as b,bX as L,aQ as O,bV as Ze,cc as et,l as tt,c4 as at,_ as st}from"./index-Cm0tF2Sj.js";import{s as lt}from"./vue-draggable-plus-CNkJk6iI.js";const ot={class:"card favorites-container"},rt={class:"favorites-header"},nt={class:"header-right"},it={class:"groups-container"},dt={class:"group-col"},ut={class:"group-card-header"},ct={class:"group-info"},pt={class:"group-stats"},_t={class:"portal-count"},vt={class:"portals-grid-preview"},mt={class:"portal-preview-wrapper"},ft={key:0,class:"portal-preview-more portal-preview-item"},gt={class:"group-card-header"},yt={class:"group-info"},ht={class:"group-text-info"},wt={class:"group-name"},bt={class:"group-stats"},kt={class:"portal-count"},Vt={class:"portals-grid-preview"},Ct={class:"portal-preview-wrapper"},xt={key:0,class:"portal-preview-more portal-preview-item"},$t={class:"dialog-header-edit"},Ut={key:0,class:"group-name-display"},St={class:"group-title"},Ft={key:1,class:"group-name-edit"},zt={class:"edit-buttons"},Mt={class:"group-detail-header"},Dt={key:0,class:"group-owner"},It={class:"dialog-content"},Gt={class:"portals-grid"},Nt={class:"portal-card-content"},At={class:"portal-icon-wrapper"},Et={class:"portal-info"},Lt={class:"portal-name"},Ot=["title"],Bt={key:0,class:"portal-description"},Jt={class:"portal-actions"},Rt={class:"dialog-footer"},qt={class:"flexJbetween"},Tt={style:{float:"left"}},Pt={class:"dialog-footer"},jt={class:"dialog-footer"},Kt={class:"dialog-content"},Wt={class:"portals-grid"},Ht={class:"portal-card-content"},Qt={class:"portal-icon-wrapper"},Xt={class:"portal-info"},Yt={class:"portal-name"},Zt=["title"],ea={key:0,class:"portal-description"},ta={class:"portal-actions"},aa=je({name:"favorites",__name:"favoritesView",setup(sa){const Ve=Ke(),Ce=pe(()=>Ve.userInfo.username),{proxy:C}=We();He();const K=h([]),xe=h([]),Z=h(""),ee=h(!1),B=h(!1),q=h(!1),y=h(null),N=h([]);h(!1);const ne=h(!1),ie=h(!1),M=h("add"),de=h("add"),d=ke({name:"",url:"",groups:[],sharing_type:"public",username:"",password:"",sort:9999,target:!0,describe:"",status:!0}),$e=pe(()=>K.value.map(l=>({name:l.group,id:l.id,sharing_type:l.sharing_type,disabled:d.sharing_type==="public"&&l.sharing_type==="private"}))),te=h(!1),Ue=()=>{te.value=!0},Se=()=>{te.value=!1},J=ke({group:"",sharing_type:"public"}),ue=h(null),_e=h(null),Fe={name:[{required:!0,message:"请输入门户名称",trigger:"blur"}],url:[{required:!0,message:"请输入链接地址",trigger:"blur"}],groups:[{required:!0,message:"请选择分组",trigger:"change"}],sharing_type:[{required:!0,message:"请选择共享类型",trigger:"change"}]},ze={group:[{required:!0,message:"请输入分组名称",trigger:"blur"}],sharing_type:[{required:!0,message:"请选择共享类型",trigger:"change"}]},D=h([]),Me=()=>{if(!y.value)return;const l=K.value.find(e=>e.id===y.value.id);l&&(N.value=[...l.portals||[]])},U=async()=>{try{const l=await C.$api.pgroupGet({page:1,page_size:1e3});K.value=l.data.results,D.value=[],l.data.results.forEach(e=>{e.portals.forEach(m=>{if(m.is_favorite){if(D.value.findIndex(r=>r.id===m.id)!==-1)return;D.value.push(m)}})}),Me()}catch(l){p.error("获取分组数据失败"),console.error(l)}},De=async()=>{try{const l=await C.$api.portalGet({page:1,page_size:1e3});xe.value=l.data.results}catch(l){p.error("获取门户数据失败"),console.error(l)}},Ie=pe(()=>{if(!Z.value)return K.value.filter(e=>e.portals.length>0);const l=Z.value.toLowerCase();return K.value.map(e=>{const m=e.portals.filter(r=>{var i;return r.name.toLowerCase().includes(l)||((i=r.describe)==null?void 0:i.toLowerCase().includes(l))||r.url.toLowerCase().includes(l)});return{...e,portals:m}}).filter(e=>e.portals.length>0||e.group.toLowerCase().includes(l))}),W=l=>{let e=0;for(let g=0;g<l.length;g++)e=l.charCodeAt(g)+((e<<5)-e);let r=getComputedStyle(document.documentElement).getPropertyValue("--el-color-primary").trim();r||(r="#409EFF");const i=e%40-20,k=e%20-10;if(r.startsWith("#")){const g=Ge(r),x=Math.min(90,Math.max(20,g.l+i)),$=Math.min(100,Math.max(30,g.s+k));return`hsl(${g.h}, ${$}%, ${x}%)`}else if(r.startsWith("hsl")){const g=r.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(g){const x=parseInt(g[1]),$=parseInt(g[2]),S=parseInt(g[3]),I=Math.min(90,Math.max(20,S+i)),F=Math.min(100,Math.max(30,$+k));return`hsl(${x}, ${F}%, ${I}%)`}}return r},Ge=l=>{l=l.replace("#","");let e=parseInt(l.substring(0,2),16)/255,m=parseInt(l.substring(2,4),16)/255,r=parseInt(l.substring(4,6),16)/255;const i=Math.max(e,m,r),k=Math.min(e,m,r);let g,x,$;if($=(i+k)/2,i===k)g=x=0;else{const S=i-k;switch(x=$>.5?S/(2-i-k):S/(i+k),i){case e:g=(m-r)/S+(m<r?6:0);break;case m:g=(r-e)/S+2;break;case r:g=(e-m)/S+4;break}g=Math.round(g*60)}return x=Math.round(x*100),$=Math.round($*100),{h:g,s:x,l:$}},Ne=()=>{y.value.sharing_type==="public"?d.sharing_type="public":d.sharing_type="private",d.groups=[y.value.id],M.value="add",B.value=!0},Ae=l=>{l==="portal"?(M.value="add",B.value=!0):l==="group"&&(de.value="add",q.value=!0)},Ee=l=>{M.value="edit",Object.assign(d,{id:l.id,name:l.name,url:l.url,groups:l.groups||[],sharing_type:l.sharing_type,username:l.username||"",password:"",sort:l.sort_order||9999,target:l.target!==void 0?l.target:!0,describe:l.describe||"",status:l.status!==void 0?l.status:!0}),B.value=!0},Le=()=>{ue.value.validate(async l=>{if(l){ne.value=!0;try{let e;M.value==="add"?(e=await C.$api.portalAdd(d),e.status===201?(p.success("门户添加成功"),ae(),await U()):p.error("门户添加失败: "+JSON.stringify(e.data))):(e=await C.$api.portalUpdate(d),e.status===200?(p.success("门户更新成功"),ae(),await U()):p.error("门户更新失败: "+JSON.stringify(e.data)))}catch(e){p.error("操作失败: "+e.message)}finally{ne.value=!1}}})},Oe=l=>{at.confirm(`确定要删除门户 "${l.name}" 吗？此操作不可撤销。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{(await C.$api.portalDelete(l.id)).status===204?(p.success("门户删除成功"),B.value=!1,await U()):p.error("门户删除失败")}catch(e){p.error("门户删除失败: "+e.message)}}).catch(()=>{})},ae=()=>{ue.value.resetFields(),B.value=!1},Be=()=>{_e.value.validate(async l=>{if(l){ie.value=!0;try{let e;de.value==="add"?(e=await C.$api.pgroupAdd(J),e.status===201?(p.success("门户组添加成功"),q.value=!1,await U()):p.error("门户组添加失败: "+JSON.stringify(e.data))):(e=await C.$api.pgroupUpdate(J),e.status===200?(p.success("门户组更新成功"),q.value=!1,await U()):p.error("门户组更新失败: "+JSON.stringify(e.data)))}catch(e){p.error("操作失败: "+e.message)}finally{ie.value=!1}}})},Je=l=>{y.value=l,N.value=[...l.portals||[]],ee.value=!0},ve=()=>{ee.value=!1,y.value=null},Re=async l=>{const e=[...N.value],m=e.splice(l.oldIndex,1)[0];e.splice(l.newIndex,0,m),N.value=e,console.log(N.value.map(i=>i.name));let r=await C.$api.updatePortalOrder({group_id:y.value.id,ordering:N.value.map((i,k)=>({id:i.id,sort_order:k+1}))});r.status===200?(p.success("排序保存成功"),await U()):p.error("排序保存失败,"+JSON.stringify(r.data))},me=l=>{l.target?window.open(l.url,"_blank"):window.location.href=l.url},se=h(!1),A=h(""),qe=()=>{se.value=!0,A.value=y.value.group},fe=()=>{se.value=!1,A.value=""},ge=async()=>{if(!A.value.trim()){p.error("组名不能为空");return}if(A.value===y.value.group){fe();return}try{(await C.$api.pgroupUpdate({id:y.value.id,group:A.value,sharing_type:y.value.sharing_type})).status===200?(p.success("组名更新成功"),await U(),y.value.group=A.value,se.value=!1):p.error("组名更新失败")}catch(l){p.error("组名更新失败: "+l.message)}},E=async l=>{if(l.is_favorite){let e=await C.$api.removeFavorite({id:l.id});e.status===204?(p.success("取消收藏成功"),U()):p.error("取消收藏失败: "+JSON.stringify(e.data))}else{let e=await C.$api.addFavorite({id:l.id});e.status===201?(p.success("收藏成功"),U()):p.error("收藏失败: "+JSON.stringify(e.data))}};return Qe(()=>{Promise.all([U(),De()]).catch(l=>{p.error("初始化数据失败"),console.error(l)})}),(l,e)=>{var be;const m=f("el-input"),r=f("el-icon"),i=f("el-button"),k=f("el-dropdown-item"),g=f("el-dropdown-menu"),x=f("el-dropdown"),$=f("el-divider"),S=f("el-avatar"),I=f("el-tooltip"),F=f("el-tag"),le=f("Star"),ye=f("el-text"),oe=f("el-card"),Te=f("el-space"),re=f("el-dialog"),V=f("el-form-item"),z=f("el-col"),T=f("el-row"),H=f("el-option"),ce=f("el-select"),Pe=f("el-input-number"),he=f("el-switch"),we=f("el-form");return n(),w(R,null,[o("div",ot,[o("div",rt,[e[25]||(e[25]=o("div",{class:"header-left"},[o("span",{class:"header-title"},"门户清单")],-1)),o("div",nt,[t(m,{modelValue:Z.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Z.value=a),style:{width:"240px"},placeholder:"搜索门户或分组...",clearable:"","prefix-icon":G(Xe)},null,8,["modelValue","prefix-icon"]),t(x,{onCommand:Ae,style:{"margin-left":"15px"}},{dropdown:s(()=>[t(g,null,{default:s(()=>[t(k,{command:"portal"},{default:s(()=>[...e[23]||(e[23]=[v("添加门户",-1)])]),_:1}),t(k,{command:"group"},{default:s(()=>[...e[24]||(e[24]=[v("添加门户组",-1)])]),_:1})]),_:1})]),default:s(()=>[t(i,{type:"primary"},{default:s(()=>[e[22]||(e[22]=v(" 添加 ",-1)),t(r,{class:"el-icon--right"},{default:s(()=>[t(G(Ye))]),_:1})]),_:1})]),_:1})])]),t($),o("div",it,[t(Te,{wrap:"",size:80},{default:s(()=>[o("div",dt,[t(oe,{class:"group-card",shadow:"hover",onClick:e[1]||(e[1]=a=>Ue(D.value))},{default:s(()=>[o("div",ut,[o("div",ct,[t(S,{size:"small",icon:G(X)},null,8,["icon"]),e[26]||(e[26]=o("div",{class:"group-text-info"},[o("span",{class:"group-name"},"收藏夹")],-1))]),o("div",pt,[o("span",_t,c(D.value.length)+" 个链接",1)])]),o("div",vt,[(n(!0),w(R,null,j(D.value.slice(0,9),(a,_)=>(n(),w("div",{key:a.id,class:"portal-preview-item"},[o("div",mt,[t(I,{content:a.url,placement:"top"},{default:s(()=>[o("div",{class:"portal-preview-icon",style:Y({backgroundColor:W(a.id+a.name)})},c(a.name.charAt(0).toUpperCase()),5)]),_:2},1032,["content"]),t(F,{type:a.sharing_type==="public"?"success":"warning",size:"small",class:"portal-sharing-tag"},{default:s(()=>[v(c(a.sharing_type==="public"?"公":"私"),1)]),_:2},1032,["type"]),t(I,{content:a.is_favorite?"取消收藏":"收藏",placement:"top"},{default:s(()=>[a.is_favorite?(n(),b(r,{key:0,class:O(["portal-favorite-tag",{favorited:a.is_favorite}]),onClick:L(u=>E(a),["stop"]),color:"#e6a23c"},{default:s(()=>[t(G(X))]),_:1},8,["class","onClick"])):(n(),b(r,{key:1,class:O(["portal-favorite-tag",{favorited:a.is_favorite}]),onClick:L(u=>E(a),["stop"])},{default:s(()=>[t(le)]),_:1},8,["class","onClick"]))]),_:2},1032,["content"])]),t(ye,null,{default:s(()=>[v(c(a.name),1)]),_:2},1024)]))),128))]),D.value.length>9?(n(),w("div",ft," +"+c(D.value.length-9),1)):P("",!0)]),_:1})]),(n(!0),w(R,null,j(Ie.value,a=>(n(),w("div",{key:a.id,class:"group-col"},[t(oe,{class:"group-card",shadow:"hover",onClick:_=>Je(a)},{default:s(()=>[o("div",gt,[o("div",yt,[t(S,{style:Y({backgroundColor:W(a.group)}),size:"small"},{default:s(()=>[v(c(a.group.charAt(0).toUpperCase()),1)]),_:2},1032,["style"]),o("div",ht,[o("span",wt,c(a.group),1),t(F,{type:a.sharing_type==="public"?"success":"warning",size:"small",class:"sharing-type-tag"},{default:s(()=>[v(c(a.sharing_type==="public"?"公共":"私人"),1)]),_:2},1032,["type"])])]),o("div",bt,[o("span",kt,c(a.portals.length)+" 个链接",1)])]),o("div",Vt,[(n(!0),w(R,null,j(a.portals.slice(0,9),(_,u)=>(n(),w("div",{key:_.id+a.id,class:"portal-preview-item"},[o("div",Ct,[t(I,{content:_.url,placement:"top"},{default:s(()=>[o("div",{class:"portal-preview-icon",style:Y({backgroundColor:W(_.id+_.name)})},c(_.name.charAt(0).toUpperCase()),5)]),_:2},1032,["content"]),t(F,{type:_.sharing_type==="public"?"success":"warning",size:"small",class:"portal-sharing-tag"},{default:s(()=>[v(c(_.sharing_type==="public"?"公":"私"),1)]),_:2},1032,["type"]),t(I,{content:_.is_favorite?"取消收藏":"收藏",placement:"top"},{default:s(()=>[_.is_favorite?(n(),b(r,{key:0,class:O(["portal-favorite-tag",{favorited:_.is_favorite}]),onClick:L(Q=>E(_),["stop"]),color:"#e6a23c"},{default:s(()=>[t(G(X))]),_:1},8,["class","onClick"])):(n(),b(r,{key:1,class:O(["portal-favorite-tag",{favorited:_.is_favorite}]),onClick:L(Q=>E(_),["stop"])},{default:s(()=>[t(le)]),_:1},8,["class","onClick"]))]),_:2},1032,["content"])]),t(ye,null,{default:s(()=>[v(c(_.name),1)]),_:2},1024)]))),128))]),a.portals.length>9?(n(),w("div",xt," +"+c(a.portals.length-9),1)):P("",!0)]),_:2},1032,["onClick"])]))),128))]),_:1})])]),t(re,{modelValue:ee.value,"onUpdate:modelValue":e[4]||(e[4]=a=>ee.value=a),title:(be=y.value)==null?void 0:be.group,width:"800px",class:"group-detail-dialog","before-close":ve},{header:s(()=>{var a,_;return[o("div",$t,[se.value?(n(),w("div",Ft,[t(m,{modelValue:A.value,"onUpdate:modelValue":e[2]||(e[2]=u=>A.value=u),style:{width:"150px"},onKeyup:tt(ge,["enter"])},null,8,["modelValue"]),o("div",zt,[t(i,{onClick:fe},{default:s(()=>[...e[27]||(e[27]=[v("取消",-1)])]),_:1}),t(i,{type:"primary",onClick:ge},{default:s(()=>[...e[28]||(e[28]=[v(" 保存 ",-1)])]),_:1})])])):(n(),w("div",Ut,[o("span",St,c((a=y.value)==null?void 0:a.group),1),t(i,{type:"primary",link:"",icon:G(et),onClick:qe,disabled:Ce.value!==((_=y.value)==null?void 0:_.owner_name)},null,8,["icon","disabled"])]))])]}),footer:s(()=>[o("div",Rt,[t(i,{onClick:ve},{default:s(()=>[...e[30]||(e[30]=[v("关闭",-1)])]),_:1}),t(i,{type:"primary",onClick:e[3]||(e[3]=a=>Ne())},{default:s(()=>[...e[31]||(e[31]=[v(" 添加门户 ",-1)])]),_:1})])]),default:s(()=>{var a,_;return[o("div",Mt,[t(F,{type:((a=y.value)==null?void 0:a.sharing_type)==="public"?"success":"warning",size:"small"},{default:s(()=>{var u;return[v(c(((u=y.value)==null?void 0:u.sharing_type)==="public"?"公共":"私人"),1)]}),_:1},8,["type"]),(_=y.value)!=null&&_.owner_name?(n(),w("span",Dt," 创建者: "+c(y.value.owner_name),1)):P("",!0)]),o("div",It,[Ze((n(),w("div",Gt,[(n(!0),w(R,null,j(N.value,u=>(n(),b(oe,{key:u.id,class:"portal-card",shadow:"hover",onClick:Q=>Ee(u)},{default:s(()=>[t(I,{content:"点击编辑门户",placement:"top",enterable:!1},{default:s(()=>[o("div",Nt,[o("div",At,[o("div",{class:"portal-icon",style:Y({backgroundColor:W(u.id+u.name)})},c(u.name.charAt(0).toUpperCase()),5),t(F,{type:u.sharing_type==="public"?"success":"warning",size:"small",class:"portal-sharing-tag-detail"},{default:s(()=>[v(c(u.sharing_type==="public"?"公":"私"),1)]),_:2},1032,["type"])]),o("div",Et,[o("div",Lt,c(u.name),1),o("div",{class:"portal-url",title:u.url},c(u.url),9,Ot),u.describe?(n(),w("div",Bt,c(u.describe),1)):P("",!0)]),o("div",Jt,[t(I,{content:u.is_favorite?"取消收藏":"收藏",placement:"top"},{default:s(()=>[u.is_favorite?(n(),b(r,{key:0,class:O({favorited:u.is_favorite}),onClick:L(Q=>E(u),["stop"]),color:"#e6a23c",size:"large"},{default:s(()=>[t(G(X))]),_:1},8,["class","onClick"])):(n(),b(r,{key:1,size:"large",class:O({favorited:u.is_favorite}),onClick:L(Q=>E(u),["stop"])},{default:s(()=>[t(le)]),_:1},8,["class","onClick"]))]),_:2},1032,["content"]),t(i,{type:"primary",link:"",onClick:Q=>me(u)},{default:s(()=>[...e[29]||(e[29]=[v(" 打开 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])),[[G(lt),[N.value,{animation:150,onUpdate:Re}]]])])]}),_:1},8,["modelValue","title"]),t(re,{modelValue:B.value,"onUpdate:modelValue":e[16]||(e[16]=a=>B.value=a),title:M.value==="add"?"添加门户":"编辑门户",width:"600px","before-close":ae},{footer:s(()=>[o("div",Pt,[t(i,{onClick:ae},{default:s(()=>[...e[34]||(e[34]=[v("取消",-1)])]),_:1}),M.value==="edit"?(n(),b(i,{key:0,type:"danger",onClick:e[15]||(e[15]=a=>Oe(d))},{default:s(()=>[...e[35]||(e[35]=[v("删除",-1)])]),_:1})):P("",!0),t(i,{type:"primary",onClick:Le,loading:ne.value},{default:s(()=>[...e[36]||(e[36]=[v(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:s(()=>[t(we,{model:d,rules:Fe,ref_key:"portalFormRef",ref:ue,"label-width":"100px"},{default:s(()=>[t(T,{gutter:20},{default:s(()=>[t(z,{span:12},{default:s(()=>[t(V,{label:"名称",prop:"name"},{default:s(()=>[t(m,{modelValue:d.name,"onUpdate:modelValue":e[5]||(e[5]=a=>d.name=a),placeholder:"请输入门户名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(z,{span:12},{default:s(()=>[t(V,{label:"链接地址",prop:"url"},{default:s(()=>[t(m,{modelValue:d.url,"onUpdate:modelValue":e[6]||(e[6]=a=>d.url=a),placeholder:"请输入链接地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:20},{default:s(()=>[t(z,{span:12},{default:s(()=>[t(V,{label:"分组",prop:"groups"},{default:s(()=>[t(ce,{modelValue:d.groups,"onUpdate:modelValue":e[7]||(e[7]=a=>d.groups=a),placeholder:"请选择分组",style:{width:"100%"},filterable:"",multiple:"",disabled:y.value!==null&&M.value==="add"},{default:s(()=>[(n(!0),w(R,null,j($e.value,a=>(n(),b(H,{key:a.id,label:a.name,value:a.id,disabled:a.disabled},{default:s(()=>[o("div",qt,[o("span",Tt,c(a.name),1),a.sharing_type==="public"?(n(),b(F,{key:0,type:"success"},{default:s(()=>[...e[32]||(e[32]=[v("公共",-1)])]),_:1})):(n(),b(F,{key:1,type:"danger"},{default:s(()=>[...e[33]||(e[33]=[v("私有",-1)])]),_:1}))])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),t(z,{span:12},{default:s(()=>[t(V,{label:"共享类型",prop:"sharing_type"},{default:s(()=>[t(ce,{modelValue:d.sharing_type,"onUpdate:modelValue":e[8]||(e[8]=a=>d.sharing_type=a),placeholder:"请选择共享类型",style:{width:"100%"},disabled:y.value!==null&&M.value==="add"||M.value==="edit"},{default:s(()=>[t(H,{label:"公共",value:"public"}),t(H,{label:"私人",value:"private"})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:20},{default:s(()=>[t(z,{span:12},{default:s(()=>[t(V,{label:"用户名",prop:"username"},{default:s(()=>[t(m,{modelValue:d.username,"onUpdate:modelValue":e[9]||(e[9]=a=>d.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),t(z,{span:12},{default:s(()=>[t(V,{label:"密码",prop:"password"},{default:s(()=>[t(m,{modelValue:d.password,"onUpdate:modelValue":e[10]||(e[10]=a=>d.password=a),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:20},{default:s(()=>[t(z,{span:12},{default:s(()=>[t(V,{label:"排序",prop:"sort"},{default:s(()=>[t(Pe,{modelValue:d.sort,"onUpdate:modelValue":e[11]||(e[11]=a=>d.sort=a),"controls-position":"right",min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(z,{span:12},{default:s(()=>[t(V,{label:"跳转方式",prop:"target"},{default:s(()=>[t(he,{modelValue:d.target,"onUpdate:modelValue":e[12]||(e[12]=a=>d.target=a),"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"新窗口","inactive-text":"当前窗口"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:20},{default:s(()=>[t(z,{span:24},{default:s(()=>[t(V,{label:"描述",prop:"describe"},{default:s(()=>[t(m,{modelValue:d.describe,"onUpdate:modelValue":e[13]||(e[13]=a=>d.describe=a),placeholder:"请输入描述",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:20},{default:s(()=>[t(z,{span:12},{default:s(()=>[t(V,{label:"状态",prop:"status"},{default:s(()=>[t(he,{modelValue:d.status,"onUpdate:modelValue":e[14]||(e[14]=a=>d.status=a),"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(re,{modelValue:q.value,"onUpdate:modelValue":e[20]||(e[20]=a=>q.value=a),title:de.value==="add"?"添加门户组":"编辑门户组",width:"500px"},{footer:s(()=>[o("div",jt,[t(i,{onClick:e[19]||(e[19]=a=>q.value=!1)},{default:s(()=>[...e[37]||(e[37]=[v("取消",-1)])]),_:1}),t(i,{type:"primary",onClick:Be,loading:ie.value},{default:s(()=>[...e[38]||(e[38]=[v(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:s(()=>[t(we,{model:J,rules:ze,ref_key:"groupFormRef",ref:_e,"label-width":"100px"},{default:s(()=>[t(V,{label:"分组名称",prop:"group"},{default:s(()=>[t(m,{modelValue:J.group,"onUpdate:modelValue":e[17]||(e[17]=a=>J.group=a),placeholder:"请输入分组名称"},null,8,["modelValue"])]),_:1}),t(V,{label:"共享类型",prop:"sharing_type"},{default:s(()=>[t(ce,{modelValue:J.sharing_type,"onUpdate:modelValue":e[18]||(e[18]=a=>J.sharing_type=a),placeholder:"请选择共享类型",style:{width:"100%"}},{default:s(()=>[t(H,{label:"公共",value:"public"}),t(H,{label:"私人",value:"private"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(re,{modelValue:te.value,"onUpdate:modelValue":e[21]||(e[21]=a=>te.value=a),title:"收藏夹",width:"800px",class:"group-detail-dialog","before-close":Se},{default:s(()=>[o("div",Kt,[o("div",Wt,[(n(!0),w(R,null,j(D.value,a=>(n(),b(oe,{key:a.id,class:"portal-card",shadow:"hover"},{default:s(()=>[o("div",Ht,[o("div",Qt,[o("div",{class:"portal-icon",style:Y({backgroundColor:W(a.id+a.name)})},c(a.name.charAt(0).toUpperCase()),5),t(F,{type:a.sharing_type==="public"?"success":"warning",size:"small",class:"portal-sharing-tag-detail"},{default:s(()=>[v(c(a.sharing_type==="public"?"公":"私"),1)]),_:2},1032,["type"])]),o("div",Xt,[o("div",Yt,c(a.name),1),o("div",{class:"portal-url",title:a.url},c(a.url),9,Zt),a.describe?(n(),w("div",ea,c(a.describe),1)):P("",!0)]),o("div",ta,[t(I,{content:a.is_favorite?"取消收藏":"收藏",placement:"top"},{default:s(()=>[a.is_favorite?(n(),b(r,{key:0,class:O({favorited:a.is_favorite}),onClick:L(_=>E(a),["stop"]),color:"#e6a23c",size:"large"},{default:s(()=>[t(G(X))]),_:1},8,["class","onClick"])):(n(),b(r,{key:1,size:"large",class:O({favorited:a.is_favorite}),onClick:L(_=>E(a),["stop"])},{default:s(()=>[t(le)]),_:1},8,["class","onClick"]))]),_:2},1032,["content"]),t(i,{type:"primary",link:"",onClick:_=>me(a)},{default:s(()=>[...e[39]||(e[39]=[v(" 打开 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))])])]),_:1},8,["modelValue"])],64)}}}),ra=st(aa,[["__scopeId","data-v-1fd5fccb"]]);export{ra as default};
